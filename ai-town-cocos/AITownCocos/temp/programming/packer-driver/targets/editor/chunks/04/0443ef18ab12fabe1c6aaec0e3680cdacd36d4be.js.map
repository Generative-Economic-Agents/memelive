{"version":3,"sources":["file:///Users/feiwang/workSpace/AITown/cutepet/assets/src/bridge/device.ts"],"names":["getAppVersion","agent","navigator","userAgent","toLowerCase","regStr","isBiliApp","match","replace","getMallSdkVersion","m","isBiliMallSdk","appBuild","ios519","couponIosBuild","couponAndroidBuild","merchantIosBuild","merchantAndroidBuild","ios522","android522","ios523","android523","ios524","android524","ios525","android525","ios526","android526","ios529","android529","ios548","android548","ios549","android549","ios550","android550","u","isiOS","test","isAndroid","appVersion","Number","isiOSBiliBlue","isBeforeIos519","isH5Pay","deviceType","isWeiXin","indexOf","isQQ","isWeibo","isMissevanWebview","pathname","isChannelComic","isChannel","isSupportNA","mallSdkVersion","isH5","isMini","device","isAlipay","isBiliMini","platform","version","is","gt","gte","lt","lte"],"mappings":";;;;;AA6BA,WAASA,aAAT,GAAyB;AACrB,UAAMC,KAAK,GAAGC,SAAS,CAACC,SAAV,CAAoBC,WAApB,EAAd;AACA,UAAMC,MAAM,GAAG,mBAAf;AACA,WAAOC,SAAS,GAAK,GAAEL,KAAK,CAACM,KAAN,CAAYF,MAAZ,CAAoB,EAAxB,CAA2BG,OAA3B,CAAmC,WAAnC,EAAgD,EAAhD,CAAH,GAAyD,CAAzE;AACH;;AAgBD;AACA,WAASC,iBAAT,GAA4B;AACxB,UAAMR,KAAK,GAAGC,SAAS,CAACC,SAAV,CAAoBC,WAApB,EAAd;AACA,UAAMC,MAAM,GAAG,2BAAf;AACA,UAAMK,CAAC,GAAGT,KAAK,CAACM,KAAN,CAAYF,MAAZ,CAAV;;AACA,QAAGM,aAAa,IAAID,CAAjB,IAAsBA,CAAC,CAAC,CAAD,CAA1B,EAA8B;AAC1B,aAAOA,CAAC,CAAC,CAAD,CAAR;AACH;;AACD,WAAOC,aAAa,GAAK,GAAEV,KAAK,CAACM,KAAN,CAAYF,MAAZ,CAAoB,EAA3B,GAAgC,CAApD;AACH;;;;;;;;;;;AA1DKO,MAAAA,Q,GAAW;AACbC,QAAAA,MAAM,EAAE,IADK;AAEbC,QAAAA,cAAc,EAAE,IAFH;AAGbC,QAAAA,kBAAkB,EAAE,MAHP;AAIbC,QAAAA,gBAAgB,EAAE,IAJL;AAKbC,QAAAA,oBAAoB,EAAE,OALT;AAMbC,QAAAA,MAAM,EAAE,IANK;AAObC,QAAAA,UAAU,EAAE,OAPC;AAQbC,QAAAA,MAAM,EAAE,IARK;AASbC,QAAAA,UAAU,EAAE,OATC;AAUbC,QAAAA,MAAM,EAAE,IAVK;AAWbC,QAAAA,UAAU,EAAE,OAXC;AAYbC,QAAAA,MAAM,EAAE,IAZK;AAabC,QAAAA,UAAU,EAAE,OAbC;AAcbC,QAAAA,MAAM,EAAE,IAdK;AAebC,QAAAA,UAAU,EAAE,OAfC;AAgBbC,QAAAA,MAAM,EAAE,IAhBK;AAiBbC,QAAAA,UAAU,EAAE,OAjBC;AAkBbC,QAAAA,MAAM,EAAE,IAlBK;AAmBbC,QAAAA,UAAU,EAAE,OAnBC;AAoBbC,QAAAA,MAAM,EAAE,IApBK;AAqBbC,QAAAA,UAAU,EAAE,OArBC;AAsBbC,QAAAA,MAAM,EAAE,IAtBK;AAuBbC,QAAAA,UAAU,EAAE;AAvBC,O;AAyBXC,MAAAA,C,GAAIlC,SAAS,CAACC,S;AACdkC,MAAAA,K,GAAQ,oBAAoBC,IAApB,CAAyBF,CAAzB,C;AACRG,MAAAA,S,GAAY,CAACF,K;AACb/B,MAAAA,S,GAAY,WAAWgC,IAAX,CAAgBF,CAAhB,C;AAMZI,MAAAA,U,GAAaC,MAAM,CAACzC,aAAa,EAAd,C;AACnB0C,MAAAA,a,GAAgBF,UAAU,IAAI,IAAd,IAAsBA,UAAU,GAAG,I;AACnDG,MAAAA,c,GAAiBN,KAAK,IAAI/B,SAAT,IAAsBkC,UAAU,GAAG,I;AACpDI,MAAAA,O,GAAWP,KAAK,IAAI/B,SAAT,IAAsBmC,MAAM,CAACzC,aAAa,EAAd,CAAN,GAA0BY,QAAQ,CAACM,M;AACpE2B,MAAAA,U,GAAaR,KAAK,GAAG,KAAH,GAAW,S;AAC7BS,MAAAA,Q,GAAW,kBAAkBR,IAAlB,CAAuBF,CAAvB,KAA6BA,CAAC,CAAChC,WAAF,GAAgB2C,OAAhB,CAAwB,QAAxB,MAAsC,CAAC,C;AAC/EC,MAAAA,I,GAAOZ,CAAC,CAAC7B,KAAF,CAAQ,OAAR,MAAqB,I;AAC5B0C,MAAAA,O,GAAUb,CAAC,CAACW,OAAF,CAAU,OAAV,IAAqB,CAAC,C;AAChCG,MAAAA,iB,GAAoB,K,EAAO;;AAC3BC,MAAAA,Q,GAAW,E,EAAI;;AACfC,MAAAA,c,GAAkBD,QAAQ,CAACJ,OAAT,CAAiB,eAAjB,IAAoC,CAAC,CAArC,IAA0CI,QAAQ,CAACJ,OAAT,CAAiB,QAAjB,IAA6B,CAAC,C;AAC1FM,MAAAA,S,GAAYH,iBAAiB,IAAKE,c,EACxC;;AACMzC,MAAAA,a,GAAgB,kBAAkB2B,IAAlB,CAAuBF,CAAvB,C;AAChBkB,MAAAA,W,GAAchD,SAAS,IAAEK,a;AAWzB4C,MAAAA,c,GAAiB9C,iBAAiB,E;AAClC+C,MAAAA,I,GAAO,I;AACPC,MAAAA,M,GAAS,K;AAETC,MAAAA,M,GAAS;AACXC,QAAAA,QAAQ,EAAE,KADC;AAEXb,QAAAA,QAFW;AAGXE,QAAAA,IAHW;AAIXC,QAAAA,OAJW;AAKXW,QAAAA,UAAU,EAAE,KALD;AAMXtD,QAAAA,SANW;AAOXoC,QAAAA,aAPW;AAQXL,QAAAA,KARW;AASXM,QAAAA,cATW;AAUXC,QAAAA,OAVW;AAWXL,QAAAA,SAXW;AAYXC,QAAAA,UAZW;AAaX5B,QAAAA,QAbW;AAcXsC,QAAAA,iBAdW;AAeXW,QAAAA,QAAQ,EAAEhB,UAfC;AAgBXO,QAAAA,cAhBW;AAiBXzC,QAAAA,aAjBW;AAkBX4C,QAAAA,cAlBW;AAmBXF,QAAAA,SAnBW;AAoBXC,QAAAA,WApBW;AAqBXE,QAAAA,IArBW;AAsBXC,QAAAA,MAtBW;AAuBXK,QAAAA,OAAO,EAAE;AACLC,UAAAA,EAAE,CAACD,OAAD,EAAU;AACR,mBAAOxD,SAAS,IAAIkC,UAAU,KAAK5B,QAAQ,CAACiC,UAAU,GAAGiB,OAAd,CAA3C;AACH,WAHI;;AAILE,UAAAA,EAAE,CAACF,OAAD,EAAU;AACR,mBAAOxD,SAAS,IAAIkC,UAAU,GAAG5B,QAAQ,CAACiC,UAAU,GAAGiB,OAAd,CAAzC;AACH,WANI;;AAOLG,UAAAA,GAAG,CAACH,OAAD,EAAU;AACT,mBAAOxD,SAAS,IAAIkC,UAAU,IAAI5B,QAAQ,CAACiC,UAAU,GAAGiB,OAAd,CAA1C;AACH,WATI;;AAULI,UAAAA,EAAE,CAACJ,OAAD,EAAU;AACR,mBAAOxD,SAAS,IAAIkC,UAAU,GAAG5B,QAAQ,CAACiC,UAAU,GAAGiB,OAAd,CAAzC;AACH,WAZI;;AAaLK,UAAAA,GAAG,CAACL,OAAD,EAAU;AACT,mBAAOxD,SAAS,IAAIkC,UAAU,IAAI5B,QAAQ,CAACiC,UAAU,GAAGiB,OAAd,CAA1C;AACH;;AAfI;AAvBE,O;;yBA0CAJ,M","sourcesContent":["const appBuild = {\n    ios519: 6220,\n    couponIosBuild: 6500,\n    couponAndroidBuild: 519010,\n    merchantIosBuild: 6510,\n    merchantAndroidBuild: 5200020,\n    ios522: 6520,\n    android522: 5219000,\n    ios523: 6570,\n    android523: 5220010,\n    ios524: 6620,\n    android524: 5240000,\n    ios525: 6680,\n    android525: 5250000,\n    ios526: 6710,\n    android526: 5250009,\n    ios529: 6831,\n    android529: 5285001,\n    ios548: 8821,\n    android548: 5480000,\n    ios549: 8930,\n    android549: 5490000,\n    ios550: 8931,\n    android550: 5500000\n};\nconst u = navigator.userAgent;\nconst isiOS = /iPad|iPhone|iPod/i.test(u);\nconst isAndroid = !isiOS;\nconst isBiliApp = /BiliApp/i.test(u);\nfunction getAppVersion() {\n    const agent = navigator.userAgent.toLowerCase();\n    const regStr = /biliapp\\/[\\d.]+/gi;\n    return isBiliApp ? (`${agent.match(regStr)}`).replace(/[^0-9.]/ig, '') : 0;\n}\nconst appVersion = Number(getAppVersion());\nconst isiOSBiliBlue = appVersion >= 7000 && appVersion < 8000;\nconst isBeforeIos519 = isiOS && isBiliApp && appVersion < 6220;\nconst isH5Pay = (isiOS && isBiliApp && Number(getAppVersion()) < appBuild.ios522)\nconst deviceType = isiOS ? 'ios' : 'android';\nconst isWeiXin = /MicroMessenger/i.test(u) && u.toLowerCase().indexOf('wxwork') === -1;\nconst isQQ = u.match(/\\sQQ/i) !== null;\nconst isWeibo = u.indexOf('Weibo') > -1;\nconst isMissevanWebview = false; // 猫耳渠道\nconst pathname = \"\"; //window.location.pathname;\nconst isChannelComic =  pathname.indexOf('/channelcomic') > -1 || pathname.indexOf('/comic') > -1;\nconst isChannel = isMissevanWebview ||  isChannelComic;\n// 是否sdk容器\nconst isBiliMallSdk = /mallSdkVersion/i.test(u);\nconst isSupportNA = isBiliApp||isBiliMallSdk;\n// 获取外渠使用的SDK版本号\nfunction getMallSdkVersion(){\n    const agent = navigator.userAgent.toLowerCase();\n    const regStr = /mallSdkVersion\\/([0-9]+)/i;\n    const m = agent.match(regStr);\n    if(isBiliMallSdk && m && m[1]){\n        return m[1];\n    }\n    return isBiliMallSdk ? (`${agent.match(regStr)}`) : 0;\n}\nconst mallSdkVersion = getMallSdkVersion();\nconst isH5 = true;\nconst isMini = false;\n\nconst device = {\n    isAlipay: false,\n    isWeiXin,\n    isQQ,\n    isWeibo,\n    isBiliMini: false,\n    isBiliApp,\n    isiOSBiliBlue,\n    isiOS,\n    isBeforeIos519,\n    isH5Pay,\n    isAndroid,\n    appVersion,\n    appBuild,\n    isMissevanWebview,\n    platform: deviceType,\n    isChannelComic,\n    isBiliMallSdk,\n    mallSdkVersion,\n    isChannel,\n    isSupportNA,\n    isH5,\n    isMini,\n    version: {\n        is(version) {\n            return isBiliApp && appVersion === appBuild[deviceType + version];\n        },\n        gt(version) {\n            return isBiliApp && appVersion > appBuild[deviceType + version];\n        },\n        gte(version) {\n            return isBiliApp && appVersion >= appBuild[deviceType + version];\n        },\n        lt(version) {\n            return isBiliApp && appVersion < appBuild[deviceType + version];\n        },\n        lte(version) {\n            return isBiliApp && appVersion <= appBuild[deviceType + version];\n        }\n    }\n};\n\nexport default device;\n"]}