{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws4/lru.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","size","LruCache","capacity","map","Object","create","list","DoublyLinkedList","prototype","get","key","node","undefined","used","val","set","prune","DoublyLinkedNode","moveToFront","pop","firstNode","lastNode","remove","prev","next","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n module.exports = function(size) {\n   return new LruCache(size)\n }\n\n function LruCache(size) {\n   this.capacity = size | 0\n   this.map = Object.create(null)\n   this.list = new DoublyLinkedList()\n }\n\n LruCache.prototype.get = function(key) {\n   var node = this.map[key]\n   if (node == null) return undefined\n   this.used(node)\n   return node.val\n }\n\n LruCache.prototype.set = function(key, val) {\n   var node = this.map[key]\n   if (node != null) {\n     node.val = val\n   } else {\n     if (!this.capacity) this.prune()\n     if (!this.capacity) return false\n     node = new DoublyLinkedNode(key, val)\n     this.map[key] = node\n     this.capacity--\n   }\n   this.used(node)\n   return true\n }\n\n LruCache.prototype.used = function(node) {\n   this.list.moveToFront(node)\n }\n\n LruCache.prototype.prune = function() {\n   var node = this.list.pop()\n   if (node != null) {\n     delete this.map[node.key]\n     this.capacity++\n   }\n }\n\n\n function DoublyLinkedList() {\n   this.firstNode = null\n   this.lastNode = null\n }\n\n DoublyLinkedList.prototype.moveToFront = function(node) {\n   if (this.firstNode == node) return\n\n   this.remove(node)\n\n   if (this.firstNode == null) {\n     this.firstNode = node\n     this.lastNode = node\n     node.prev = null\n     node.next = null\n   } else {\n     node.prev = null\n     node.next = this.firstNode\n     node.next.prev = node\n     this.firstNode = node\n   }\n }\n\n DoublyLinkedList.prototype.pop = function() {\n   var lastNode = this.lastNode\n   if (lastNode != null) {\n     this.remove(lastNode)\n   }\n   return lastNode\n }\n\n DoublyLinkedList.prototype.remove = function(node) {\n   if (this.firstNode == node) {\n     this.firstNode = node.next\n   } else if (node.prev != null) {\n     node.prev.next = node.next\n   }\n   if (this.lastNode == node) {\n     this.lastNode = node.prev\n   } else if (node.next != null) {\n     node.next.prev = node.prev\n   }\n }\n\n\n function DoublyLinkedNode(key, val) {\n   this.key = key\n   this.val = val\n   this.prev = null\n   this.next = null\n }\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}