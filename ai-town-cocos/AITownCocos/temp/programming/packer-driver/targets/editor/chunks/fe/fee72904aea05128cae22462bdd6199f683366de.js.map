{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/core-decorators/lib/throttle.js"],"names":["_cjsLoader","_req","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","default","throttle","_utils","DEFAULT_TIMEOUT","handleDescriptor","descriptor","_ref","_ref2","_ref2$","wait","_ref2$2","options","callback","SyntaxError","leading","trailing","_this","meta","metaFor","throttleTimeoutIds","throttlePreviousTimestamps","timeout","previous","now","Date","throttleTrailingArgs","remaining","clearTimeout","apply","setTimeout","_len","args","_key","decorate","_cjsExports","___esModule","__esModule","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from './private/utils';\nlet _cjsExports;\nlet ___esModule;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n 'use strict';\n\n Object.defineProperty(exports, \"__esModule\", {\n   value: true\n });\n\n var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n exports.default = throttle;\n\n var _utils = require('./private/utils');\n\n var DEFAULT_TIMEOUT = 300;\n\n function handleDescriptor(target, key, descriptor, _ref) {\n   var _ref2 = _slicedToArray(_ref, 2),\n       _ref2$ = _ref2[0],\n       wait = _ref2$ === undefined ? DEFAULT_TIMEOUT : _ref2$,\n       _ref2$2 = _ref2[1],\n       options = _ref2$2 === undefined ? {} : _ref2$2;\n\n   var callback = descriptor.value;\n\n   if (typeof callback !== 'function') {\n     throw new SyntaxError('Only functions can be throttled');\n   }\n\n   if (options.leading !== false) {\n     options.leading = true;\n   }\n\n   if (options.trailing !== false) {\n     options.trailing = true;\n   }\n\n   return _extends({}, descriptor, {\n     value: function value() {\n       var _this = this;\n\n       var meta = (0, _utils.metaFor)(this);\n       var throttleTimeoutIds = meta.throttleTimeoutIds,\n           throttlePreviousTimestamps = meta.throttlePreviousTimestamps;\n\n       var timeout = throttleTimeoutIds[key];\n       // last execute timestamp\n       var previous = throttlePreviousTimestamps[key] || 0;\n       var now = Date.now();\n\n       if (options.trailing) {\n         meta.throttleTrailingArgs = arguments;\n       }\n\n       // if first be called and disable the execution on the leading edge\n       // set last execute timestamp to now\n       if (!previous && options.leading === false) {\n         previous = now;\n       }\n\n       var remaining = wait - (now - previous);\n\n       if (remaining <= 0) {\n         clearTimeout(timeout);\n         delete throttleTimeoutIds[key];\n         throttlePreviousTimestamps[key] = now;\n         callback.apply(this, arguments);\n       } else if (!timeout && options.trailing) {\n         throttleTimeoutIds[key] = setTimeout(function () {\n           throttlePreviousTimestamps[key] = options.leading === false ? 0 : Date.now();\n           delete throttleTimeoutIds[key];\n           callback.apply(_this, meta.throttleTrailingArgs);\n           // don't leak memory!\n           meta.throttleTrailingArgs = null;\n         }, remaining);\n       }\n     }\n   });\n }\n\n function throttle() {\n   for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n     args[_key] = arguments[_key];\n   }\n\n   return (0, _utils.decorate)(handleDescriptor, args);\n }\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_default = module.exports.default;\n\n}, () => ({\n  './private/utils': _req,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}