{"version":3,"sources":["file:///Users/feiwang/AITown/AITownCocos/assets/src/NPC/PlayerControl.ts"],"names":["_decorator","Component","input","Input","KeyCode","Node","NPCControl","originRootX","_","ccclass","property","PlayerControl","start","on","EventType","KEY_DOWN","event","createRoleInfoNode","active","includes","KEY_A","KEY_W","KEY_S","KEY_D","keyCode","player","getComponent","setNPCMoveDirect","keyDown","currentDirectKey","KEY_UP","npcRoot","setPosition","getPosition","y","stepIndex"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,S,OAAAA,S;AAA0BC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,O,OAAAA,O;AAASC,MAAAA,I,OAAAA,I;;AACrEC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,W,iBAAAA,W;;AACdC,MAAAA,C;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;+BAGjBW,a,WADZF,OAAO,CAAC,eAAD,C,UAGHC,QAAQ,CAACL,IAAD,C,UAGRK,QAAQ,CAACL,IAAD,C,2BANb,MACaM,aADb,SACmCV,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAQzCW,QAAAA,KAAK,GAAG;AACJV,UAAAA,KAAK,CAACW,EAAN,CAASV,KAAK,CAACW,SAAN,CAAgBC,QAAzB,EAAoCC,KAAD,IAAwB;AACvD,gBAAG,KAAKC,kBAAL,CAAwBC,MAAxB,IAAkC,CAAC;AAAA;AAAA,wBAAEC,QAAF,CAAW,CAACf,OAAO,CAACgB,KAAT,EAAgBhB,OAAO,CAACiB,KAAxB,EAA+BjB,OAAO,CAACkB,KAAvC,EAA8ClB,OAAO,CAACmB,KAAtD,CAAX,EAAyEP,KAAK,CAACQ,OAA/E,CAAtC,EAA8H;AAC1H;AACH;;AACD,iBAAKC,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCC,gBAArC,CAAsDX,KAAK,CAACQ,OAA5D;AACA,iBAAKC,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCE,OAArC,GAA+C,IAA/C;AACA,iBAAKH,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCG,gBAArC,GAAwDb,KAAK,CAACQ,OAA9D;AACH,WAPD;AAQAtB,UAAAA,KAAK,CAACW,EAAN,CAASV,KAAK,CAACW,SAAN,CAAgBgB,MAAzB,EAAkCd,KAAD,IAAwB;AACrD,gBAAG,KAAKC,kBAAL,CAAwBC,MAA3B,EAAkC;AAC9B;AACH;;AACD,iBAAKO,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCE,OAArC,GAA+C,KAA/C;AACA,iBAAKH,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCK,OAArC,CAA6CC,WAA7C;AAAA;AAAA,4CAAsE,KAAKP,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCK,OAArC,CAA6CE,WAA7C,GAA2DC,CAAjI;AACA,iBAAKT,MAAL,CAAYC,YAAZ;AAAA;AAAA,0CAAqCS,SAArC,GAAiD,CAAjD;AACH,WAPD;AASH,SA1BwC,CA4BzC;AACA;AACA;;;AA9ByC,O","sourcesContent":["import { _decorator, Camera, Component, EventKeyboard, input, Input, KeyCode, Node } from 'cc';\nimport { NPCControl, originRootX } from './NPCControl';\nimport _ from 'lodash';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PlayerControl')\nexport class PlayerControl extends Component {\n\n    @property(Node)\n    public player!: Node;\n\n    @property(Node)\n    public createRoleInfoNode!: Node;\n\n    start() {\n        input.on(Input.EventType.KEY_DOWN, (event: EventKeyboard)=>{\n            if(this.createRoleInfoNode.active || !_.includes([KeyCode.KEY_A, KeyCode.KEY_W, KeyCode.KEY_S, KeyCode.KEY_D], event.keyCode)){\n                return\n            }\n            this.player.getComponent(NPCControl).setNPCMoveDirect(event.keyCode)\n            this.player.getComponent(NPCControl).keyDown = true\n            this.player.getComponent(NPCControl).currentDirectKey = event.keyCode\n        })\n        input.on(Input.EventType.KEY_UP, (event: EventKeyboard)=>{\n            if(this.createRoleInfoNode.active){\n                return\n            }\n            this.player.getComponent(NPCControl).keyDown = false\n            this.player.getComponent(NPCControl).npcRoot.setPosition(originRootX ,this.player.getComponent(NPCControl).npcRoot.getPosition().y)\n            this.player.getComponent(NPCControl).stepIndex = 0\n        })\n        \n    }\n\n    // update(deltaTime: number) {\n    //     this.createRoleInfoNode.setPosition(this.player.getPosition().x, this.player.getPosition().y)\n    // }\n}\n\n"]}