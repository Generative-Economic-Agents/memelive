{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/signers/v3.js"],"names":["_cjsLoader","_req","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","AWS","inherit","util","Signers","V3","RequestSigner","addAuthorization","credentials","date","datetime","rfc822","request","headers","sessionToken","authorization","accessKeyId","signedHeaders","signature","arrayEach","headersToSign","iterator","h","push","toLowerCase","sort","join","canonicalHeaders","parts","trim","String","each","k","match","crypto","hmac","secretAccessKey","stringToSign","method","body","sha256","_cjsExports"],"mappings":";;;;;;;;;AAAOA,MAAAA,U;;AACkBC,MAAAA,I,iBAAhBC,Y;;;8BAEHA,Y,GAAe,cAAYC,G;;AACjCH,MAAAA,UAAU,CAACI,MAAX,CAAkBF,YAAlB,EAAgC,UAAUG,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoCC,UAApC,EAAgDC,SAAhD,EAA2D;AAC3F;AAGC,YAAIC,GAAG,GAAGJ,OAAO,CAAC,SAAD,CAAjB;;AACA,YAAIK,OAAO,GAAGD,GAAG,CAACE,IAAJ,CAASD,OAAvB;AAEA;AACD;AACA;;AACCD,QAAAA,GAAG,CAACG,OAAJ,CAAYC,EAAZ,GAAiBH,OAAO,CAACD,GAAG,CAACG,OAAJ,CAAYE,aAAb,EAA4B;AAClDC,UAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BC,WAA1B,EAAuCC,IAAvC,EAA6C;AAE7D,gBAAIC,QAAQ,GAAGT,GAAG,CAACE,IAAJ,CAASM,IAAT,CAAcE,MAAd,CAAqBF,IAArB,CAAf;AAEA,iBAAKG,OAAL,CAAaC,OAAb,CAAqB,YAArB,IAAqCH,QAArC;;AAEA,gBAAIF,WAAW,CAACM,YAAhB,EAA8B;AAC5B,mBAAKF,OAAL,CAAaC,OAAb,CAAqB,sBAArB,IAA+CL,WAAW,CAACM,YAA3D;AACD;;AAED,iBAAKF,OAAL,CAAaC,OAAb,CAAqB,sBAArB,IACE,KAAKE,aAAL,CAAmBP,WAAnB,EAAgCE,QAAhC,CADF;AAGD,WAdiD;AAgBlDK,UAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBP,WAAvB,EAAoC;AACjD,mBAAO,UACL,iBADK,GACeA,WAAW,CAACQ,WAD3B,GACyC,GADzC,GAEL,uBAFK,GAGL,gBAHK,GAGc,KAAKC,aAAL,EAHd,GAGqC,GAHrC,GAIL,YAJK,GAIU,KAAKC,SAAL,CAAeV,WAAf,CAJjB;AAKD,WAtBiD;AAwBlDS,UAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,gBAAIJ,OAAO,GAAG,EAAd;AACAZ,YAAAA,GAAG,CAACE,IAAJ,CAASgB,SAAT,CAAmB,KAAKC,aAAL,EAAnB,EAAyC,SAASC,QAAT,CAAkBC,CAAlB,EAAqB;AAC5DT,cAAAA,OAAO,CAACU,IAAR,CAAaD,CAAC,CAACE,WAAF,EAAb;AACD,aAFD;AAGA,mBAAOX,OAAO,CAACY,IAAR,GAAeC,IAAf,CAAoB,GAApB,CAAP;AACD,WA9BiD;AAgClDC,UAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,gBAAId,OAAO,GAAG,KAAKD,OAAL,CAAaC,OAA3B;AACA,gBAAIe,KAAK,GAAG,EAAZ;AACA3B,YAAAA,GAAG,CAACE,IAAJ,CAASgB,SAAT,CAAmB,KAAKC,aAAL,EAAnB,EAAyC,SAASC,QAAT,CAAkBC,CAAlB,EAAqB;AAC5DM,cAAAA,KAAK,CAACL,IAAN,CAAWD,CAAC,CAACE,WAAF,GAAgBK,IAAhB,KAAyB,GAAzB,GAA+BC,MAAM,CAACjB,OAAO,CAACS,CAAD,CAAR,CAAN,CAAmBO,IAAnB,EAA1C;AACD,aAFD;AAGA,mBAAOD,KAAK,CAACH,IAAN,GAAaC,IAAb,CAAkB,IAAlB,IAA0B,IAAjC;AACD,WAvCiD;AAyClDN,UAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,gBAAIP,OAAO,GAAG,EAAd;AACAZ,YAAAA,GAAG,CAACE,IAAJ,CAAS4B,IAAT,CAAc,KAAKnB,OAAL,CAAaC,OAA3B,EAAoC,SAASQ,QAAT,CAAkBW,CAAlB,EAAqB;AACvD,kBAAIA,CAAC,KAAK,MAAN,IAAgBA,CAAC,KAAK,kBAAtB,IAA4CA,CAAC,CAACC,KAAF,CAAQ,SAAR,CAAhD,EAAoE;AAClEpB,gBAAAA,OAAO,CAACU,IAAR,CAAaS,CAAb;AACD;AACF,aAJD;AAKA,mBAAOnB,OAAP;AACD,WAjDiD;AAmDlDK,UAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBV,WAAnB,EAAgC;AACzC,mBAAOP,GAAG,CAACE,IAAJ,CAAS+B,MAAT,CAAgBC,IAAhB,CAAqB3B,WAAW,CAAC4B,eAAjC,EAAkD,KAAKC,YAAL,EAAlD,EAAuE,QAAvE,CAAP;AACD,WArDiD;AAuDlDA,UAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,gBAAIT,KAAK,GAAG,EAAZ;AACAA,YAAAA,KAAK,CAACL,IAAN,CAAW,KAAKX,OAAL,CAAa0B,MAAxB;AACAV,YAAAA,KAAK,CAACL,IAAN,CAAW,GAAX;AACAK,YAAAA,KAAK,CAACL,IAAN,CAAW,EAAX;AACAK,YAAAA,KAAK,CAACL,IAAN,CAAW,KAAKI,gBAAL,EAAX;AACAC,YAAAA,KAAK,CAACL,IAAN,CAAW,KAAKX,OAAL,CAAa2B,IAAxB;AACA,mBAAOtC,GAAG,CAACE,IAAJ,CAAS+B,MAAT,CAAgBM,MAAhB,CAAuBZ,KAAK,CAACF,IAAN,CAAW,IAAX,CAAvB,CAAP;AACD;AA/DiD,SAA5B,CAAxB;AAmEA;AACD;AACA;;AACC5B,QAAAA,MAAM,CAACF,OAAP,GAAiBK,GAAG,CAACG,OAAJ,CAAYC,EAA7B,CAhF0F,CAmF3F;;AAEA,2BAAAoC,WAAW,GAAG3C,MAAM,CAACF,OAArB;AAGC,OAxFD,EAwFG,OAAO;AACR,mBAAWJ;AADH,OAAP,CAxFH","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '../core';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var AWS = require('../core');\n var inherit = AWS.util.inherit;\n\n /**\n  * @api private\n  */\n AWS.Signers.V3 = inherit(AWS.Signers.RequestSigner, {\n   addAuthorization: function addAuthorization(credentials, date) {\n\n     var datetime = AWS.util.date.rfc822(date);\n\n     this.request.headers['X-Amz-Date'] = datetime;\n\n     if (credentials.sessionToken) {\n       this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n     }\n\n     this.request.headers['X-Amzn-Authorization'] =\n       this.authorization(credentials, datetime);\n\n   },\n\n   authorization: function authorization(credentials) {\n     return 'AWS3 ' +\n       'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n       'Algorithm=HmacSHA256,' +\n       'SignedHeaders=' + this.signedHeaders() + ',' +\n       'Signature=' + this.signature(credentials);\n   },\n\n   signedHeaders: function signedHeaders() {\n     var headers = [];\n     AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n       headers.push(h.toLowerCase());\n     });\n     return headers.sort().join(';');\n   },\n\n   canonicalHeaders: function canonicalHeaders() {\n     var headers = this.request.headers;\n     var parts = [];\n     AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n       parts.push(h.toLowerCase().trim() + ':' + String(headers[h]).trim());\n     });\n     return parts.sort().join('\\n') + '\\n';\n   },\n\n   headersToSign: function headersToSign() {\n     var headers = [];\n     AWS.util.each(this.request.headers, function iterator(k) {\n       if (k === 'Host' || k === 'Content-Encoding' || k.match(/^X-Amz/i)) {\n         headers.push(k);\n       }\n     });\n     return headers;\n   },\n\n   signature: function signature(credentials) {\n     return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n   },\n\n   stringToSign: function stringToSign() {\n     var parts = [];\n     parts.push(this.request.method);\n     parts.push('/');\n     parts.push('');\n     parts.push(this.canonicalHeaders());\n     parts.push(this.request.body);\n     return AWS.util.crypto.sha256(parts.join('\\n'));\n   }\n\n });\n\n /**\n  * @api private\n  */\n module.exports = AWS.Signers.V3;\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, () => ({\n  '../core': _req,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}