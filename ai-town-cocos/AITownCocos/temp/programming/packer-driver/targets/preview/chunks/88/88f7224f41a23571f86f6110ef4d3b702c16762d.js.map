{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/protocol/rest.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","url","define","exports","require","module","__filename","__dirname","util","populateHostPrefix","populateMethod","req","httpRequest","method","service","api","operations","operation","httpMethod","generateURI","endpointPath","operationPath","input","params","uri","join","replace","queryString","queryStringSet","each","members","name","member","paramValue","undefined","location","regex","RegExp","_","plus","fn","uriEscapePath","uriEscape","String","type","map","val","toWireFormat","toString","key","value","Array","isArray","indexOf","parts","arrayEach","Object","keys","sort","i","length","push","populateURI","endpoint","path","httpPath","populateHeaders","memberValue","headers","isJsonValue","base64","encode","buildRequest","extractError","extractData","resp","request","data","r","httpResponse","output","k","v","toLowerCase","header","isLocationName","pattern","result","match","decode","toType","parseInt","statusCode","_cjsExports","_buildRequest","_extractError","_extractData","_generateURI"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '../util';\nimport { __cjsMetaURL as _req0} from './helpers';\nlet _cjsExports;\nlet _buildRequest;\nlet _extractError;\nlet _extractData;\nlet _generateURI;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var util = require('../util');\n var populateHostPrefix = require('./helpers').populateHostPrefix;\n\n function populateMethod(req) {\n   req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n }\n\n function generateURI(endpointPath, operationPath, input, params) {\n   var uri = [endpointPath, operationPath].join('/');\n   uri = uri.replace(/\\/+/g, '/');\n\n   var queryString = {}, queryStringSet = false;\n   util.each(input.members, function (name, member) {\n     var paramValue = params[name];\n     if (paramValue === null || paramValue === undefined) return;\n     if (member.location === 'uri') {\n       var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n       uri = uri.replace(regex, function(_, plus) {\n         var fn = plus ? util.uriEscapePath : util.uriEscape;\n         return fn(String(paramValue));\n       });\n     } else if (member.location === 'querystring') {\n       queryStringSet = true;\n\n       if (member.type === 'list') {\n         queryString[member.name] = paramValue.map(function(val) {\n           return util.uriEscape(member.member.toWireFormat(val).toString());\n         });\n       } else if (member.type === 'map') {\n         util.each(paramValue, function(key, value) {\n           if (Array.isArray(value)) {\n             queryString[key] = value.map(function(val) {\n               return util.uriEscape(String(val));\n             });\n           } else {\n             queryString[key] = util.uriEscape(String(value));\n           }\n         });\n       } else {\n         queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n       }\n     }\n   });\n\n   if (queryStringSet) {\n     uri += (uri.indexOf('?') >= 0 ? '&' : '?');\n     var parts = [];\n     util.arrayEach(Object.keys(queryString).sort(), function(key) {\n       if (!Array.isArray(queryString[key])) {\n         queryString[key] = [queryString[key]];\n       }\n       for (var i = 0; i < queryString[key].length; i++) {\n         parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n       }\n     });\n     uri += parts.join('&');\n   }\n\n   return uri;\n }\n\n function populateURI(req) {\n   var operation = req.service.api.operations[req.operation];\n   var input = operation.input;\n\n   var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n   req.httpRequest.path = uri;\n }\n\n function populateHeaders(req) {\n   var operation = req.service.api.operations[req.operation];\n   util.each(operation.input.members, function (name, member) {\n     var value = req.params[name];\n     if (value === null || value === undefined) return;\n\n     if (member.location === 'headers' && member.type === 'map') {\n       util.each(value, function(key, memberValue) {\n         req.httpRequest.headers[member.name + key] = memberValue;\n       });\n     } else if (member.location === 'header') {\n       value = member.toWireFormat(value).toString();\n       if (member.isJsonValue) {\n         value = util.base64.encode(value);\n       }\n       req.httpRequest.headers[member.name] = value;\n     }\n   });\n }\n\n function buildRequest(req) {\n   populateMethod(req);\n   populateURI(req);\n   populateHeaders(req);\n   populateHostPrefix(req);\n }\n\n function extractError() {\n }\n\n function extractData(resp) {\n   var req = resp.request;\n   var data = {};\n   var r = resp.httpResponse;\n   var operation = req.service.api.operations[req.operation];\n   var output = operation.output;\n\n   // normalize headers names to lower-cased keys for matching\n   var headers = {};\n   util.each(r.headers, function (k, v) {\n     headers[k.toLowerCase()] = v;\n   });\n\n   util.each(output.members, function(name, member) {\n     var header = (member.name || name).toLowerCase();\n     if (member.location === 'headers' && member.type === 'map') {\n       data[name] = {};\n       var location = member.isLocationName ? member.name : '';\n       var pattern = new RegExp('^' + location + '(.+)', 'i');\n       util.each(r.headers, function (k, v) {\n         var result = k.match(pattern);\n         if (result !== null) {\n           data[name][result[1]] = v;\n         }\n       });\n     } else if (member.location === 'header') {\n       if (headers[header] !== undefined) {\n         var value = member.isJsonValue ?\n           util.base64.decode(headers[header]) :\n           headers[header];\n         data[name] = member.toType(value);\n       }\n     } else if (member.location === 'statusCode') {\n       data[name] = parseInt(r.statusCode, 10);\n     }\n   });\n\n   resp.data = data;\n }\n\n /**\n  * @api private\n  */\n module.exports = {\n   buildRequest: buildRequest,\n   extractError: extractError,\n   extractData: extractData,\n   generateURI: generateURI\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_buildRequest = module.exports.buildRequest;\n_extractError = module.exports.extractError;\n_extractData = module.exports.extractData;\n_generateURI = module.exports.generateURI;\n\n}, () => ({\n  '../util': _req,\n  './helpers': _req0,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}