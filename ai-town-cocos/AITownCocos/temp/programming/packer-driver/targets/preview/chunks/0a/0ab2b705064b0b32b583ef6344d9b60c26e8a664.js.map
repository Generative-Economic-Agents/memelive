{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/protocol/json.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","url","define","exports","require","module","__filename","__dirname","util","JsonBuilder","JsonParser","populateHostPrefix","buildRequest","req","httpRequest","api","service","target","targetPrefix","operations","operation","name","version","jsonVersion","input","builder","awsQueryCompatible","params","Object","assign","body","build","headers","extractError","resp","error","httpResponse","code","split","length","e","JSON","parse","toString","__type","Code","pop","message","Message","key","defineProperty","value","enumerable","writable","statusCode","statusMessage","Error","extractData","request","config","convertResponseTypes","data","shape","output","parser","_cjsExports","_buildRequest","_extractError","_extractData"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '../util';\nimport { __cjsMetaURL as _req0} from '../json/builder';\nimport { __cjsMetaURL as _req1} from '../json/parser';\nimport { __cjsMetaURL as _req2} from './helpers';\nlet _cjsExports;\nlet _buildRequest;\nlet _extractError;\nlet _extractData;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var util = require('../util');\n var JsonBuilder = require('../json/builder');\n var JsonParser = require('../json/parser');\n var populateHostPrefix = require('./helpers').populateHostPrefix;\n\n function buildRequest(req) {\n   var httpRequest = req.httpRequest;\n   var api = req.service.api;\n   var target = api.targetPrefix + '.' + api.operations[req.operation].name;\n   var version = api.jsonVersion || '1.0';\n   var input = api.operations[req.operation].input;\n   var builder = new JsonBuilder();\n\n   if (version === 1) version = '1.0';\n\n   if (api.awsQueryCompatible) {\n     if (!httpRequest.params) {\n       httpRequest.params = {};\n     }\n     // because Query protocol does this.\n     Object.assign(httpRequest.params, req.params);\n   }\n\n   httpRequest.body = builder.build(req.params || {}, input);\n   httpRequest.headers['Content-Type'] = 'application/x-amz-json-' + version;\n   httpRequest.headers['X-Amz-Target'] = target;\n\n   populateHostPrefix(req);\n }\n\n function extractError(resp) {\n   var error = {};\n   var httpResponse = resp.httpResponse;\n\n   error.code = httpResponse.headers['x-amzn-errortype'] || 'UnknownError';\n   if (typeof error.code === 'string') {\n     error.code = error.code.split(':')[0];\n   }\n\n   if (httpResponse.body.length > 0) {\n     try {\n       var e = JSON.parse(httpResponse.body.toString());\n\n       var code = e.__type || e.code || e.Code;\n       if (code) {\n         error.code = code.split('#').pop();\n       }\n       if (error.code === 'RequestEntityTooLarge') {\n         error.message = 'Request body must be less than 1 MB';\n       } else {\n         error.message = (e.message || e.Message || null);\n       }\n\n       // The minimized models do not have error shapes, so\n       // without expanding the model size, it's not possible\n       // to validate the response shape (members) or\n       // check if any are sensitive to logging.\n\n       // Assign the fields as non-enumerable, allowing specific access only.\n       for (var key in e || {}) {\n         if (key === 'code' || key === 'message') {\n           continue;\n         }\n         error['[' + key + ']'] = 'See error.' + key + ' for details.';\n         Object.defineProperty(error, key, {\n           value: e[key],\n           enumerable: false,\n           writable: true\n         });\n       }\n     } catch (e) {\n       error.statusCode = httpResponse.statusCode;\n       error.message = httpResponse.statusMessage;\n     }\n   } else {\n     error.statusCode = httpResponse.statusCode;\n     error.message = httpResponse.statusCode.toString();\n   }\n\n   resp.error = util.error(new Error(), error);\n }\n\n function extractData(resp) {\n   var body = resp.httpResponse.body.toString() || '{}';\n   if (resp.request.service.config.convertResponseTypes === false) {\n     resp.data = JSON.parse(body);\n   } else {\n     var operation = resp.request.service.api.operations[resp.request.operation];\n     var shape = operation.output || {};\n     var parser = new JsonParser();\n     resp.data = parser.parse(body, shape);\n   }\n }\n\n /**\n  * @api private\n  */\n module.exports = {\n   buildRequest: buildRequest,\n   extractError: extractError,\n   extractData: extractData\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_buildRequest = module.exports.buildRequest;\n_extractError = module.exports.extractError;\n_extractData = module.exports.extractData;\n\n}, () => ({\n  '../util': _req,\n  '../json/builder': _req0,\n  '../json/parser': _req1,\n  './helpers': _req2,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}