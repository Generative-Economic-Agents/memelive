{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/ajv/lib/keyword.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","url","define","exports","require","module","__filename","__dirname","IDENTIFIER","customRuleCode","definitionSchema","add","addKeyword","get","getKeyword","remove","removeKeyword","validate","validateKeyword","keyword","definition","RULES","keywords","Error","test","dataType","type","Array","isArray","i","length","_addRule","metaSchema","$data","_opts","anyOf","validateSchema","compile","all","ruleGroup","rg","rules","push","rule","custom","code","implements","j","splice","throwError","errors","v","_validateKeyword","errorsText","_cjsExports","_add","_get","_remove","_validate"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from './dotjs/custom';\nimport { __cjsMetaURL as _req0} from './definition_schema';\nlet _cjsExports;\nlet _add;\nlet _get;\nlet _remove;\nlet _validate;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n 'use strict';\n\n var IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\n var customRuleCode = require('./dotjs/custom');\n var definitionSchema = require('./definition_schema');\n\n module.exports = {\n   add: addKeyword,\n   get: getKeyword,\n   remove: removeKeyword,\n   validate: validateKeyword\n };\n\n\n /**\n  * Define custom keyword\n  * @this  Ajv\n  * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n  * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n  * @return {Ajv} this for method chaining\n  */\n function addKeyword(keyword, definition) {\n   /* jshint validthis: true */\n   /* eslint no-shadow: 0 */\n   var RULES = this.RULES;\n   if (RULES.keywords[keyword])\n     throw new Error('Keyword ' + keyword + ' is already defined');\n\n   if (!IDENTIFIER.test(keyword))\n     throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n   if (definition) {\n     this.validateKeyword(definition, true);\n\n     var dataType = definition.type;\n     if (Array.isArray(dataType)) {\n       for (var i=0; i<dataType.length; i++)\n         _addRule(keyword, dataType[i], definition);\n     } else {\n       _addRule(keyword, dataType, definition);\n     }\n\n     var metaSchema = definition.metaSchema;\n     if (metaSchema) {\n       if (definition.$data && this._opts.$data) {\n         metaSchema = {\n           anyOf: [\n             metaSchema,\n             { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n           ]\n         };\n       }\n       definition.validateSchema = this.compile(metaSchema, true);\n     }\n   }\n\n   RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n   function _addRule(keyword, dataType, definition) {\n     var ruleGroup;\n     for (var i=0; i<RULES.length; i++) {\n       var rg = RULES[i];\n       if (rg.type == dataType) {\n         ruleGroup = rg;\n         break;\n       }\n     }\n\n     if (!ruleGroup) {\n       ruleGroup = { type: dataType, rules: [] };\n       RULES.push(ruleGroup);\n     }\n\n     var rule = {\n       keyword: keyword,\n       definition: definition,\n       custom: true,\n       code: customRuleCode,\n       implements: definition.implements\n     };\n     ruleGroup.rules.push(rule);\n     RULES.custom[keyword] = rule;\n   }\n\n   return this;\n }\n\n\n /**\n  * Get keyword\n  * @this  Ajv\n  * @param {String} keyword pre-defined or custom keyword.\n  * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n  */\n function getKeyword(keyword) {\n   /* jshint validthis: true */\n   var rule = this.RULES.custom[keyword];\n   return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n }\n\n\n /**\n  * Remove keyword\n  * @this  Ajv\n  * @param {String} keyword pre-defined or custom keyword.\n  * @return {Ajv} this for method chaining\n  */\n function removeKeyword(keyword) {\n   /* jshint validthis: true */\n   var RULES = this.RULES;\n   delete RULES.keywords[keyword];\n   delete RULES.all[keyword];\n   delete RULES.custom[keyword];\n   for (var i=0; i<RULES.length; i++) {\n     var rules = RULES[i].rules;\n     for (var j=0; j<rules.length; j++) {\n       if (rules[j].keyword == keyword) {\n         rules.splice(j, 1);\n         break;\n       }\n     }\n   }\n   return this;\n }\n\n\n /**\n  * Validate keyword definition\n  * @this  Ajv\n  * @param {Object} definition keyword definition object.\n  * @param {Boolean} throwError true to throw exception if definition is invalid\n  * @return {boolean} validation result\n  */\n function validateKeyword(definition, throwError) {\n   validateKeyword.errors = null;\n   var v = this._validateKeyword = this._validateKeyword\n                                   || this.compile(definitionSchema, true);\n\n   if (v(definition)) return true;\n   validateKeyword.errors = v.errors;\n   if (throwError)\n     throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n   else\n     return false;\n }\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_add = module.exports.add;\n_get = module.exports.get;\n_remove = module.exports.remove;\n_validate = module.exports.validate;\n\n}, () => ({\n  './dotjs/custom': _req,\n  './definition_schema': _req0,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}