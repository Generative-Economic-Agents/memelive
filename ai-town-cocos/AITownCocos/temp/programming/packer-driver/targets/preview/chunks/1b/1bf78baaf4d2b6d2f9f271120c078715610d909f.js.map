{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/xml/node_parser.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","url","define","exports","require","module","__filename","__dirname","AWS","util","Shape","Model","xml2js","options","explicitCharkey","trim","normalize","explicitRoot","emptyTag","explicitArray","ignoreAttrs","mergeAttrs","validator","NodeXmlParser","prototype","parse","xml","shape","result","error","parser","Parser","parseString","e","r","data","parseXml","ResponseMetadata","code","retryable","type","parseStructure","parseMap","parseList","undefined","parseUnknown","parseScalar","each","members","memberName","memberShape","xmlName","name","Object","hasOwnProperty","call","Array","isArray","xmlChild","flattened","isXmlAttribute","$","api","xmlNoDefaultLists","defaultValue","xmlKey","key","xmlValue","value","iterable","entry","arrayEach","child","member","push","text","encoding","create","_","toType","arr","i","length","keys","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '../core';\nimport { __cjsMetaURL as _req0} from 'xml2js';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var AWS = require('../core');\n var util = AWS.util;\n var Shape = AWS.Model.Shape;\n\n var xml2js = require('xml2js');\n\n /**\n  * @api private\n  */\n var options = {  // options passed to xml2js parser\n   explicitCharkey: false, // undocumented\n   trim: false,            // trim the leading/trailing whitespace from text nodes\n   normalize: false,       // trim interior whitespace inside text nodes\n   explicitRoot: false,    // return the root node in the resulting object?\n   emptyTag: null,         // the default value for empty nodes\n   explicitArray: true,    // always put child nodes in an array\n   ignoreAttrs: false,     // ignore attributes, only create text nodes\n   mergeAttrs: false,      // merge attributes and child elements\n   validator: null         // a callable validator\n };\n\n function NodeXmlParser() { }\n\n NodeXmlParser.prototype.parse = function(xml, shape) {\n   shape = shape || {};\n\n   var result = null;\n   var error = null;\n\n   var parser = new xml2js.Parser(options);\n   parser.parseString(xml, function (e, r) {\n     error = e;\n     result = r;\n   });\n\n   if (result) {\n     var data = parseXml(result, shape);\n     if (result.ResponseMetadata) {\n       data.ResponseMetadata = parseXml(result.ResponseMetadata[0], {});\n     }\n     return data;\n   } else if (error) {\n     throw util.error(error, {code: 'XMLParserError', retryable: true});\n   } else { // empty xml document\n     return parseXml({}, shape);\n   }\n };\n\n function parseXml(xml, shape) {\n   switch (shape.type) {\n     case 'structure': return parseStructure(xml, shape);\n     case 'map': return parseMap(xml, shape);\n     case 'list': return parseList(xml, shape);\n     case undefined: case null: return parseUnknown(xml);\n     default: return parseScalar(xml, shape);\n   }\n }\n\n function parseStructure(xml, shape) {\n   var data = {};\n   if (xml === null) return data;\n\n   util.each(shape.members, function(memberName, memberShape) {\n     var xmlName = memberShape.name;\n     if (Object.prototype.hasOwnProperty.call(xml, xmlName) && Array.isArray(xml[xmlName])) {\n       var xmlChild = xml[xmlName];\n       if (!memberShape.flattened) xmlChild = xmlChild[0];\n\n       data[memberName] = parseXml(xmlChild, memberShape);\n     } else if (memberShape.isXmlAttribute &&\n                xml.$ && Object.prototype.hasOwnProperty.call(xml.$, xmlName)) {\n       data[memberName] = parseScalar(xml.$[xmlName], memberShape);\n     } else if (memberShape.type === 'list' && !shape.api.xmlNoDefaultLists) {\n       data[memberName] = memberShape.defaultValue;\n     }\n   });\n\n   return data;\n }\n\n function parseMap(xml, shape) {\n   var data = {};\n   if (xml === null) return data;\n\n   var xmlKey = shape.key.name || 'key';\n   var xmlValue = shape.value.name || 'value';\n   var iterable = shape.flattened ? xml : xml.entry;\n\n   if (Array.isArray(iterable)) {\n     util.arrayEach(iterable, function(child) {\n       data[child[xmlKey][0]] = parseXml(child[xmlValue][0], shape.value);\n     });\n   }\n\n   return data;\n }\n\n function parseList(xml, shape) {\n   var data = [];\n   var name = shape.member.name || 'member';\n   if (shape.flattened) {\n     util.arrayEach(xml, function(xmlChild) {\n       data.push(parseXml(xmlChild, shape.member));\n     });\n   } else if (xml && Array.isArray(xml[name])) {\n     util.arrayEach(xml[name], function(child) {\n       data.push(parseXml(child, shape.member));\n     });\n   }\n\n   return data;\n }\n\n function parseScalar(text, shape) {\n   if (text && text.$ && text.$.encoding === 'base64') {\n     shape = new Shape.create({type: text.$.encoding});\n   }\n   if (text && text._) text = text._;\n\n   if (typeof shape.toType === 'function') {\n     return shape.toType(text);\n   } else {\n     return text;\n   }\n }\n\n function parseUnknown(xml) {\n   if (xml === undefined || xml === null) return '';\n   if (typeof xml === 'string') return xml;\n\n   // parse a list\n   if (Array.isArray(xml)) {\n     var arr = [];\n     for (i = 0; i < xml.length; i++) {\n       arr.push(parseXml(xml[i], {}));\n     }\n     return arr;\n   }\n\n   // empty object\n   var keys = Object.keys(xml), i;\n   if (keys.length === 0 || (keys.length === 1 && keys[0] === '$')) {\n     return {};\n   }\n\n   // object, parse as structure\n   var data = {};\n   for (i = 0; i < keys.length; i++) {\n     var key = keys[i], value = xml[key];\n     if (key === '$') continue;\n     if (value.length > 1) { // this member is a list\n       data[key] = parseList(value, {member: {}});\n     } else { // this member is a single item\n       data[key] = parseXml(value[0], {});\n     }\n   }\n   return data;\n }\n\n /**\n  * @api private\n  */\n module.exports = NodeXmlParser;\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, () => ({\n  '../core': _req,\n  'xml2js': _req0,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}