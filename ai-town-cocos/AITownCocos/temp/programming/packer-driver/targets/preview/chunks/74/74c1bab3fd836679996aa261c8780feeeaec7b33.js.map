{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/FB/lib/fb.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","_req8","_req9","_req10","_req11","_req12","_req13","_req14","_req15","_req16","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","version","FacebookApiException","Facebook","FB","undefined","_getOwnPropertyDescriptor","_getOwnPropertyDescriptor2","_interopRequireDefault","_slicedToArray2","_slicedToArray3","_extends2","_extends3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_symbol","_symbol2","_stringify","_stringify2","_create","_create2","_assign","_assign2","_desc","_value","_class","_anyPromise","_anyPromise2","_coreDecorators","_debug","_debug2","_request","_request2","_url","_url2","_querystring","_querystring2","_crypto","_crypto2","_FacebookApiException","_FacebookApiException2","obj","__esModule","default","_applyDecoratedDescriptor","target","property","decorators","descriptor","context","desc","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","decorator","call","_require","debugReq","debugSig","METHODS","toString","prototype","has","hasOwnProperty","log","d","console","defaultOptions","Promise","accessToken","appId","appSecret","appSecretProof","beta","timeout","scope","redirectUri","proxy","userAgent","isValidOption","stringifyParams","params","data","stringify","postParamData","isFormData","_context","val","Buffer","isBuffer","read","pipe","readable","getAppSecretProof","hmac","createHmac","update","digest","base64UrlDecode","str","base64String","replace","buffer","nodeifyCallback","originalCallback","res","error","_opts","graph","oauthRequest","opts","_internalInherit","options","api","_len","arguments","length","args","Array","_key","ret","_Promise","resolve","reject","push","apply","napi","_len2","_key2","pop","path","next","method","cb","Error","_len3","_key3","type","toLowerCase","shift","substr","indexOf","uri","parsedUri","parsedQuery","formOptions","requestOptions","pool","access_token","appsecret_proof","test","parse","search","query","format","maxSockets","Number","process","env","MAX_SOCKETS","toUpperCase","response","body","json","JSON","ex","code","parseSignedRequest","signedRequest","_context2","_len4","_key4","split","encodedSignature","encodedEnvelope","envelope","base64Digest","base64UrlDigest","_split","_split2","algorithm","getLoginUrl","opt","clientId","client_id","redirect_uri","display","state","scopeQuery","displayQuery","stateQuery","encodeURIComponent","responseType","response_type","keyOrOptions","o","extend","getAccessToken","setAccessToken","withAccessToken","autobind","_cjsExports","___esModule","_version","_FacebookApiException0","_Facebook","_FB","_default"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from 'babel-runtime/core-js/object/get-own-property-descriptor';\nimport { __cjsMetaURL as _req0} from 'babel-runtime/helpers/slicedToArray';\nimport { __cjsMetaURL as _req1} from 'babel-runtime/helpers/extends';\nimport { __cjsMetaURL as _req2} from 'babel-runtime/helpers/classCallCheck';\nimport { __cjsMetaURL as _req3} from 'babel-runtime/helpers/createClass';\nimport { __cjsMetaURL as _req4} from 'babel-runtime/core-js/symbol';\nimport { __cjsMetaURL as _req5} from 'babel-runtime/core-js/json/stringify';\nimport { __cjsMetaURL as _req6} from 'babel-runtime/core-js/object/create';\nimport { __cjsMetaURL as _req7} from 'babel-runtime/core-js/object/assign';\nimport { __cjsMetaURL as _req8} from 'any-promise';\nimport { __cjsMetaURL as _req9} from 'core-decorators';\nimport { __cjsMetaURL as _req10} from 'debug';\nimport { __cjsMetaURL as _req11} from 'request';\nimport { __cjsMetaURL as _req12} from 'url';\nimport { __cjsMetaURL as _req13} from 'querystring';\nimport { __cjsMetaURL as _req14} from 'crypto';\nimport { __cjsMetaURL as _req15} from './FacebookApiException';\nimport { __cjsMetaURL as _req16} from '../package.json';\nlet _cjsExports;\nlet ___esModule;\nlet _version;\nlet _FacebookApiException0;\nlet _Facebook;\nlet _FB;\nlet _default;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n 'use strict';\n\n Object.defineProperty(exports, \"__esModule\", {\n \tvalue: true\n });\n exports.version = exports.FacebookApiException = exports.Facebook = exports.FB = undefined;\n\n var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');\n\n var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\n var _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\n var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\n var _extends2 = require('babel-runtime/helpers/extends');\n\n var _extends3 = _interopRequireDefault(_extends2);\n\n var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\n var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\n var _createClass2 = require('babel-runtime/helpers/createClass');\n\n var _createClass3 = _interopRequireDefault(_createClass2);\n\n var _symbol = require('babel-runtime/core-js/symbol');\n\n var _symbol2 = _interopRequireDefault(_symbol);\n\n var _stringify = require('babel-runtime/core-js/json/stringify');\n\n var _stringify2 = _interopRequireDefault(_stringify);\n\n var _create = require('babel-runtime/core-js/object/create');\n\n var _create2 = _interopRequireDefault(_create);\n\n var _assign = require('babel-runtime/core-js/object/assign');\n\n var _assign2 = _interopRequireDefault(_assign);\n\n var _desc, _value, _class;\n\n var _anyPromise = require('any-promise');\n\n var _anyPromise2 = _interopRequireDefault(_anyPromise);\n\n var _coreDecorators = require('core-decorators');\n\n var _debug = require('debug');\n\n var _debug2 = _interopRequireDefault(_debug);\n\n var _request = require('request');\n\n var _request2 = _interopRequireDefault(_request);\n\n var _url = require('url');\n\n var _url2 = _interopRequireDefault(_url);\n\n var _querystring = require('querystring');\n\n var _querystring2 = _interopRequireDefault(_querystring);\n\n var _crypto = require('crypto');\n\n var _crypto2 = _interopRequireDefault(_crypto);\n\n var _FacebookApiException = require('./FacebookApiException');\n\n var _FacebookApiException2 = _interopRequireDefault(_FacebookApiException);\n\n function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n \tvar desc = {};\n \tObject['ke' + 'ys'](descriptor).forEach(function (key) {\n \t\tdesc[key] = descriptor[key];\n \t});\n \tdesc.enumerable = !!desc.enumerable;\n \tdesc.configurable = !!desc.configurable;\n\n \tif ('value' in desc || desc.initializer) {\n \t\tdesc.writable = true;\n \t}\n\n \tdesc = decorators.slice().reverse().reduce(function (desc, decorator) {\n \t\treturn decorator(target, property, desc) || desc;\n \t}, desc);\n\n \tif (context && desc.initializer !== void 0) {\n \t\tdesc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n \t\tdesc.initializer = undefined;\n \t}\n\n \tif (desc.initializer === void 0) {\n \t\tObject['define' + 'Property'](target, property, desc);\n \t\tdesc = null;\n \t}\n\n \treturn desc;\n }\n\n var _require = require('../package.json'),\n     version = _require.version,\n     debugReq = (0, _debug2.default)('fb:req'),\n     debugSig = (0, _debug2.default)('fb:sig'),\n     METHODS = ['get', 'post', 'delete', 'put'],\n     toString = Object.prototype.toString,\n     has = Object.prototype.hasOwnProperty,\n     log = function log(d) {\n \t// todo\n \tconsole.log(d); // eslint-disable-line no-console\n },\n     defaultOptions = (0, _assign2.default)((0, _create2.default)(null), {\n \tPromise: _anyPromise2.default,\n \taccessToken: null,\n \tappId: null,\n \tappSecret: null,\n \tappSecretProof: null,\n \tbeta: false,\n \tversion: 'v2.3',\n \ttimeout: null,\n \tscope: null,\n \tredirectUri: null,\n \tproxy: null,\n \tuserAgent: `thuzi_nodejssdk/${version}`\n }),\n     isValidOption = function isValidOption(key) {\n \treturn has.call(defaultOptions, key);\n },\n     stringifyParams = function stringifyParams(params) {\n \tvar data = {};\n\n \tfor (var key in params) {\n \t\tvar value = params[key];\n \t\tif (value && typeof value !== 'string') {\n \t\t\tvalue = (0, _stringify2.default)(value);\n \t\t}\n \t\tif (value !== undefined) {\n \t\t\tdata[key] = value;\n \t\t}\n \t}\n\n \treturn _querystring2.default.stringify(data);\n },\n     postParamData = function postParamData(params) {\n \tvar data = {},\n \t    isFormData = false;\n\n \tfor (var key in params) {\n \t\tvar value = params[key];\n \t\tif (value && typeof value !== 'string') {\n \t\t\tvar _context;\n\n \t\t\tvar val = typeof value === 'object' && (_context = value, has).call(_context, 'value') && (_context = value, has).call(_context, 'options') ? value.value : value;\n \t\t\tif (Buffer.isBuffer(val)) {\n \t\t\t\tisFormData = true;\n \t\t\t} else if (typeof val.read === 'function' && typeof val.pipe === 'function' && val.readable) {\n \t\t\t\tisFormData = true;\n \t\t\t} else {\n \t\t\t\tvalue = (0, _stringify2.default)(value);\n \t\t\t}\n \t\t}\n \t\tif (value !== undefined) {\n \t\t\tdata[key] = value;\n \t\t}\n \t}\n\n \treturn { [isFormData ? 'formData' : 'form']: data };\n },\n     getAppSecretProof = function getAppSecretProof(accessToken, appSecret) {\n \tvar hmac = _crypto2.default.createHmac('sha256', appSecret);\n \thmac.update(accessToken);\n \treturn hmac.digest('hex');\n },\n     base64UrlDecode = function base64UrlDecode(str) {\n \tvar base64String = str.replace(/\\-/g, '+').replace(/_/g, '/');\n \tvar buffer = new Buffer(base64String, 'base64');\n \treturn buffer.toString('utf8');\n },\n     nodeifyCallback = function nodeifyCallback(originalCallback) {\n \t// normalizes the callback parameters so that the\n \t// first parameter is always error and second is response\n \treturn function (res) {\n \t\tif (!res || res.error) {\n \t\t\toriginalCallback(new _FacebookApiException2.default(res));\n \t\t} else {\n \t\t\toriginalCallback(null, res);\n \t\t}\n \t};\n };\n\n var _opts = (0, _symbol2.default)('opts');\n var graph = (0, _symbol2.default)('graph');\n var oauthRequest = (0, _symbol2.default)('oauthRequest');\n\n var Facebook = (_class = function () {\n \tfunction Facebook(opts, _internalInherit) {\n \t\t(0, _classCallCheck3.default)(this, Facebook);\n\n \t\tif (_internalInherit instanceof Facebook) {\n \t\t\tthis[_opts] = (0, _create2.default)(_internalInherit[_opts]);\n \t\t} else {\n \t\t\tthis[_opts] = (0, _create2.default)(defaultOptions);\n \t\t}\n\n \t\tif (typeof opts === 'object') {\n \t\t\tthis.options(opts);\n \t\t}\n \t}\n\n \t/**\n   *\n   * @access public\n   * @param path {String} the url path\n   * @param method {String} the http method (default: `\"GET\"`)\n   * @param params {Object} the parameters for the query\n   * @param cb {Function} the callback function to handle the response\n   * @return {Promise|undefined}\n   */\n\n\n \t(0, _createClass3.default)(Facebook, [{\n \t\tkey: 'api',\n \t\tvalue: function api() {\n \t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n \t\t\t\targs[_key] = arguments[_key];\n \t\t\t}\n\n \t\t\t//\n \t\t\t// FB.api('/platform', function(response) {\n \t\t\t//  console.log(response.company_overview);\n \t\t\t// });\n \t\t\t//\n \t\t\t// FB.api('/platform/posts', { limit: 3 }, function(response) {\n \t\t\t// });\n \t\t\t//\n \t\t\t// FB.api('/me/feed', 'post', { message: body }, function(response) {\n \t\t\t//  if(!response || response.error) {\n \t\t\t//      console.log('Error occured');\n \t\t\t//  } else {\n \t\t\t//      console.log('Post ID:' + response.id);\n \t\t\t//  }\n \t\t\t// });\n \t\t\t//\n \t\t\t// var postId = '1234567890';\n \t\t\t// FB.api(postId, 'delete', function(response) {\n \t\t\t//  if(!response || response.error) {\n \t\t\t//      console.log('Error occurred');\n \t\t\t//  } else {\n \t\t\t//      console.log('Post was deleted');\n \t\t\t//  }\n \t\t\t// });\n \t\t\t//\n \t\t\t//\n\n \t\t\tvar ret = void 0;\n\n \t\t\tif (args.length > 0 && typeof args[args.length - 1] !== 'function') {\n \t\t\t\tvar _Promise = this.options('Promise');\n \t\t\t\tret = new _Promise(function (resolve, reject) {\n \t\t\t\t\targs.push(function (res) {\n \t\t\t\t\t\tif (!res || res.error) {\n \t\t\t\t\t\t\treject(new _FacebookApiException2.default(res));\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tresolve(res);\n \t\t\t\t\t\t}\n \t\t\t\t\t});\n \t\t\t\t});\n \t\t\t}\n\n \t\t\tthis[graph].apply(this, args);\n\n \t\t\treturn ret;\n \t\t}\n\n \t\t/**\n    *\n    * @access public\n    * @param path {String} the url path\n    * @param method {String} the http method (default: `\"GET\"`)\n    * @param params {Object} the parameters for the query\n    * @param cb {Function} the callback function to handle the error and response\n    */\n \t\t// this method does not exist in fb js sdk\n\n \t}, {\n \t\tkey: 'napi',\n \t\tvalue: function napi() {\n \t\t\tfor (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n \t\t\t\targs[_key2] = arguments[_key2];\n \t\t\t}\n\n \t\t\t//\n \t\t\t// normalizes to node style callback so can use the sdk with async control flow node libraries\n \t\t\t//  first parameters:          error (always type of FacebookApiException)\n \t\t\t//  second callback parameter: response\n \t\t\t//\n \t\t\t// FB.napi('/platform', function(err, response) {\n \t\t\t//  console.log(response.company_overview);\n \t\t\t// });\n \t\t\t//\n \t\t\t// FB.napi('/platform/posts', { limit: 3 }, function(err, response) {\n \t\t\t// });\n \t\t\t//\n \t\t\t// FB.napi('/me/feed', 'post', { message: body }, function(error, response) {\n \t\t\t//  if(error) {\n \t\t\t//      console.log('Error occured');\n \t\t\t//  } else {\n \t\t\t//      console.log('Post ID:' + response.id);\n \t\t\t//  }\n \t\t\t// });\n \t\t\t//\n \t\t\t// var postId = '1234567890';\n \t\t\t// FB.napi(postId, 'delete', function(error, response) {\n \t\t\t//  if(error) {\n \t\t\t//      console.log('Error occurred');\n \t\t\t//  } else {\n \t\t\t//      console.log('Post was deleted');\n \t\t\t//  }\n \t\t\t// });\n \t\t\t//\n \t\t\t//\n\n \t\t\tif (args.length > 0) {\n \t\t\t\tvar originalCallback = args.pop();\n \t\t\t\targs.push(typeof originalCallback === 'function' ? nodeifyCallback(originalCallback) : originalCallback);\n \t\t\t}\n\n \t\t\tthis.api.apply(this, args);\n \t\t}\n\n \t\t/**\n    *\n    * Make a api call to Graph server.\n    *\n    * Except the path, all arguments to this function are optiona. So any of\n    * these are valid:\n    *\n    *  FB.api('/me') // throw away the response\n    *  FB.api('/me', function(r) { console.log(r) })\n    *  FB.api('/me', { fields: 'email' }); // throw away response\n    *  FB.api('/me', { fields: 'email' }, function(r) { console.log(r) });\n    *  FB.api('/123456789', 'delete', function(r) { console.log(r) } );\n    *  FB.api(\n    *      '/me/feed',\n    *      'post',\n    *      { body: 'hi there' },\n    *      function(r) { console.log(r) }\n    *  );\n    *\n    */\n\n \t}, {\n \t\tkey: graph,\n \t\tvalue: function value(path, next) {\n \t\t\tvar method, params, cb;\n\n \t\t\tif (typeof path !== 'string') {\n \t\t\t\tthrow new Error(`Path is of type ${typeof path}, not string`);\n \t\t\t}\n\n \t\t\tfor (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n \t\t\t\targs[_key3 - 2] = arguments[_key3];\n \t\t\t}\n\n \t\t\twhile (next) {\n \t\t\t\tvar type = typeof next;\n \t\t\t\tif (type === 'string' && !method) {\n \t\t\t\t\tmethod = next.toLowerCase();\n \t\t\t\t} else if (type === 'function' && !cb) {\n \t\t\t\t\tcb = next;\n \t\t\t\t} else if (type === 'object' && !params) {\n \t\t\t\t\tparams = next;\n \t\t\t\t} else {\n \t\t\t\t\tlog('Invalid argument passed to FB.api(): ' + next);\n \t\t\t\t\treturn;\n \t\t\t\t}\n \t\t\t\tnext = args.shift();\n \t\t\t}\n\n \t\t\tmethod = method || 'get';\n \t\t\tparams = params || {};\n\n \t\t\t// remove prefix slash if one is given, as it's already in the base url\n \t\t\tif (path[0] === '/') {\n \t\t\t\tpath = path.substr(1);\n \t\t\t}\n\n \t\t\tif (METHODS.indexOf(method) < 0) {\n \t\t\t\tlog('Invalid method passed to FB.api(): ' + method);\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\tthis[oauthRequest](path, method, params, cb);\n \t\t}\n\n \t\t/**\n    * Add the oauth parameter, and fire of a request.\n    *\n    * @access private\n    * @param path {String}     the request path\n    * @param method {String}   the http method\n    * @param params {Object}   the parameters for the query\n    * @param cb {Function}     the callback function to handle the response\n    */\n\n \t}, {\n \t\tkey: oauthRequest,\n \t\tvalue: function value(path, method, params, cb) {\n \t\t\tvar uri, parsedUri, parsedQuery, formOptions, requestOptions, pool;\n\n \t\t\tcb = cb || function () {};\n \t\t\tif (!params.access_token) {\n \t\t\t\tif (this.options('accessToken')) {\n \t\t\t\t\tparams.access_token = this.options('accessToken');\n \t\t\t\t\tif (this.options('appSecret')) {\n \t\t\t\t\t\tparams.appsecret_proof = this.options('appSecretProof');\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else if (!params.appsecret_proof && this.options('appSecret')) {\n \t\t\t\tparams.appsecret_proof = getAppSecretProof(params.access_token, this.options('appSecret'));\n \t\t\t}\n\n \t\t\tif (!/^v\\d+\\.\\d+\\//.test(path)) {\n \t\t\t\tpath = this.options('version') + '/' + path;\n \t\t\t}\n \t\t\turi = `https://graph.${this.options('beta') ? 'beta.' : ''}facebook.com/${path}`;\n\n \t\t\tparsedUri = _url2.default.parse(uri);\n \t\t\tdelete parsedUri.search;\n \t\t\tparsedQuery = _querystring2.default.parse(parsedUri.query);\n\n \t\t\tif (method === 'post') {\n \t\t\t\tif (params.access_token) {\n \t\t\t\t\tparsedQuery.access_token = params.access_token;\n \t\t\t\t\tdelete params.access_token;\n\n \t\t\t\t\tif (params.appsecret_proof) {\n \t\t\t\t\t\tparsedQuery.appsecret_proof = params.appsecret_proof;\n \t\t\t\t\t\tdelete params.appsecret_proof;\n \t\t\t\t\t}\n \t\t\t\t}\n\n \t\t\t\tformOptions = postParamData(params);\n \t\t\t} else {\n \t\t\t\tfor (var key in params) {\n \t\t\t\t\tparsedQuery[key] = params[key];\n \t\t\t\t}\n \t\t\t}\n\n \t\t\tparsedUri.search = stringifyParams(parsedQuery);\n \t\t\turi = _url2.default.format(parsedUri);\n\n \t\t\tpool = { maxSockets: this.options('maxSockets') || Number(process.env.MAX_SOCKETS) || 5 };\n \t\t\trequestOptions = (0, _extends3.default)({\n \t\t\t\tmethod,\n \t\t\t\turi\n \t\t\t}, formOptions, {\n \t\t\t\tpool\n \t\t\t});\n \t\t\tif (this.options('proxy')) {\n \t\t\t\trequestOptions['proxy'] = this.options('proxy');\n \t\t\t}\n \t\t\tif (this.options('timeout')) {\n \t\t\t\trequestOptions['timeout'] = this.options('timeout');\n \t\t\t}\n \t\t\tif (this.options('userAgent')) {\n \t\t\t\trequestOptions['headers'] = {\n \t\t\t\t\t'User-Agent': this.options('userAgent')\n \t\t\t\t};\n \t\t\t}\n\n \t\t\tdebugReq(method.toUpperCase() + ' ' + uri);\n \t\t\t(0, _request2.default)(requestOptions, function (error, response, body) {\n \t\t\t\tif (error !== null) {\n \t\t\t\t\tif (error === Object(error) && has.call(error, 'error')) {\n \t\t\t\t\t\treturn cb(error);\n \t\t\t\t\t}\n \t\t\t\t\treturn cb({ error });\n \t\t\t\t}\n\n \t\t\t\tvar json = void 0;\n \t\t\t\ttry {\n \t\t\t\t\tjson = JSON.parse(body);\n \t\t\t\t} catch (ex) {\n \t\t\t\t\t// sometimes FB is has API errors that return HTML and a message\n \t\t\t\t\t// of \"Sorry, something went wrong\". These are infrequent and unpredictable but\n \t\t\t\t\t// let's not let them blow up our application.\n \t\t\t\t\tjson = {\n \t\t\t\t\t\terror: {\n \t\t\t\t\t\t\tcode: 'JSONPARSE',\n \t\t\t\t\t\t\tError: ex\n \t\t\t\t\t\t}\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tcb(json);\n \t\t\t});\n \t\t}\n\n \t\t/**\n    *\n    * @access public\n    * @param signedRequest {String} the signed request value\n    * @param appSecret {String} the application secret\n    * @return {Object} the parsed signed request or undefined if failed\n    *\n    * throws error if appSecret is not defined\n    *\n    * FB.parseSignedRequest('signedRequest', 'appSecret')\n    * FB.parseSignedRequest('signedRequest') // will use appSecret from options('appSecret')\n    *\n    */\n\n \t}, {\n \t\tkey: 'parseSignedRequest',\n \t\tvalue: function parseSignedRequest(signedRequest) {\n \t\t\tvar _context2;\n\n \t\t\tfor (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n \t\t\t\targs[_key4 - 1] = arguments[_key4];\n \t\t\t}\n\n \t\t\t// this method does not exist in fb js sdk\n \t\t\tvar appSecret = args.shift() || this.options('appSecret'),\n \t\t\t    split,\n \t\t\t    encodedSignature,\n \t\t\t    encodedEnvelope,\n \t\t\t    envelope,\n \t\t\t    hmac,\n \t\t\t    base64Digest,\n \t\t\t    base64UrlDigest;\n\n \t\t\tif (!signedRequest) {\n \t\t\t\tdebugSig('invalid signedRequest');\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\tif (!appSecret) {\n \t\t\t\tthrow new Error('appSecret required');\n \t\t\t}\n\n \t\t\tsplit = signedRequest.split('.');\n\n \t\t\tif (split.length !== 2) {\n \t\t\t\tdebugSig('invalid signedRequest');\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\tvar _split = split;\n\n \t\t\tvar _split2 = (0, _slicedToArray3.default)(_split, 2);\n\n \t\t\tencodedSignature = _split2[0];\n \t\t\tencodedEnvelope = _split2[1];\n\n\n \t\t\tif (!encodedSignature || !encodedEnvelope) {\n \t\t\t\tdebugSig('invalid signedRequest');\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\ttry {\n \t\t\t\tenvelope = JSON.parse(base64UrlDecode(encodedEnvelope));\n \t\t\t} catch (ex) {\n \t\t\t\tdebugSig('encodedEnvelope is not a valid base64 encoded JSON');\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\tif (!(envelope && (_context2 = envelope, has).call(_context2, 'algorithm') && envelope.algorithm.toUpperCase() === 'HMAC-SHA256')) {\n \t\t\t\tdebugSig(envelope.algorithm + ' is not a supported algorithm, must be one of [HMAC-SHA256]');\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\thmac = _crypto2.default.createHmac('sha256', appSecret);\n \t\t\thmac.update(encodedEnvelope);\n \t\t\tbase64Digest = hmac.digest('base64');\n\n \t\t\t// remove Base64 padding\n \t\t\tbase64UrlDigest = base64Digest.replace(/={1,3}$/, '');\n\n \t\t\t// Replace illegal characters\n \t\t\tbase64UrlDigest = base64UrlDigest.replace(/\\+/g, '-').replace(/\\//g, '_');\n\n \t\t\tif (base64UrlDigest !== encodedSignature) {\n \t\t\t\tdebugSig('invalid signature');\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\treturn envelope;\n \t\t}\n\n \t\t/**\n    *\n    * @access public\n    * @param opt {Object} the parameters for appId and scope\n    */\n\n \t}, {\n \t\tkey: 'getLoginUrl',\n \t\tvalue: function getLoginUrl() {\n \t\t\tvar opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n \t\t\t// this method does not exist in fb js sdk\n \t\t\tvar clientId = opt.appId || opt.client_id || this.options('appId'),\n \t\t\t    redirectUri = opt.redirectUri || opt.redirect_uri || this.options('redirectUri') || 'https://www.facebook.com/connect/login_success.html',\n \t\t\t    scope = opt.scope || this.options('scope'),\n \t\t\t    display = opt.display,\n \t\t\t    state = opt.state,\n \t\t\t    scopeQuery = '',\n \t\t\t    displayQuery = '',\n \t\t\t    stateQuery = '';\n\n \t\t\tif (!clientId) {\n \t\t\t\tthrow new Error('client_id required');\n \t\t\t}\n\n \t\t\tif (scope) {\n \t\t\t\tscopeQuery = '&scope=' + encodeURIComponent(scope);\n \t\t\t}\n\n \t\t\tif (display) {\n \t\t\t\tdisplayQuery = '&display=' + display;\n \t\t\t}\n\n \t\t\tif (state) {\n \t\t\t\tstateQuery = '&state=' + state;\n \t\t\t}\n\n \t\t\treturn `https://www.facebook.com/${this.options('version')}/dialog/oauth` + '?response_type=' + (opt.responseType || opt.response_type || 'code') + scopeQuery + displayQuery + stateQuery + '&redirect_uri=' + encodeURIComponent(redirectUri) + '&client_id=' + clientId;\n \t\t}\n \t}, {\n \t\tkey: 'options',\n \t\tvalue: function options(keyOrOptions) {\n \t\t\t// this method does not exist in the fb js sdk\n \t\t\tvar o = this[_opts];\n \t\t\tif (!keyOrOptions) {\n \t\t\t\treturn o;\n \t\t\t}\n \t\t\tif (toString.call(keyOrOptions) === '[object String]') {\n \t\t\t\treturn isValidOption(keyOrOptions) && keyOrOptions in o ? o[keyOrOptions] : null;\n \t\t\t}\n \t\t\tfor (var key in o) {\n \t\t\t\tif (isValidOption(key) && key in o && has.call(keyOrOptions, key)) {\n \t\t\t\t\to[key] = keyOrOptions[key];\n \t\t\t\t\tswitch (key) {\n \t\t\t\t\t\tcase 'appSecret':\n \t\t\t\t\t\tcase 'accessToken':\n \t\t\t\t\t\t\to.appSecretProof = o.appSecret && o.accessToken ? getAppSecretProof(o.accessToken, o.appSecret) : null;\n \t\t\t\t\t\t\tbreak;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t/**\n    * Return a new instance of Facebook with a different set of options\n    * that inherit unset options from the current instance.\n    * @access public\n    * @param {Object} [opts] Options to set\n    */\n\n \t}, {\n \t\tkey: 'extend',\n \t\tvalue: function extend(opts) {\n \t\t\treturn new Facebook(opts, this);\n \t\t}\n \t}, {\n \t\tkey: 'getAccessToken',\n \t\tvalue: function getAccessToken() {\n \t\t\treturn this.options('accessToken');\n \t\t}\n \t}, {\n \t\tkey: 'setAccessToken',\n \t\tvalue: function setAccessToken(accessToken) {\n \t\t\t// this method does not exist in fb js sdk\n \t\t\tthis.options({ accessToken });\n \t\t}\n \t}, {\n \t\tkey: 'withAccessToken',\n \t\tvalue: function withAccessToken(accessToken) {\n \t\t\treturn this.extend({ accessToken });\n \t\t}\n \t}]);\n \treturn Facebook;\n }(), (_applyDecoratedDescriptor(_class.prototype, 'api', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'api'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'napi', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'napi'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'parseSignedRequest', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'parseSignedRequest'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'getLoginUrl', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'getLoginUrl'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'options', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'options'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'extend', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'extend'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'getAccessToken', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'getAccessToken'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'setAccessToken', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'setAccessToken'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'withAccessToken', [_coreDecorators.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'withAccessToken'), _class.prototype)), _class);\n var FB = exports.FB = new Facebook();\n exports.default = FB;\n exports.Facebook = Facebook;\n exports.FacebookApiException = _FacebookApiException2.default;\n exports.version = version;\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_version = module.exports.version;\n_FacebookApiException0 = module.exports.FacebookApiException;\n_Facebook = module.exports.Facebook;\n_FB = module.exports.FB;\n_default = module.exports.default;\n\n}, () => ({\n  'babel-runtime/core-js/object/get-own-property-descriptor': _req,\n  'babel-runtime/helpers/slicedToArray': _req0,\n  'babel-runtime/helpers/extends': _req1,\n  'babel-runtime/helpers/classCallCheck': _req2,\n  'babel-runtime/helpers/createClass': _req3,\n  'babel-runtime/core-js/symbol': _req4,\n  'babel-runtime/core-js/json/stringify': _req5,\n  'babel-runtime/core-js/object/create': _req6,\n  'babel-runtime/core-js/object/assign': _req7,\n  'any-promise': _req8,\n  'core-decorators': _req9,\n  'debug': _req10,\n  'request': _req11,\n  'url': _req12,\n  'querystring': _req13,\n  'crypto': _req14,\n  './FacebookApiException': _req15,\n  '../package.json': _req16,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}