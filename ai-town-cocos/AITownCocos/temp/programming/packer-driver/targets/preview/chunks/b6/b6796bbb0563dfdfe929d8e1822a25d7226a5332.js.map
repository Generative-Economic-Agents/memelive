{"version":3,"sources":["file:///Users/feiwang/cutepet/assets/src/core/components/TKComponents.ts"],"names":["_decorator","Component","Node","Sprite","Color","CCBoolean","tween","Vec3","CCFloat","uiMgr","ccclass","property","TKComponents","type","displayName","tooltip","start","s","onEnable","isplayAni","tweenTarget","node","getChildByName","showAni","isShowShape","spr_bg","getComponent","color","isShapeClose","on","EventType","TOUCH_START","closeHandler","dialogTween","actionType","scale","startScale","to","actionTime","easing","e","evtdata","removeParent","name"],"mappings":"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","sourcesContent":[" \nimport { _decorator, Component, Node,Animation, Sprite, UIOpacity, Color, CCBoolean, tween, Vec4, Vec3, CCFloat } from 'cc';\nimport { EventType } from '../../EventType';\nimport { uiMgr } from '../../game/App';\nconst { ccclass, property } = _decorator;\n\n@ccclass('TKComponents')\nexport class TKComponents extends Component {\n   @property({ type: CCBoolean, displayName: '是否播动效'})\n   /**\n    * 是否播放动画\n    */\n   isplayAni  = true;\n   @property({  })\n   /**\n    * 是否点击背景关闭\n    */\n   isShapeClose  = false;\n   @property({  })\n   /**\n    * 是否有背景遮罩\n    */\n   isShowShape  = false;\n   \n\n   @property({ type: CCFloat, displayName: '弹窗动效', tooltip: '1.缩放;' })\n   public actionType: number = 1;\n\n   @property({ type: CCFloat, displayName: '动效时长', tooltip: '动效时长' })\n   public actionTime: number = 0.3;\n\n   @property({ type: CCFloat, displayName: '初始缩放', tooltip: '初始缩放：弹窗动效为 1 时生效' })\n   public startScale: number = 0.8; \n\n   @property({ type: CCFloat, displayName: '动效对象'})\n   public tweenTarget : Node = null;\n\n   \n   start () {\n       // [3]\n       let s = this;\n       \n   }\n\n   onEnable(){\n       let s = this;\n       if(s.isplayAni){\n           this.tweenTarget = this.tweenTarget ||  s.node.getChildByName(\"container\") as Node;\n          if (!this.tweenTarget) {\n              return;\n          }\n          this.showAni();\n       }\n       if(!s.isShowShape){\n           let spr_bg = s.node.getChildByName(\"spr_bg\") as Node;\n           // spr_bg.color = \"#0C0B0B9F\";?\n           spr_bg.getComponent(Sprite).color = new Color(12,11,11,0);\n           // spr_bg.node.addComponent(UIOpacity);\n           // const opacityComp = spr_bg.getComponent(UIOpacity);\n           // opacityComp.opacity = 0;\n       }else{\n\n       }\n       if(s.isShapeClose){\n           let spr_bg = s.node.getChildByName(\"spr_bg\") ;\n           spr_bg.on(Node.EventType.TOUCH_START,s.closeHandler,s);\n       }\n   }\n\n   showAni() {\n\n       const dialogTween = tween(this.node)\n       \n       switch (this.actionType) {\n           case 1:\n               this.node.scale = new Vec3(this.startScale, this.startScale, this.startScale);\n               dialogTween.to(this.actionTime, {\n                   scale : new Vec3(1, 1, 1)\n               }, {\n                   easing : 'backOut'\n               })\n               break;\n           default:\n               break;\n       }\n\n       dialogTween.start();\n   }\n   /**\n    * close 关闭\n    * @param e \n    */\n   private closeHandler(e,evtdata = null){\n       let s = this;\n       uiMgr.removeParent(s.node.name);\n   }\n}\n\n/**\n* [1] Class member could be defined like this.\n* [2] Use `property` decorator if your want the member to be serializable.\n* [3] Your initialization goes here.\n* [4] Your update function goes here.\n*\n* Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n* Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n* Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n*/"]}