{"version":3,"sources":["file:///Users/feiwang/workSpace/AITown/cutepet/assets/src/manager/UIManager.ts"],"names":["UIManager","director","instantiate","Prefab","resources","showMsg2","Log","TAG","_curPar","_isloadingArr","popToParent","child","par","s","scen","getScene","getChildByName","log","name","includes","strarr","split","length","indexOf","push","load","err","data","ind","splice","n","addChild","error","removeParent","c","destroy","popParentShape","ctrl","layerIdx","isShapeClose","isShowShape","fun","isEff","removeParentShape"],"mappings":"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","sourcesContent":["import { director, instantiate, Node, Prefab, resources, size } from \"cc\";\nimport { showMsg2 } from \"../core/message/MessageManager\";\nimport { LoadingController } from \"../game/components/LoadingController\";\nimport Log from '../../../assets/src/utils/LogUtils'\n\nconst TAG = 'UIManager'\nexport default class UIManager {\n  /**\n   * 当前显示节点;\n   */\n  private _curPar: Node;\n\n  /**\n   *\n   * @param ctrl\n   * @param par\n   * @param isOnResize\n   * @param isEff\n   */\n  public popToParent(\n    child: string,\n    par: Node = null,\n  ): void {\n    let s = this;\n    if(!par){\n        let scen = director.getScene().getChildByName(\"Canvas\");\n        Log.log(TAG,\"uimanager::poptoparent\",scen);\n        par = scen as unknown as Node;\n    }\n    s._curPar = par;\n    let name;\n    if(child.includes(\"/\")){\n        let strarr = child.split(\"/\");\n        name =strarr[strarr.length-1];\n    }else{\n        name = child;\n    }\n    if(s._curPar.getChildByName(name)){\n        Log.log(TAG,\"已经添加child:\"+name);\n        return;\n    }\n    // s._curPar.addChild(child);\n    if(s._isloadingArr.indexOf(name)!=-1){\n        Log.log(TAG,\"正在加载\"+name);\n        return;\n    }else{\n        s._isloadingArr.push(name);\n    }\n    resources.load(child, Prefab, (err:Error,data:Prefab)=>{\n        let ind = s._isloadingArr.indexOf(name);\n        s._isloadingArr.splice(ind,1);\n        if(!err&&data){\n            let n = instantiate(data);\n            if(child.includes(\"/\")){\n                let strarr = child.split(\"/\");\n                n.name =strarr[strarr.length-1];\n            }else{\n                n.name = child;\n            }\n          try {\n              s._curPar.addChild(n);\n              \n          } catch (error) {\n    \n          }\n        }else{\n            Log.log(TAG,\"预制体资源加载失败::\"+err);\n            showMsg2(\"Load resources failed!\");\n        }\n    });\n  }\n  private _isloadingArr = [];\n\n  public removeParent(child: string): void {\n    let s = this;\n    if(!s._curPar){\n        return;\n    }\n    let name;\n    if(child.includes(\"/\")){\n        let strarr = child.split(\"/\");\n        name =strarr[strarr.length-1];\n    }else{\n        name = child;\n    }\n    let c = s._curPar.getChildByName(name);\n    if(c){\n        c.name = \"\";\n        c.destroy();\n    }else{\n        Log.log(TAG,\"不存在弹窗\"+child);\n    }\n  }\n  /**\n   * @param ctrl 显示对象\n   * @param layerIdx 层级\n   * @param isShapeClose 是否点击空白关闭\n   * @param isShowShape 是否有遮罩\n   * @param fun 点击空白关闭后回调\n   * @param isEff:是否缩放动画\n   */\n  public popParentShape(\n    ctrl: Node,\n    layerIdx: Node,\n    isShapeClose: boolean = true,\n    isShowShape: boolean = true,\n    fun?: Function,\n    isEff: boolean = false\n  ): void {}\n  public removeParentShape(ctrl: Node, isEff: boolean = false): void {}\n}\n// const uiMgr:UIManager = new UIManager();\n// export default uiMgr;\n"]}