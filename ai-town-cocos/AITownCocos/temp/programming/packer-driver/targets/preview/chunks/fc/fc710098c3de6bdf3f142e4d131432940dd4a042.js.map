{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/protocol/rest_json.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","url","define","exports","require","module","__filename","__dirname","AWS","util","Rest","Json","JsonBuilder","JsonParser","METHODS_WITHOUT_BODY","unsetContentLength","req","payloadMember","getRequestPayloadShape","undefined","indexOf","httpRequest","method","headers","populateBody","builder","input","service","api","operations","operation","payload","params","payloadShape","members","type","body","build","applyContentTypeHeader","isStreaming","isBinary","buildRequest","extractError","resp","extractData","request","rules","output","parser","hasEventOutput","httpResponse","isEventStream","data","createEventStream","HttpClient","streamsApiVersion","stream","parse","toType","merge","_cjsExports","_buildRequest","_extractError","_extractData","_unsetContentLength"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '../core';\nimport { __cjsMetaURL as _req0} from '../util';\nimport { __cjsMetaURL as _req1} from './rest';\nimport { __cjsMetaURL as _req2} from './json';\nimport { __cjsMetaURL as _req3} from '../json/builder';\nimport { __cjsMetaURL as _req4} from '../json/parser';\nlet _cjsExports;\nlet _buildRequest;\nlet _extractError;\nlet _extractData;\nlet _unsetContentLength;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var AWS = require('../core');\n var util = require('../util');\n var Rest = require('./rest');\n var Json = require('./json');\n var JsonBuilder = require('../json/builder');\n var JsonParser = require('../json/parser');\n\n var METHODS_WITHOUT_BODY = ['GET', 'HEAD', 'DELETE'];\n\n function unsetContentLength(req) {\n   var payloadMember = util.getRequestPayloadShape(req);\n   if (\n     payloadMember === undefined &&\n     METHODS_WITHOUT_BODY.indexOf(req.httpRequest.method) >= 0\n   ) {\n     delete req.httpRequest.headers['Content-Length'];\n   }\n }\n\n function populateBody(req) {\n   var builder = new JsonBuilder();\n   var input = req.service.api.operations[req.operation].input;\n\n   if (input.payload) {\n     var params = {};\n     var payloadShape = input.members[input.payload];\n     params = req.params[input.payload];\n\n     if (payloadShape.type === 'structure') {\n       req.httpRequest.body = builder.build(params || {}, payloadShape);\n       applyContentTypeHeader(req);\n     } else if (params !== undefined) {\n       // non-JSON payload\n       req.httpRequest.body = params;\n       if (payloadShape.type === 'binary' || payloadShape.isStreaming) {\n         applyContentTypeHeader(req, true);\n       }\n     }\n   } else {\n     req.httpRequest.body = builder.build(req.params, input);\n     applyContentTypeHeader(req);\n   }\n }\n\n function applyContentTypeHeader(req, isBinary) {\n   if (!req.httpRequest.headers['Content-Type']) {\n     var type = isBinary ? 'binary/octet-stream' : 'application/json';\n     req.httpRequest.headers['Content-Type'] = type;\n   }\n }\n\n function buildRequest(req) {\n   Rest.buildRequest(req);\n\n   // never send body payload on GET/HEAD/DELETE\n   if (METHODS_WITHOUT_BODY.indexOf(req.httpRequest.method) < 0) {\n     populateBody(req);\n   }\n }\n\n function extractError(resp) {\n   Json.extractError(resp);\n }\n\n function extractData(resp) {\n   Rest.extractData(resp);\n\n   var req = resp.request;\n   var operation = req.service.api.operations[req.operation];\n   var rules = req.service.api.operations[req.operation].output || {};\n   var parser;\n   var hasEventOutput = operation.hasEventOutput;\n\n   if (rules.payload) {\n     var payloadMember = rules.members[rules.payload];\n     var body = resp.httpResponse.body;\n     if (payloadMember.isEventStream) {\n       parser = new JsonParser();\n       resp.data[rules.payload] = util.createEventStream(\n         AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : body,\n         parser,\n         payloadMember\n       );\n     } else if (payloadMember.type === 'structure' || payloadMember.type === 'list') {\n       var parser = new JsonParser();\n       resp.data[rules.payload] = parser.parse(body, payloadMember);\n     } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n       resp.data[rules.payload] = body;\n     } else {\n       resp.data[rules.payload] = payloadMember.toType(body);\n     }\n   } else {\n     var data = resp.data;\n     Json.extractData(resp);\n     resp.data = util.merge(data, resp.data);\n   }\n }\n\n /**\n  * @api private\n  */\n module.exports = {\n   buildRequest: buildRequest,\n   extractError: extractError,\n   extractData: extractData,\n   unsetContentLength: unsetContentLength\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_buildRequest = module.exports.buildRequest;\n_extractError = module.exports.extractError;\n_extractData = module.exports.extractData;\n_unsetContentLength = module.exports.unsetContentLength;\n\n}, () => ({\n  '../core': _req,\n  '../util': _req0,\n  './rest': _req1,\n  './json': _req2,\n  '../json/builder': _req3,\n  '../json/parser': _req4,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}