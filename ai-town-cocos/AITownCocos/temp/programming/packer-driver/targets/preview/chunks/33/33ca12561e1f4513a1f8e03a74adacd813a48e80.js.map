{"version":3,"sources":["file:///Users/feiwang/cutepet/assets/src/module/main/tujian/RenwuListItem.ts"],"names":["_decorator","Button","Component","Label","log","Sprite","modelMgr","observer","WebUtils","EventType","AudioManager","ccclass","property","RenwuListItem","_data","start","node","on","setData","SOCKET_TASK_GET","freshStateHandler","onDestroy","off","data","drop","configModel","getDropConfigById","taskReward","label_content","string","describe","str","itemWeight","rewardnum","split","Number","Sprite_icon0","active","label_jinbinum","sertask","mainModel","getTaskserById","id","status","Button_state","grayscale","getComponent","interactable","getResouceImg","Sprite_icon","buttonClickHandler","instance","playSound","taskgetReq","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,G,OAAAA,G;AAAWC,MAAAA,M,OAAAA,M;;AAC7DC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,Q,iBAAAA,Q;;AAEZC,MAAAA,Q;;AACEC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;+BAGjBa,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACP,MAAD,C,UAERO,QAAQ,CAACP,MAAD,C,UAERO,QAAQ,CAACT,KAAD,C,UAERS,QAAQ,CAACT,KAAD,C,UAERS,QAAQ,CAACP,MAAD,C,2BAVb,MACaQ,aADb,SACmCX,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAWzCY,KAXyC;AAAA;;AAYzCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,IAAL,CAAUC,EAAV,CAAa,SAAb,EAAwB,KAAKC,OAA7B,EAAsC,IAAtC,EADI,CAEJ;;AACA;AAAA;AAAA,oCAASD,EAAT,CAAY;AAAA;AAAA,sCAAUE,eAAtB,EAAuC,KAAKC,iBAA5C,EAA+D,IAA/D;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxB;AAAA;AAAA,oCAASC,GAAT,CAAa;AAAA;AAAA,sCAAUH,eAAvB,EAAwC,KAAKC,iBAA7C,EAAgE,IAAhE;AACA,eAAKJ,IAAL,CAAUM,GAAV,CAAc,SAAd,EAAyB,KAAKJ,OAA9B,EAAuC,IAAvC;AAEH;AAGD;AACJ;AACA;;;AACWA,QAAAA,OAAO,CAACK,IAAD,EAAY;AACtB,eAAKT,KAAL,GAAaS,IAAb;;AACA,cAAI,KAAKT,KAAT,EAAgB;AACZ,gBAAIU,IAAI,GAAG;AAAA;AAAA,sCAASC,WAAT,CAAqBC,iBAArB,CAAuC,KAAKZ,KAAL,CAAWa,UAAlD,CAAX;AACA,iBAAKC,aAAL,CAAmBC,MAAnB,GAA4BN,IAAI,CAACO,QAAjC;AACA,gBAAIC,GAAG,GAAGP,IAAI,CAACQ,UAAL,CAAgB,CAAhB,CAAV;AACA,gBAAIC,SAAS,GAAGF,GAAG,CAACG,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAhB;;AACA,gBAAIC,MAAM,CAACF,SAAD,CAAN,IAAqB,GAAzB,EAA8B;AAC1B,mBAAKG,YAAL,CAAkBpB,IAAlB,CAAuBqB,MAAvB,GAAgC,IAAhC;AACH,aAFD,MAEO;AACH,mBAAKD,YAAL,CAAkBpB,IAAlB,CAAuBqB,MAAvB,GAAgC,KAAhC;AACH;;AACD,iBAAKC,cAAL,CAAoBT,MAApB,GAA6BI,SAA7B;AACA,iBAAKb,iBAAL;AACH;AACJ;;AAEOA,QAAAA,iBAAiB,GAAG;AACxB,cAAI,KAAKN,KAAT,EAAgB;AACZ,gBAAIyB,OAAO,GAAG;AAAA;AAAA,sCAASC,SAAT,CAAmBC,cAAnB,CAAkC,KAAK3B,KAAL,CAAW4B,EAA7C,CAAd;;AACA,gBAAI,CAACH,OAAL,EAAc;AACVnC,cAAAA,GAAG,CAAC,kBAAkB,KAAKU,KAAL,CAAW4B,EAA9B,CAAH;AACA;AACH;;AACD,gBAAIH,OAAO,CAACI,MAAR,IAAkB,CAAlB,IAAuBJ,OAAO,CAACI,MAAR,IAAkB,CAA7C,EAAgD;AAC5C,mBAAKC,YAAL,CAAkBC,SAAlB,GAA8B,IAA9B;AACA,mBAAKD,YAAL,CAAkB5B,IAAlB,CAAuB8B,YAAvB,CAAoC7C,MAApC,EAA4C8C,YAA5C,GAA2D,KAA3D;AACA;AAAA;AAAA,wCAASC,aAAT,CAAuB,mBAAvB,EAA4C,KAAKJ,YAAL,CAAkB5B,IAA9D;AAEH,aALD,MAKO,IAAIuB,OAAO,CAACI,MAAR,IAAkB,CAAtB,EAAyB;AAC5B,mBAAKC,YAAL,CAAkBC,SAAlB,GAA8B,KAA9B;AACA,mBAAKD,YAAL,CAAkB5B,IAAlB,CAAuB8B,YAAvB,CAAoC7C,MAApC,EAA4C8C,YAA5C,GAA2D,IAA3D;AACA;AAAA;AAAA,wCAASC,aAAT,CAAuB,mBAAvB,EAA4C,KAAKJ,YAAL,CAAkB5B,IAA9D;AACH,aAJM,MAIA,IAAIuB,OAAO,CAACI,MAAR,IAAkB,CAAtB,EAAyB;AAC5B,mBAAKC,YAAL,CAAkBC,SAAlB,GAA8B,IAA9B;AACA,mBAAKD,YAAL,CAAkB5B,IAAlB,CAAuB8B,YAAvB,CAAoC7C,MAApC,EAA4C8C,YAA5C,GAA2D,KAA3D;AACA;AAAA;AAAA,wCAASC,aAAT,CAAuB,kBAAvB,EAA2C,KAAKJ,YAAL,CAAkB5B,IAA7D;AACH;;AAED,oBAAQ,KAAKF,KAAL,CAAW4B,EAAnB;AACI,mBAAK,KAAL;AACA,mBAAK,KAAL;AACA,mBAAK,KAAL;AACI;AAAA;AAAA,0CAASM,aAAT,CAAuB,mBAAvB,EAA4C,KAAKC,WAAL,CAAiBjC,IAA7D;AACA,qBAAKsB,cAAL,CAAoBtB,IAApB,CAAyBqB,MAAzB,GAAkC,KAAlC;AACA;;AACJ;AACI;AAAA;AAAA,0CAASW,aAAT,CAAuB,eAAvB,EAAwC,KAAKC,WAAL,CAAiBjC,IAAzD;AACA,qBAAKsB,cAAL,CAAoBtB,IAApB,CAAyBqB,MAAzB,GAAkC,IAAlC;AACA;AAVR;AAYH;AAGJ;;AACMa,QAAAA,kBAAkB,GAAG;AACxB;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,SAAtB,CAAgC,eAAhC;AACA;AAAA;AAAA,oCAASZ,SAAT,CAAmBa,UAAnB,CAA8B,KAAKvC,KAAL,CAAW4B,EAAzC;AACH;;AAEDY,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAzFwC,O;;;;;iBAEZ,I;;;;;;;iBAEC,I;;;;;;;iBAEA,I;;;;;;;iBAEC,I;;;;;;;iBAED,I","sourcesContent":["import { _decorator, Button, Component, EventTouch, Label, log, Node, Sprite } from 'cc';\nimport { modelMgr, observer } from '../../../game/App';\nimport BoswerUtils from '../../../utils/BoswerUtils';\nimport WebUtils from '../../../utils/WebUtils';\nimport { EventType } from '../../../EventType';\nimport { AudioManager } from '../../../manager/AudioManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RenwuListItem')\nexport class RenwuListItem extends Component {\n    @property(Sprite)\n    public Sprite_icon: Sprite = null;\n    @property(Sprite)\n    public Sprite_icon0: Sprite = null;\n    @property(Label)\n    public label_content: Label = null;\n    @property(Label)\n    public label_jinbinum: Label = null;\n    @property(Sprite)\n    public Button_state: Sprite = null;\n    _data: any;\n    start() {\n        this.node.on(\"setdata\", this.setData, this);\n        // this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\n        observer.on(EventType.SOCKET_TASK_GET, this.freshStateHandler, this);\n    }\n    protected onDestroy(): void {\n        observer.off(EventType.SOCKET_TASK_GET, this.freshStateHandler, this);\n        this.node.off(\"setdata\", this.setData, this);\n\n    }\n\n\n    /**\n     * 更新数据\n     */\n    public setData(data: any) {\n        this._data = data;\n        if (this._data) {\n            let drop = modelMgr.configModel.getDropConfigById(this._data.taskReward);\n            this.label_content.string = data.describe;\n            let str = drop.itemWeight[0];\n            let rewardnum = str.split(\"|\")[1];\n            if (Number(rewardnum) >= 100) {\n                this.Sprite_icon0.node.active = true;\n            } else {\n                this.Sprite_icon0.node.active = false;\n            }\n            this.label_jinbinum.string = rewardnum;\n            this.freshStateHandler();\n        }\n    }\n\n    private freshStateHandler() {\n        if (this._data) {\n            let sertask = modelMgr.mainModel.getTaskserById(this._data.id);\n            if (!sertask) {\n                log(\"sertask null：\" + this._data.id);\n                return;\n            }\n            if (sertask.status == 0 || sertask.status == 1) {\n                this.Button_state.grayscale = true;\n                this.Button_state.node.getComponent(Button).interactable = false;\n                WebUtils.getResouceImg(\"tujian/tujian2_12\", this.Button_state.node);\n\n            } else if (sertask.status == 2) {\n                this.Button_state.grayscale = false;\n                this.Button_state.node.getComponent(Button).interactable = true;\n                WebUtils.getResouceImg(\"tujian/tujian2_12\", this.Button_state.node);\n            } else if (sertask.status == 3) {\n                this.Button_state.grayscale = true;\n                this.Button_state.node.getComponent(Button).interactable = false;\n                WebUtils.getResouceImg(\"tujian/tujian2_1\", this.Button_state.node);\n            }\n\n            switch (this._data.id) {\n                case 10003:\n                case 10005:\n                case 30001:\n                    WebUtils.getResouceImg(\"tujian/tujian2_13\", this.Sprite_icon.node);\n                    this.label_jinbinum.node.active = false;\n                    break;\n                default:\n                    WebUtils.getResouceImg(\"tujian/maobi2\", this.Sprite_icon.node);\n                    this.label_jinbinum.node.active = true;\n                    break;\n            }\n        }\n\n\n    }\n    public buttonClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        modelMgr.mainModel.taskgetReq(this._data.id);\n    };\n\n    update(deltaTime: number) {\n\n    }\n}\n\n\n"]}