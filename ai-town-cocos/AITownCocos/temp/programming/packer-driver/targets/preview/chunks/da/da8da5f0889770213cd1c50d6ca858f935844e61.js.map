{"version":3,"sources":["file:///Users/feiwang/cutepet/assets/src/module/main/letterview/LetterViewComponent.ts"],"names":["_decorator","Animation","Component","EditBox","Label","Node","randomRangeInt","sp","Vec3","modelMgr","observer","socket","uiMgr","GlobalConfig","network","EventType","WebUtils","showMsgWithMask","CatSpineMap","namePool","occupationPool","loadRemoteSpineRes","AudioManager","ccclass","property","LetterViewComponent","Skeleton","currentName","currentOccupation","catId","_selDa","_catid","_curSelect","start","edit1Txt1","setPosition","edit1Txt2","edit2Txt1","edit2Txt2","secondNode","active","refuseview","acceptview","givenametview","firstNode","on","SOCKET_ONMESSAGE","hasSelect","length","onEnable","onDestroy","off","gotoSecondClickHandler","instance","playSound","refuseLetterClickHandler","btn_refuse_backClickHandler","acceptLetterClickHandler","acceptOkClickHandler","da","SelectCatRequst","data","sendWebSocketBinary","mainModel","firstIn","haSelect","command","code","cat","id","LoginData","player","configModel","getCatDataById","json","changeCatInfoRequest","name","userName","career","Label_name","string","mbti","Label_type","String","iq","toLowerCase","Sprite_catpic","getResouceImg","atlas","img","catSke","setAnimation","submitName","nameEditBox","txtNameLabel","node","nameBg","occupationEditBox","nameOkBtn","occupationOkBtn","submitOccupation","txtOccupationLabel","getParent","submitBtn","getRandomName","getRandomOccupation","gomainviewClickHandler","removeParent","post","playEggSelectHandler","evt","ind","index","egg","getChildByName","getComponent","play","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Animation, Component, director, EditBox, Label, Node, randomRangeInt, sp, Sprite, Vec3 } from 'cc';\nimport { mduManger, modelMgr, observer, socket, uiMgr } from '../../../game/App';\nimport { ModuleID } from '../../../game/config/ModuleID';\nimport { GlobalConfig } from '../../../game/config/GlobalConfig';\nimport { network } from '../../../model/RequestData';\nimport { EventType } from '../../../EventType';\nimport WebUtils from '../../../utils/WebUtils';\nimport { showMsgWithMask } from '../../../core/message/MaskToastManager';\nimport { catServerD } from '../../../game/config/DataStruct';\nimport { CatSpineMap, namePool, occupationPool, ToySpineMap } from '../../../model/StaticTextConfig';\nimport { loadRemoteSpineRes } from '../../../utils/loadSpineData';\nimport { AudioManager } from '../../../manager/AudioManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('LetterViewComponent')\nexport class LetterViewComponent extends Component {\n    @property(Node)\n    public firstNode: Node = null;\n\n    @property(Node)\n    public secondNode: Node = null;\n    @property(Node)\n    public Sprite_catpic: Node = null;\n    @property(Node)\n    public refuseview: Node = null;\n    @property(Node)\n    public acceptview: Node = null;\n    @property(Node)\n    public givenametview: Node = null;\n    @property(Label)\n    public Label_name: Label = null;\n    @property(Label)\n    public Label_type: Label = null;\n\n    @property(Node)\n    public submitBtn: Node = null;\n    @property(Node)\n    public nameOkBtn: Node = null;\n    @property(Node)\n    public occupationOkBtn: Node = null;\n\n    @property(EditBox)\n    public nameEditBox: EditBox = null;\n    @property(Node)\n    public nameBg: Node = null;\n\n    @property(EditBox)\n    public occupationEditBox: EditBox = null;\n    @property(Node)\n    public occupationBg: Node = null;\n\n    @property(Label)\n    public txtNameLabel: Label = null;\n\n    @property(Label)\n    public txtOccupationLabel: Label = null;\n\n\t@property(sp.Skeleton) \n    public catSke: sp.Skeleton = null;\n\n    @property(Node)\n    public edit1Txt1: Node = null;\n    @property(Node)\n    public edit1Txt2: Node = null;\n\n    @property(Node)\n    public edit2Txt1: Node = null;\n    @property(Node)\n    public edit2Txt2: Node = null;\n\n    currentName: string = '';\n    currentOccupation: string = '';\n    catId: number = 0;\n\n    // @property(Node)\n    // public inputnametview: Node = null;\n    start() {\n        this.edit1Txt1.setPosition(0,0)\n        this.edit1Txt2.setPosition(0,0)\n        this.edit2Txt1.setPosition(0,0)\n        this.edit2Txt2.setPosition(0,0)\n        this.secondNode.active = this.refuseview.active = this.acceptview.active = this.givenametview.active = false;\n        \n        this.firstNode.active = true;\n        observer.on(EventType.SOCKET_ONMESSAGE, this.hasSelect, this);\n        this.currentOccupation = occupationPool[randomRangeInt(0, occupationPool.length)]\n        // this.acceptview.active = true;\n    }\n    onEnable() {\n\n    }\n    protected onDestroy(): void {\n        observer.off(EventType.SOCKET_ONMESSAGE, this.hasSelect, this);\n    }\n    /**\n     * \n     */\n    public gotoSecondClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.firstNode.active = false;\n        this.secondNode.active = true;\n    }\n\n    public refuseLetterClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.secondNode.active = false;\n        this.refuseview.active = true;\n    }\n\n    public btn_refuse_backClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.secondNode.active = true;\n        this.refuseview.active = false;\n    }\n\n\n    public acceptLetterClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.secondNode.active = false;\n        this.acceptview.active = true;\n    }\n\n\n    /**\n     * 确定猫咪\n     */\n    public acceptOkClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        if (this._curSelect != 0) {\n            let da = new network.SelectCatRequst();\n            da.data.catId = this._curSelect;\n            socket.sendWebSocketBinary(da);\n            modelMgr.mainModel.firstIn = true\n        }\n    }\n\n    private _selDa: network.SelectCatResponse;\n    private hasSelect(da: any) {\n        let data: network.SelectCatResponse = da.data;\n        GlobalConfig.instance.haSelect = true;\n        if (data && data.command == 10007 && data.code == 0) {\n            this._selDa = data;\n            this.catId = data.data.cat.id\n            GlobalConfig.instance.LoginData.data.player.catId = this._curSelect;//前端填充；\n            this.acceptview.active = false;\n            this.givenametview.active = true;\n            AudioManager.instance.playSound(\"new_getCat\");\n            let cat = modelMgr.configModel.getCatDataById(this._curSelect);\n            if (cat) {\n\n                let json = new network.changeCatInfoRequest();\n                json.data.catId = cat.id;\n                json.data.name = cat.name;\n                json.data.userName = 'Human';\n                json.data.career = this.currentOccupation;\n                socket.sendWebSocketBinary(json);\n\n                this.Label_name.string = `${cat.mbti}`;\n                // this.Label_type.string = cat.mbti;\n                this.Label_type.string = `${String(data.data.cat.iq)}`;\n\n                let mbti = cat.mbti.toLowerCase();\n                if(mbti==\"entj\"){\n                    this.Sprite_catpic.setPosition(new Vec3(0,59));\n                }else if(mbti==\"istp\"){\n                    this.Sprite_catpic.setPosition(new Vec3(0,128));\n                }\n                WebUtils.getResouceImg(`letter/${mbti}_sel`, this.Sprite_catpic);\n                if(CatSpineMap[this.catId]?.json){\n                    loadRemoteSpineRes(CatSpineMap[this.catId].atlas, CatSpineMap[this.catId].json, CatSpineMap[this.catId].img, this.catSke, null, () => {\n                        this.catSke.setAnimation(0 ,'idle', true)\n                        this.Sprite_catpic.active = false\n                    })\n                }\n\n            }\n        }\n    }\n\n    submitName(){\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        if(!this.nameEditBox.string.length){\n            showMsgWithMask(\"please enter name\")\n            return\n        }\n        this.currentName = this.nameEditBox.string \n        this.txtNameLabel.string = this.currentName\n        this.nameEditBox.node.active = false\n        this.nameBg.active = true\n\n        this.occupationEditBox.node.active = true\n        this.nameOkBtn.active = false\n        this.occupationOkBtn.active = true\n        this.edit2Txt1.setPosition(0,0)\n        this.edit2Txt2.setPosition(0,0)\n    }\n\n    submitOccupation(){\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        if(!this.occupationEditBox.string.length){\n            showMsgWithMask(\"please enter occupation\")\n            return\n        }\n        this.currentOccupation = this.occupationEditBox.string \n        this.txtOccupationLabel.string = this.currentOccupation\n        this.occupationEditBox.node.active = false\n        this.txtOccupationLabel.node.getParent().active = true\n        this.occupationOkBtn.active = false\n        this.submitBtn.active = true\n    }\n\n    getRandomName(){\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.nameEditBox.string = namePool[randomRangeInt(0, namePool.length)]\n    }\n\n    getRandomOccupation(){\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.occupationEditBox.string = occupationPool[randomRangeInt(0, occupationPool.length)]\n    }\n\n\n\n    public gomainviewClickHandler() {\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        //修改猫的信息\n        let json = new network.changeCatInfoRequest();\n        json.data.catId = this._selDa.data.cat.id;\n        json.data.name = this.currentName;\n        json.data.userName = 'Human';\n        json.data.career = this.currentOccupation;\n        socket.sendWebSocketBinary(json);\n        this.givenametview.active = false;\n        uiMgr.removeParent(\"prefabs/pre_letterview\");\n        observer.post(\"hideselbg\");\n    }\n\n    private _catid = [100004, 100015, 100008];\n    private _curSelect = 0;\n    public playEggSelectHandler(evt, ind) {\n        AudioManager.instance.playSound(\"new_eggBreak\");\n        for (let index = 0; index <= 2; index++) {\n            let egg = this.acceptview.getChildByName(\"egg\" + (index + 1));\n            if (ind == (index + 1)) {\n                this._curSelect = this._catid[index];\n                egg.getComponent(Animation).play(\"eggdoudong\");\n            } else {\n                egg.getComponent(Animation).play(\"eggdoudong2\");\n            }\n\n        }\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n\n"]}