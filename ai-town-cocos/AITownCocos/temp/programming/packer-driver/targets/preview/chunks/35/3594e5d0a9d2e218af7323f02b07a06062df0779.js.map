{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/request/lib/getProxyFromURI.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","formatHostname","hostname","replace","toLowerCase","parseNoProxyZone","zone","trim","zoneParts","split","zoneHost","zonePort","hasPort","indexOf","port","uriInNoProxy","uri","noProxy","protocol","noProxyList","map","some","noProxyZone","isMatchedAt","hostnameMatched","length","getProxyFromURI","process","env","NO_PROXY","no_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n 'use strict'\n\n function formatHostname (hostname) {\n   // canonicalize the hostname, so that 'oogle.com' won't match 'google.com'\n   return hostname.replace(/^\\.*/, '.').toLowerCase()\n }\n\n function parseNoProxyZone (zone) {\n   zone = zone.trim().toLowerCase()\n\n   var zoneParts = zone.split(':', 2)\n   var zoneHost = formatHostname(zoneParts[0])\n   var zonePort = zoneParts[1]\n   var hasPort = zone.indexOf(':') > -1\n\n   return {hostname: zoneHost, port: zonePort, hasPort: hasPort}\n }\n\n function uriInNoProxy (uri, noProxy) {\n   var port = uri.port || (uri.protocol === 'https:' ? '443' : '80')\n   var hostname = formatHostname(uri.hostname)\n   var noProxyList = noProxy.split(',')\n\n   // iterate through the noProxyList until it finds a match.\n   return noProxyList.map(parseNoProxyZone).some(function (noProxyZone) {\n     var isMatchedAt = hostname.indexOf(noProxyZone.hostname)\n     var hostnameMatched = (\n       isMatchedAt > -1 &&\n         (isMatchedAt === hostname.length - noProxyZone.hostname.length)\n     )\n\n     if (noProxyZone.hasPort) {\n       return (port === noProxyZone.port) && hostnameMatched\n     }\n\n     return hostnameMatched\n   })\n }\n\n function getProxyFromURI (uri) {\n   // Decide the proper request proxy to use based on the request URI object and the\n   // environmental variables (NO_PROXY, HTTP_PROXY, etc.)\n   // respect NO_PROXY environment variables (see: https://lynx.invisible-island.net/lynx2.8.7/breakout/lynx_help/keystrokes/environments.html)\n\n   var noProxy = process.env.NO_PROXY || process.env.no_proxy || ''\n\n   // if the noProxy is a wildcard then return null\n\n   if (noProxy === '*') {\n     return null\n   }\n\n   // if the noProxy is not empty and the uri is found return null\n\n   if (noProxy !== '' && uriInNoProxy(uri, noProxy)) {\n     return null\n   }\n\n   // Check for HTTP or HTTPS Proxy in environment Else default to null\n\n   if (uri.protocol === 'http:') {\n     return process.env.HTTP_PROXY ||\n       process.env.http_proxy || null\n   }\n\n   if (uri.protocol === 'https:') {\n     return process.env.HTTPS_PROXY ||\n       process.env.https_proxy ||\n       process.env.HTTP_PROXY ||\n       process.env.http_proxy || null\n   }\n\n   // if none of that works, return null\n   // (What uri protocol are you using then?)\n\n   return null\n }\n\n module.exports = getProxyFromURI\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}