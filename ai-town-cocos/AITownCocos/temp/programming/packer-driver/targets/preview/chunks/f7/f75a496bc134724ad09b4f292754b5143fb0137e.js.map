{"version":3,"sources":["file:///Users/feiwang/AITown/AITownCocos/assets/src/game/components/LoadingController.ts"],"names":["_decorator","Component","director","Label","modelMgr","ccclass","property","LoadingController","_templetDic","time","start","update","deltaTime","ins","self","_ins","showLoading","timeoutCall","scene","getScene","getChildByName","loadingnode","txt","getComponent","string","configModel","getStrById","setSiblingIndex","active","clearTimeout","setTimeout","hideLoading"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,K,OAAAA,K;;AACvCC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;mCAGjBO,iB,WADZF,OAAO,CAAC,mBAAD,C,2BAAR,MACaE,iBADb,SACuCN,SADvC,CACiD;AAAA;AAAA;AAAA,eAUrCO,WAVqC;AAAA,eAWrCC,IAXqC;AAAA;;AAC7CC,QAAAA,KAAK,GAAG;AACJ,eAAKF,WAAL,GAAmB,EAAnB;AACH;;AAEDG,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAMoB,mBAAHC,GAAG,GAAsB;AACvC,cAAIC,IAAI,GAAG,IAAX;;AACA,cAAIA,IAAI,CAACC,IAAL,IAAa,IAAjB,EAAuB;AACnBD,YAAAA,IAAI,CAACC,IAAL,GAAY,IAAIR,iBAAJ,EAAZ;AACH;;AACD,iBAAOO,IAAI,CAACC,IAAZ;AACH;;AAGDC,QAAAA,WAAW,CAACC,WAAD,EAAqB;AAAA,cAApBA,WAAoB;AAApBA,YAAAA,WAAoB,GAAN,IAAM;AAAA;;AAC5B,cAAIC,KAAK,GAAGhB,QAAQ,CAACiB,QAAT,GAAoBC,cAApB,CAAmC,QAAnC,CAAZ;;AACA,cAAIF,KAAK,IAAIA,KAAK,CAACE,cAAN,CAAqB,aAArB,CAAb,EAAkD;AAC9C,gBAAIC,WAAW,GAAGH,KAAK,CAACE,cAAN,CAAqB,aAArB,CAAlB;AACA,gBAAIE,GAAG,GAAGD,WAAW,CAACD,cAAZ,CAA2B,OAA3B,CAAV;;AACA,gBAAIE,GAAJ,EAAS;AACLA,cAAAA,GAAG,CAACC,YAAJ,CAAiBpB,KAAjB,EAAwBqB,MAAxB,GAAiC;AAAA;AAAA,wCAASC,WAAT,CAAqBC,UAArB,CAAgC,KAAhC,CAAjC;AACH;;AACDL,YAAAA,WAAW,CAACM,eAAZ,CAA4B,GAA5B;AAEAT,YAAAA,KAAK,CAACE,cAAN,CAAqB,aAArB,EAAoCQ,MAApC,GAA6C,IAA7C;AACAC,YAAAA,YAAY,CAAC,KAAKpB,IAAN,CAAZ;AACA,iBAAKA,IAAL,GAAYqB,UAAU,CAAC,MAAM;AACzBb,cAAAA,WAAW,IAAIA,WAAW,EAA1B;AACA,mBAAKc,WAAL;AACH,aAHqB,EAGnB,KAHmB,CAAtB;AAIH;AACJ;;AAEDA,QAAAA,WAAW,GAAG;AACV,cAAIb,KAAK,GAAGhB,QAAQ,CAACiB,QAAT,GAAoBC,cAApB,CAAmC,QAAnC,CAAZ;;AACA,cAAIF,KAAK,IAAIA,KAAK,CAACE,cAAN,CAAqB,aAArB,CAAb,EAAkD;AAC9CF,YAAAA,KAAK,CAACE,cAAN,CAAqB,aAArB,EAAoCQ,MAApC,GAA6C,KAA7C;AACAC,YAAAA,YAAY,CAAC,KAAKpB,IAAN,CAAZ;AACH;AACJ;;AA/C4C,O,UAStCM,I","sourcesContent":["import { _decorator, Component, Node, director, Label } from 'cc';\nimport { modelMgr } from '../App';\nconst { ccclass, property } = _decorator;\n\n@ccclass('LoadingController')\nexport class LoadingController extends Component {\n    start() {\n        this._templetDic = {};\n    }\n\n    update(deltaTime: number) {\n\n    }\n\n    static _ins: LoadingController;\n    private _templetDic: object;\n    private time ;\n\n    public static get ins(): LoadingController {\n        let self = this;\n        if (self._ins == null) {\n            self._ins = new LoadingController();\n        }\n        return self._ins;\n    }\n\n\n    showLoading(timeoutCall = null) {\n        let scene = director.getScene().getChildByName(\"Canvas\");\n        if (scene && scene.getChildByName('loadingNode')) {\n            let loadingnode = scene.getChildByName('loadingNode');\n            let txt = loadingnode.getChildByName(\"Label\");\n            if (txt) {\n                txt.getComponent(Label).string = modelMgr.configModel.getStrById(10015);\n            }\n            loadingnode.setSiblingIndex(999);\n\n            scene.getChildByName('loadingNode').active = true;\n            clearTimeout(this.time);\n            this.time = setTimeout(() => {\n                timeoutCall && timeoutCall();\n                this.hideLoading();\n            }, 10000);\n        }\n    }\n\n    hideLoading() {\n        let scene = director.getScene().getChildByName(\"Canvas\");\n        if (scene && scene.getChildByName('loadingNode')) {\n            scene.getChildByName('loadingNode').active = false;\n            clearTimeout(this.time);\n        }\n    }\n}\n\n"]}