{"version":3,"sources":["file:///Users/feiwang/AITown/AITownCocos/assets/src/module/main/NewGuideComponent.ts"],"names":["_decorator","Component","Node","GuideIndex","modelMgr","observer","EventType","GlobalConfig","AudioManager","ccclass","property","NewGuideComponent","type","String","Number","GuideDataInfo","start","on","eventName","showFirstGuide","guideInfo","instance","LoginData","data","player","guide","find","element","START_GUIDE_STATE1","end","post","UPDATE_GUIDE_INFO_MAIN_VIEW","guideNode","active","guideItemArr","itemGuideClick","button","playSound","mainModel","yindaoReq","adapt","push","checkInBtn","onDestroy","off","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { GuideIndex } from '../../model/StaticTextConfig';\nimport { modelMgr, observer } from '../../game/App';\nimport { EventType } from '../../EventType';\nimport { GlobalConfig } from '../../game/config/GlobalConfig';\nimport { AudioManager } from '../../manager/AudioManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('NewGuideComponent')\nexport class NewGuideComponent extends Component {\n    //连续引导页面\n    @property({type:[Node]})\n    public guideItemArr:Node[] = [];\n\n    @property(String)\n    public eventName: string = ''\n\n    @property(Number)\n    public adapt: Number = 0\n\n    @property(Node)\n    public guideNode: Node = null\n\n    @property(Node)\n    public checkInBtn: Node = null\n\n    GuideDataInfo: any;\n\n    start() {\n        observer.on(this.eventName, this.showFirstGuide, this);\n        const guideInfo = GlobalConfig.instance.LoginData.data.player.guide\n        if(!guideInfo?.find?.(element => element === GuideIndex.START_GUIDE_STATE1.end)){\n            //触发第1阶段引导\n            observer.post(EventType.UPDATE_GUIDE_INFO_MAIN_VIEW, GuideIndex.START_GUIDE_STATE1)\n        }\n\n    }\n\n    showFirstGuide(data: any){\n        this.guideNode.active = true\n        this.GuideDataInfo = data.data\n        this.guideItemArr[this.GuideDataInfo.start - 1].active = true\n    }\n\n    itemGuideClick(button, data){\n        AudioManager.instance.playSound(\"new_NormanBtn\");\n        this.guideItemArr[Number(data) - 1].active = false\n        modelMgr.mainModel.yindaoReq(Number(data) + Number(this.adapt));\n        if(GlobalConfig.instance.LoginData.data.player.guide){\n            GlobalConfig.instance.LoginData.data.player.guide.push(Number(data) + Number(this.adapt))\n        }else{\n            GlobalConfig.instance.LoginData.data.player.guide = [(Number(data) + Number(this.adapt))]\n        }\n        \n        if(Number(data) === 9 && this.checkInBtn.active === false){\n            modelMgr.mainModel.yindaoReq(11);\n            GlobalConfig.instance.LoginData.data.player.guide.push(11)\n        }else{\n            if(Number(data) === this.GuideDataInfo.end){\n                this.guideNode.active = false\n                return\n    \n            }\n            this.guideItemArr[Number(data)].active = true\n        }\n\n\n    }\n\n    public onDestroy() {\n        observer.off(this.eventName, this.showFirstGuide, this);\n      }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n"]}