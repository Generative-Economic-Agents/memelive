{"version":3,"sources":["file:///Users/feiwang/workSpace/AITown/cutepet/assets/src/game/components/PageViewCtrl.ts"],"names":["_decorator","Component","Label","PageView","Node","Vec3","instantiate","ccclass","property","menu","PageViewCtrl","type","Direction","_createPage","page","pageTeample","name","curNum","setPosition","onLoad","target","setCurrentPageIndex","update","extra","direction","Vertical","label","string","getCurrentPageIndex","onJumpHome","scrollToPage","plusPage","callback","curTotal","lessPageNum","onAddPage","createpage","addPage","onInsertPage","insertPage","onRemovePage","pages","getPages","removePage","length","onRemovePageAtIndex","removePageAtIndex","onRemoveAllPage","removeAllPages","onPageEvent","sender","eventType","console","log","Horizontal"],"mappings":"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","sourcesContent":["import { _decorator, Component, Prefab, Label, PageView, Color, Node, Vec3, Sprite, instantiate  } from \"cc\";\nconst { ccclass, property, menu } = _decorator;\n\n\n@ccclass(\"PageViewCtrl\")\n@menu('UI/PageViewCtrl')\nexport class PageViewCtrl extends Component {\n    public static Direction = PageView.Direction;\n    @property\n    public curNum = 3;\n    @property\n    public curTotal = 10;\n    @property(Node)\n    public pageTeample:Node = null!;\n    @property(PageView)\n    public target: PageView  = null!;\n    @property(Label)\n    public label: Label | null = null;\n    @property({\n        type:PageView.Direction,\n    })\n    public direction = PageView.Direction.Horizontal;\n\n    _createPage() {\n        const page = instantiate(this.pageTeample) as Node;\n        page.name = `page_${this.curNum}`;\n        page.setPosition(new Vec3());\n        return page;\n    }\n\n    onLoad() {\n        // 设置的当前页面为 1\n        this.target.setCurrentPageIndex(0);\n    }\n\n    update() {\n        // 当前页面索引\n        const extra = this.direction === PageView.Direction.Vertical ? '\\n' : '';\n        if(this.label)this.label!.string = `第${extra}` + (this.target.getCurrentPageIndex() + 1) + `${extra}页`;\n    }\n\n    // 返回首页\n    onJumpHome() {\n        // 第二个参数为滚动所需时间，默认值为 0.3 秒\n        this.target.scrollToPage(0);\n    }\n\n    // 添加页面\n    plusPage(callback: Function) {\n        if (this.curNum >= this.curTotal) {\n            return;\n        }\n        this.curNum++;\n        if (callback) {\n            callback();\n        }\n    }\n\n    // 减少页面\n    lessPageNum(callback: Function) {\n        if (this.curNum <= 0) {\n            return;\n        }\n        this.curNum--;\n        if (callback) {\n            callback();\n        }\n    }\n\n    // 添加页面\n    onAddPage() {\n        let createpage;\n        this.plusPage(() => {\n            createpage = this._createPage()\n            this.target.addPage(createpage);\n        });\n        return createpage;\n    }\n\n    // 插入当前页面\n    onInsertPage() {\n        this.plusPage(() => {\n            this.target.insertPage(this._createPage(), this.target.getCurrentPageIndex());\n        });\n    }\n\n    // 移除最后一个页面\n    onRemovePage() {\n        this.lessPageNum(() => {\n            var pages = this.target.getPages();\n            this.target.removePage(pages[pages.length - 1]);\n            if(this.curNum === 0){\n                this.onAddPage();\n            }\n        });\n    }\n\n    // 移除当前页面\n    onRemovePageAtIndex() {\n        this.lessPageNum(() => {\n            this.target.removePageAtIndex(this.target.getCurrentPageIndex());\n            if (this.curNum === 0) {\n                this.onAddPage();\n            }\n        });\n    }\n\n    // 移除所有页面\n    onRemoveAllPage() {\n        this.target.removeAllPages();\n        this.curNum = 0;\n        // this.onAddPage();\n    }\n\n    // 监听事件\n    onPageEvent(sender: PageView, eventType: typeof PageView.EventType) {\n        // // 翻页事件\n        // if (eventType !== PageView.EventType.PAGE_TURNING) {\n        //     return;\n        // }\n\n        console.log(\"当前所在的页面索引:\" + sender.getCurrentPageIndex());\n    }\n}\n"]}