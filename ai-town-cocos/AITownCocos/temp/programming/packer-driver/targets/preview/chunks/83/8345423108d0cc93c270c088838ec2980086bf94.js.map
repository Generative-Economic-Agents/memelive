{"version":3,"sources":["file:///Users/feiwang/cutepet/assets/src/manager/ModuleManager.ts"],"names":["ModuleManager","ModuleID","JishiModule","MainModule","_moduDic","_moduOnOff","currentMduId","start","self","initModule","moduDic","MAIN","JISHI","openModu","moduleId","modOpenData","modu","closeModu","open","close"],"mappings":";;;kHAMqBA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJZC,MAAAA,Q,iBAAAA,Q;;AACFC,MAAAA,W;;AACAC,MAAAA,U;;;;;;;;;yBAEcH,a,GAAN,MAAMA,aAAN,CAAoB;AAAA;AAAA,eACzBI,QADyB,GACd,EADc;;AAEjC;AACF;AACA;AAJmC,eAKzBC,UALyB,GAKZ,EALY;AAAA,eAOjCC,YAPiC;AAAA;;AAW1BC,QAAAA,KAAK,GAAS;AACnB,cAAIC,IAAI,GAAG,IAAX;AACAA,UAAAA,IAAI,CAACC,UAAL;AACD;;AACMA,QAAAA,UAAU,GAAS;AACxB,cAAID,IAAI,GAAG,IAAX;AACA,cAAIE,OAAO,GAAGF,IAAI,CAACJ,QAAnB;AACAM,UAAAA,OAAO,CAAC;AAAA;AAAA,oCAASC,IAAV,CAAP,GAAyB;AAAA;AAAA,wCAAe;AAAA;AAAA,oCAASA,IAAxB,CAAzB,CAHwB,CAGgC;;AACxDD,UAAAA,OAAO,CAAC;AAAA;AAAA,oCAASE,KAAV,CAAP,GAA0B;AAAA;AAAA,0CAAgB;AAAA;AAAA,oCAASA,KAAzB,CAA1B,CAJwB,CAImC;AAC5D;AAED;AACF;AACA;AACA;;AACE;AACF;AACA;;;AACSC,QAAAA,QAAQ,CAACC,QAAD,EAAgBC,WAAhB,EAA+C;AAAA,cAA/BA,WAA+B;AAA/BA,YAAAA,WAA+B,GAAZ,IAAY;AAAA;;AAC5D,cAAIP,IAAI,GAAG,IAAX;AAEA,cAAIM,QAAJ,EAAcA,QAAQ,GAAIA,QAAZ;AAEd,cAAIE,IAAgB,GAAG,KAAKZ,QAAL,CAAcU,QAAd,CAAvB;AACA,cAAI,CAACE,IAAL,EAAW;;AACX,cAAI,KAAKV,YAAL,IAAmB,KAAKA,YAAL,IAAmBQ,QAA1C,EAAoD;AAClD,iBAAKG,SAAL,CAAe,KAAKX,YAApB;AACD;;AACDE,UAAAA,IAAI,CAACH,UAAL,CAAgBS,QAAhB,IAA4BE,IAAI,CAACE,IAAL,CAAUH,WAAV,EAAuB,IAAvB,CAA5B;AACD;;AACME,QAAAA,SAAS,CAACH,QAAD,EAAsB;AACpC,cAAIN,IAAI,GAAG,IAAX;AACA,cAAIQ,IAAI,GAAG,KAAKZ,QAAL,CAAcU,QAAd,CAAX;AACA,cAAI,CAACE,IAAL,EAAW;AACXA,UAAAA,IAAI,CAACG,KAAL;AACA,cAAI,CAACX,IAAI,CAACH,UAAL,CAAgBS,QAAhB,CAAL,EAAgC;AAChCN,UAAAA,IAAI,CAACH,UAAL,CAAgBS,QAAhB,IAA4B,KAA5B;AACD;;AAhDgC,O,GAkDnC;AACA","sourcesContent":["import { director } from \"cc\";\nimport ModuleBase from \"../core/base/ModuleBase\";\nimport { ModuleID } from \"../game/config/ModuleID\";\nimport JishiModule from \"../module/jishi/JishiModule\";\nimport MainModule from \"../module/main/MainModule\";\n\nexport default class ModuleManager {\n  private _moduDic = {};\n  /**\n   * module打开状态\n   */\n  private _moduOnOff = {\n  };\n  currentMduId: string;\n\n\n\n  public start(): void {\n    let self = this;\n    self.initModule();\n  }\n  public initModule(): void {\n    let self = this;\n    let moduDic = self._moduDic;\n    moduDic[ModuleID.MAIN] = new MainModule(ModuleID.MAIN); //主界面\n    moduDic[ModuleID.JISHI] = new JishiModule(ModuleID.JISHI); //集市界面\n  }\n\n  /**\n   *\n   * @param moduleId\n   */\n  /** 打开模块\n   *\n   */\n  public openModu(moduleId: any, modOpenData: any = null): void {\n    let self = this;\n\n    if (moduleId) moduleId = (moduleId);\n\n    let modu: ModuleBase = this._moduDic[moduleId];\n    if (!modu) return;\n    if (this.currentMduId&&this.currentMduId!=moduleId) {\n      this.closeModu(this.currentMduId);\n    }\n    self._moduOnOff[moduleId] = modu.open(modOpenData, true);\n  }\n  public closeModu(moduleId: any): void {\n    let self = this;\n    let modu = this._moduDic[moduleId];\n    if (!modu) return;\n    modu.close();\n    if (!self._moduOnOff[moduleId]) return;\n    self._moduOnOff[moduleId] = false;\n  }\n}\n// const mduManger = new ModuleManager();\n// export default mduManger;\n"]}