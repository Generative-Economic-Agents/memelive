{"version":3,"sources":["file:///Users/feiwang/workSpace/AITown/cutepet/assets/src/core/components/TabButtonGroup%20copy.ts"],"names":["Node","Component","_decorator","Button","Color","Enum","instantiate","js","Label","Layout","log","size","Sprite","EventHandler","UITransform","EDITOR","ccclass","property","PARAM_TYPE","TabButtonGroup","type","tooltip","_isAddBtn","TabsNode","tabArr","length","Array","_tabsNode","_genTabs","_updateLayout","OnLabColor","color","_onLabColor","defaultTab","lb","getChildByName","getComponent","OffLabColor","_offLabColor","children","node","concat","i","removeFromParent","destroy","tab","_genNewTab","parent","onNode","_genButtonNode","offNode","active","uiTrans","anchorX","setContentSize","addChild","name","root","addComponent","label","_genLabel","string","w","h","layout","Type","VERTICAL","height","spacingY","width","HORIZONTAL","spacingX","_addTabButtonComp","forEach","nodeIndex","btnComp","btnCompName","getClassName","newBtnComp","transition","zoomScale","disabledSprite","hoverSprite","normalSprite","pressedSprite","hoverColor","normalColor","pressedColor","disabledColor","target","removeComponent","touchEvents","event","hd","component","handler","customData","NODE_INDEX","customEventData","toString","clickEvents","push","onLoad","console","anchorY","changeTab","index","interactable","initTab","setTabLabel","list","title","newtab","hideAll"],"mappings":";;;;;;;;;;;;;;;;AAAQA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,G,OAAAA,G;AAAKC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,W,OAAAA,W;;AAClHC,MAAAA,M,UAAAA,M;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBf,U;;AAEzBgB,MAAAA,U,0BAAAA,U;AAAAA,QAAAA,U,CAAAA,U;AAAAA,QAAAA,U,CAAAA,U;eAAAA,U;QAAAA,U,SAIL;;;yBAEqBC,c,WADpBH,OAAO,CAAC,gBAAD,C,UAKNC,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAEpB;AAAR,OAAD,C,UAGRiB,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAE,CAACpB,IAAD;AAAR,OAAD,C,UAERiB,QAAQ,CAAC;AACTI,QAAAA,OAAO,EAAE,OADA;AAETD,QAAAA,IAAI,EAAE,CAACpB,IAAD;AAFG,OAAD,C,UAkBRiB,QAAQ,CAAC,EAAD,C,UAERA,QAAQ,CAAC;AACTI,QAAAA,OAAO,EAAE;AADA,OAAD,C,UAaRJ,QAAQ,CAAC,EAAD,C,UAERA,QAAQ,CAAC;AACTI,QAAAA,OAAO,EAAE;AADA,OAAD,C,UAeRJ,QAAQ,CAAC;AACTG,QAAAA,IAAI,EAAEf,IAAI,CAACa,UAAD,CADD;AAETG,QAAAA,OAAO,EAAE;AAFA,OAAD,C,WAMRJ,QAAQ,CAAC,CAACJ,YAAD,CAAD,C,2BAlEV,MACqBM,cADrB,SAC4ClB,SAD5C,CACsD;AAAA;AAAA;AAAA,eAE7CqB,SAF6C,GAEvB,KAFuB;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAalC,YAARC,QAAQ,CAACC,MAAD,EAAsB;AACxC;AACA,cAAIA,MAAM,CAACC,MAAP,GAAgB,CAApB,EAAuB;AACtB,iBAAKF,QAAL,GAAgB,IAAIG,KAAJ,CAAgB,CAAhB,CAAhB;AACA;AACA;;AACD,eAAKC,SAAL,GAAiBH,MAAjB;;AACA,eAAKI,QAAL,CAAcJ,MAAd;;AACA,eAAKK,aAAL;AACA;;AACkB,YAARN,QAAQ,GAAgB;AAClC,iBAAO,KAAKI,SAAZ;AACA;;AAOoB,YAAVG,UAAU,CAACC,KAAD,EAAe;AACnC,eAAKC,WAAL,GAAmBD,KAAnB;;AACA,cAAI,KAAKE,UAAT,EAAqB;AACX,gBAAIC,EAAE,GAAG,KAAKD,UAAL,CAAgBE,cAAhB,CAA+B,IAA/B,EAAqCA,cAArC,CAAoD,OAApD,CAAT;AACT,gBAAGD,EAAH,EAAOA,EAAE,CAACE,YAAH,CAAgB5B,KAAhB,EAAuBuB,KAAvB,GAA+B,KAAKC,WAApC;AACP;AACD;;AACoB,YAAVF,UAAU,GAAU;AAC9B,iBAAO,KAAKE,WAAZ;AACA;;AAMqB,YAAXK,WAAW,CAACN,KAAD,EAAe;AACpC,eAAKO,YAAL,GAAoBP,KAApB;;AACA,cAAI,KAAKE,UAAT,EAAqB;AACX,gBAAIC,EAAE,GAAG,KAAKD,UAAL,CAAgBE,cAAhB,CAA+B,IAA/B,EAAqCA,cAArC,CAAoD,OAApD,CAAT;AAETD,YAAAA,EAAE,CAACE,YAAH,CAAgB5B,KAAhB,EAAuBuB,KAAvB,GAA+B,KAAKO,YAApC;AACA;AACD;;AACqB,YAAXD,WAAW,GAAU;AAC/B,iBAAO,KAAKC,YAAZ;AACA;;AAYD;;AACA;AACD;AACA;AACA;AACSV,QAAAA,QAAQ,CAACJ,MAAD,EAAS;AACxB,cAAIT,MAAJ,EAAY;AACX;AACA,gBAAIwB,QAAQ,GAAG,KAAKC,IAAL,CAAUD,QAAV,CAAmBE,MAAnB,EAAf;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACd,MAA7B,EAAqCiB,CAAC,EAAtC,EAA0C;AACzC,kBAAIA,CAAC,IAAI,CAAT,EAAY;AACX;AACA;;AACD,kBAAIH,QAAQ,CAACG,CAAD,CAAR,IAAe,IAAnB,EAAyB;AACxBH,gBAAAA,QAAQ,CAACG,CAAD,CAAR,CAAYC,gBAAZ;AACAJ,gBAAAA,QAAQ,CAACG,CAAD,CAAR,CAAYE,OAAZ;AACA;AACD,aAXU,CAYX;;;AACA,iBAAK,IAAIF,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGlB,MAAM,CAACC,MAA3B,EAAmCiB,EAAC,EAApC,EAAwC;AACvC,kBAAIA,EAAC,IAAI,CAAL,IAAU,KAAKF,IAAL,CAAUD,QAAV,CAAmBd,MAAnB,IAA6B,CAA3C,EAA8C;AAC7C,qBAAKF,QAAL,CAAcmB,EAAd,IAAmB,KAAKF,IAAL,CAAUD,QAAV,CAAmBG,EAAnB,CAAnB;AACA;AACA;;AACD,kBAAIG,GAAG,GAAG,IAAV;;AACA,kBAAI,KAAKZ,UAAL,IAAmB,KAAKO,IAAL,CAAUD,QAAV,CAAmBd,MAAnB,GAA4B,CAAnD,EAAsD;AACrDoB,gBAAAA,GAAG,GAAGvC,WAAW,CAAC,KAAK2B,UAAN,CAAjB;AACA,eAFD,MAEO;AACNY,gBAAAA,GAAG,GAAG,KAAKC,UAAL,CAAgBJ,EAAhB,CAAN;AACA,qBAAKT,UAAL,GAAkBY,GAAlB;AACA;;AACDA,cAAAA,GAAG,CAACE,MAAJ,GAAa,KAAKP,IAAlB;AACA,mBAAKjB,QAAL,CAAcmB,EAAd,IAAmBG,GAAnB;AACA;AACD;AACD;AAED;AACD;AACA;AACA;;;AACSC,QAAAA,UAAU,CAACJ,CAAD,EAAI;AACrB,cAAIG,GAAG,GAAG,IAAI7C,IAAJ,CAAS,KAAT,CAAV;;AACA,cAAIgD,MAAM,GAAG,KAAKC,cAAL,CAAoB,IAApB,EAA0B,KAAKnB,UAA/B,CAAb;;AACA,cAAIoB,OAAO,GAAG,KAAKD,cAAL,CAAoB,KAApB,EAA2B,KAAKZ,WAAhC,CAAd;;AACAW,UAAAA,MAAM,CAACG,MAAP,GAAgB,KAAhB;AACM,cAAMC,OAAO,GAAGP,GAAG,CAACT,YAAJ,CAAiBtB,WAAjB,CAAhB;AACAsC,UAAAA,OAAO,CAACC,OAAR,GAAkB,GAAlB;AACND,UAAAA,OAAO,CAACE,cAAR,CAAuB3C,IAAI,CAAC,GAAD,EAAM,GAAN,CAA3B;AACAkC,UAAAA,GAAG,CAACU,QAAJ,CAAaL,OAAb;AACAL,UAAAA,GAAG,CAACU,QAAJ,CAAaP,MAAb;AACA,iBAAOH,GAAP;AACA;;AAEOI,QAAAA,cAAc,CAACO,IAAD,EAAOzB,KAAP,EAAc;AACnC,cAAI0B,IAAI,GAAG,IAAIzD,IAAJ,CAASwD,IAAT,CAAX;AACAC,UAAAA,IAAI,CAACC,YAAL,CAAkB9C,MAAlB;;AACA,cAAI+C,KAAK,GAAG,KAAKC,SAAL,CAAe7B,KAAf,CAAZ;;AACA0B,UAAAA,IAAI,CAACF,QAAL,CAAcI,KAAd;AACA,iBAAOF,IAAP;AACA;;AAEOG,QAAAA,SAAS,CAAC7B,KAAD,EAAQ;AACxB,cAAI4B,KAAK,GAAG,IAAI3D,IAAJ,CAAS,OAAT,CAAZ;AACA2D,UAAAA,KAAK,CAACD,YAAN,CAAmBlD,KAAnB;AACM,cAAI0B,EAAE,GAAGyB,KAAK,CAACvB,YAAN,CAAmB5B,KAAnB,CAAT;AACN0B,UAAAA,EAAE,CAAC2B,MAAH,GAAY,UAAZ;AACA3B,UAAAA,EAAE,CAACH,KAAH,GAAWA,KAAX;AACA,iBAAO4B,KAAP;AACA;AAED;AACD;AACA;;;AACS9B,QAAAA,aAAa,GAAG;AACvB,cAAI,CAAC,KAAKI,UAAV,EAAsB;AACrB;AACA;;AACD,cAAI6B,CAAJ;AAAA,cAAOC,CAAC,GAAG,IAAX;AACA,cAAIC,MAAM,GAAG,KAAKxB,IAAL,CAAUJ,YAAV,CAAuB3B,MAAvB,CAAb;;AACA,cAAIuD,MAAM,CAAC5C,IAAP,IAAeX,MAAM,CAACwD,IAAP,CAAYC,QAA/B,EAAyC;AACxCH,YAAAA,CAAC,GAAG,CAAC,KAAK9B,UAAL,CAAgBG,YAAhB,CAA6BtB,WAA7B,EAA0CqD,MAA1C,GAAmDH,MAAM,CAACI,QAA3D,IAAuE,KAAK7C,QAAL,CAAcE,MAAzF;AACAqC,YAAAA,CAAC,GAAG,KAAK7B,UAAL,CAAgBG,YAAhB,CAA6BtB,WAA7B,EAA0CuD,KAA9C;AACA,WAHD,MAGO,IAAIL,MAAM,CAAC5C,IAAP,IAAeX,MAAM,CAACwD,IAAP,CAAYK,UAA/B,EAA2C;AACjDR,YAAAA,CAAC,GAAG,CAAC,KAAK7B,UAAL,CAAgBG,YAAhB,CAA6BtB,WAA7B,EAA0CuD,KAA1C,GAAkDL,MAAM,CAACO,QAA1D,IAAsE,KAAKhD,QAAL,CAAcE,MAAxF;AACAsC,YAAAA,CAAC,GAAG,KAAK9B,UAAL,CAAgBG,YAAhB,CAA6BtB,WAA7B,EAA0CqD,MAA9C;AACA;;AACD,eAAK3B,IAAL,CAAUJ,YAAV,CAAuBtB,WAAvB,EAAoCuD,KAApC,GAA4CP,CAA5C;AACA,eAAKtB,IAAL,CAAUJ,YAAV,CAAuBtB,WAAvB,EAAoCqD,MAApC,GAA6CJ,CAA7C;AACA;AAED;AACD;AACA;;;AACSS,QAAAA,iBAAiB,GAAG;AAC3B,cAAI,KAAKlD,SAAT,EAAoB;AACnB;AACA;;AACD,eAAKA,SAAL,GAAiB,IAAjB;AACA,eAAKkB,IAAL,CAAUD,QAAV,CAAmBkC,OAAnB,CAA2B,CAACjC,IAAD,EAAOkC,SAAP,KAAqB;AAC/C,gBAAIC,OAAc,GAAInC,IAAI,CAACJ,YAAL,CAAkBjC,MAAlB,CAAtB;;AAEA,gBAAIwE,OAAO,IAAI,IAAf,EAAqB;AACpBnC,cAAAA,IAAI,CAACkB,YAAL,CAAkBvD,MAAlB;AACAwE,cAAAA,OAAO,GAAGnC,IAAI,CAACJ,YAAL,CAAkBjC,MAAlB,CAAV;AACA,aAN8C,CAO/C;;;AACA,gBAAIyE,WAAW,GAAGrE,EAAE,CAACsE,YAAH,CAAgBF,OAAhB,CAAlB;;AACA,gBAAKC,WAAW,KAAK,QAArB,EAA+B;AAC9B,kBAAIE,UAAU,GAAGtC,IAAI,CAACkB,YAAL,CAAkB,QAAlB,CAAjB;AAEAoB,cAAAA,UAAU,CAACC,UAAX,GAAwBJ,OAAO,CAACI,UAAhC;AACAD,cAAAA,UAAU,CAACE,SAAX,GAAuBL,OAAO,CAACK,SAA/B;AAEAF,cAAAA,UAAU,CAACG,cAAX,GAA4BN,OAAO,CAACM,cAApC;AACAH,cAAAA,UAAU,CAACI,WAAX,GAAyBP,OAAO,CAACO,WAAjC;AACAJ,cAAAA,UAAU,CAACK,YAAX,GAA0BR,OAAO,CAACQ,YAAlC;AACAL,cAAAA,UAAU,CAACM,aAAX,GAA2BT,OAAO,CAACS,aAAnC;AAEAN,cAAAA,UAAU,CAACO,UAAX,GAAwBV,OAAO,CAACU,UAAhC;AACAP,cAAAA,UAAU,CAACQ,WAAX,GAAyBX,OAAO,CAACW,WAAjC;AACAR,cAAAA,UAAU,CAACS,YAAX,GAA0BZ,OAAO,CAACY,YAAlC;AACAT,cAAAA,UAAU,CAACU,aAAX,GAA2Bb,OAAO,CAACa,aAAnC;AAEAV,cAAAA,UAAU,CAACW,MAAX,GAAoBd,OAAO,CAACc,MAA5B;AAEAd,cAAAA,OAAO,GAAGG,UAAV;AACAtC,cAAAA,IAAI,CAACkD,eAAL,CAAqBvF,MAArB,EAnB8B,CAmBD;AAC7B,aA7B8C,CA+B/C;;;AACA,iBAAKwF,WAAL,CAAiBlB,OAAjB,CAA0BmB,KAAD,IAAyB;AACjD;AACA,kBAAIC,EAAE,GAAG,IAAIhF,YAAJ,EAAT,CAFiD,CAErB;;AAC5BgF,cAAAA,EAAE,CAACC,SAAH,GAAeF,KAAK,CAAC,gBAAD,CAApB;AACAC,cAAAA,EAAE,CAACE,OAAH,GAAaH,KAAK,CAACG,OAAnB;AACAF,cAAAA,EAAE,CAACJ,MAAH,GAAYG,KAAK,CAACH,MAAlB;;AACA,kBAAI,KAAKO,UAAL,KAAoB9E,UAAU,CAAC+E,UAAnC,EAA+C;AAC9CJ,gBAAAA,EAAE,CAACK,eAAH,GAAqBxB,SAAS,CAACyB,QAAV,EAArB;AACA,eAFD,MAEO;AACNN,gBAAAA,EAAE,CAACK,eAAH,GAAqB1D,IAAI,CAACgB,IAA1B;AACA;;AACDmB,cAAAA,OAAO,CAACyB,WAAR,CAAoBC,IAApB,CAAyBR,EAAzB;AACA,aAZD;AAcA,WA9CD;AA+CA;;AAGSS,QAAAA,MAAM,GAAG;AAClB,cAAIvF,MAAJ,EAAY;AACFwF,YAAAA,OAAO,CAAC7F,GAAR,CAAY,UAAZ,EADE,CAEX;;AACA,gBAAI,CAAC,KAAK8B,IAAL,CAAUJ,YAAV,CAAuB3B,MAAvB,CAAL,EAAqC;AACpC,mBAAK+B,IAAL,CAAUJ,YAAV,CAAuBtB,WAAvB,EAAoC0F,OAApC,GAA8C,CAA9C;AACA9F,cAAAA,GAAG,CAAC,2BAAD,CAAH;AACA,mBAAK8B,IAAL,CAAUkB,YAAV,CAAuBjD,MAAvB;AACA,mBAAK+B,IAAL,CAAUJ,YAAV,CAAuB3B,MAAvB,EAA+BW,IAA/B,GAAsCX,MAAM,CAACwD,IAAP,CAAYC,QAAlD;AACA,mBAAK1B,IAAL,CAAUJ,YAAV,CAAuBtB,WAAvB,EAAoC0F,OAApC,GAA8C,CAA9C;;AACA,mBAAK3E,aAAL;AACA;;AACD,gBAAI,CAAC,KAAKI,UAAN,IAAoB,KAAKV,QAAL,CAAcE,MAAd,GAAuB,CAA/C,EAAkD;AACjD,mBAAKF,QAAL,GAAgB,KAAKA,QAArB;AACA;;AACD;AACA,WAhBiB,CAiBlB;;AACA;AAID;AACD;AACA;AACA;;;AACQkF,QAAAA,SAAS,CAACC,KAAD,EAAQ;AACvB,cAAI,CAAC,KAAKpF,SAAV,EAAqB;AACpB,iBAAKkD,iBAAL;AACA;;AACD,eAAK,IAAI9B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKnB,QAAL,CAAcE,MAAlC,EAA0CiB,CAAC,EAA3C,EAA+C;AAC9C,iBAAKnB,QAAL,CAAcmB,CAAd,EAAiBN,YAAjB,CAA8BjC,MAA9B,EAAsCwG,YAAtC,GAAqD,IAArD;AACA,iBAAKpF,QAAL,CAAcmB,CAAd,EAAiBP,cAAjB,CAAgC,IAAhC,EAAsCgB,MAAtC,GAA+C,KAA/C;AACA,iBAAK5B,QAAL,CAAcmB,CAAd,EAAiBP,cAAjB,CAAgC,KAAhC,EAAuCgB,MAAvC,GAAgD,IAAhD;AACA;;AACD,eAAK5B,QAAL,CAAcmF,KAAd,EAAqBtE,YAArB,CAAkCjC,MAAlC,EAA0CwG,YAA1C,GAAyD,KAAzD;AACA,eAAKpF,QAAL,CAAcmF,KAAd,EAAqBvE,cAArB,CAAoC,IAApC,EAA0CgB,MAA1C,GAAmD,IAAnD;AACA,eAAK5B,QAAL,CAAcmF,KAAd,EAAqBvE,cAArB,CAAoC,KAApC,EAA2CgB,MAA3C,GAAoD,KAApD;AACMoD,UAAAA,OAAO,CAAC7F,GAAR,CAAY,cAAZ;AAEN;AAED;AACD;AACA;;;AACQkG,QAAAA,OAAO,CAACF,KAAD,EAAY;AAAA,cAAXA,KAAW;AAAXA,YAAAA,KAAW,GAAH,CAAG;AAAA;;AACzB,eAAKD,SAAL,CAAeC,KAAK,GAAG,CAAvB;AACA;AAED;AACD;AACA;AACA;;;AACQG,QAAAA,WAAW,CAACC,IAAD,EAAO;AACxB,eAAK,IAAIJ,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGI,IAAI,CAACrF,MAAjC,EAAyCiF,KAAK,EAA9C,EAAkD;AACjD,gBAAI,KAAKnF,QAAL,CAAcmF,KAAd,CAAJ,EAA0B;AACzB,mBAAKnF,QAAL,CAAcmF,KAAd,EAAqBvD,MAArB,GAA8B,IAA9B;AACA,mBAAK5B,QAAL,CAAcmF,KAAd,EAAqBvE,cAArB,CAAoC,IAApC,EAA0CA,cAA1C,CAAyD,OAAzD,EAAkEC,YAAlE,CAA+E5B,KAA/E,EAAsFqD,MAAtF,GAA+FiD,IAAI,CAACJ,KAAD,CAAJ,CAAYK,KAA3G;AACA,mBAAKxF,QAAL,CAAcmF,KAAd,EAAqBvE,cAArB,CAAoC,KAApC,EAA2CA,cAA3C,CAA0D,OAA1D,EAAmEC,YAAnE,CAAgF5B,KAAhF,EAAuFqD,MAAvF,GAAgGiD,IAAI,CAACJ,KAAD,CAAJ,CAAYK,KAA5G;AACA,aAJD,MAIO;AACN,kBAAIC,MAAM,GAAG1G,WAAW,CAAC,KAAKiB,QAAL,CAAc,CAAd,CAAD,CAAxB;AACAyF,cAAAA,MAAM,CAAC7E,cAAP,CAAsB,IAAtB,EAA4BA,cAA5B,CAA2C,OAA3C,EAAoDC,YAApD,CAAiE5B,KAAjE,EAAwEqD,MAAxE,GAAiFiD,IAAI,CAACJ,KAAD,CAAJ,CAAYK,KAA7F;AACAC,cAAAA,MAAM,CAAC7E,cAAP,CAAsB,KAAtB,EAA6BA,cAA7B,CAA4C,OAA5C,EAAqDC,YAArD,CAAkE5B,KAAlE,EAAyEqD,MAAzE,GAAkFiD,IAAI,CAACJ,KAAD,CAAJ,CAAYK,KAA9F;AACA,kBAAIpC,OAAO,GAAIqC,MAAM,CAAC5E,YAAP,CAAoBjC,MAApB,CAAf;AACAwE,cAAAA,OAAO,CAACyB,WAAR,CAAoB,CAApB,EAAuBF,eAAvB,GAAyCQ,KAAK,CAACP,QAAN,EAAzC;AACA,mBAAK3D,IAAL,CAAUe,QAAV,CAAmByD,MAAnB;AACA,mBAAKzF,QAAL,CAAc8E,IAAd,CAAmBW,MAAnB;AACA;AACD;AACD;;AAEMC,QAAAA,OAAO,GAAG;AAChB,eAAK,IAAIvE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKnB,QAAL,CAAcE,MAAlC,EAA0CiB,CAAC,EAA3C,EAA+C;AAC9C,iBAAKnB,QAAL,CAAcmB,CAAd,EAAiBS,MAAjB,GAA0B,KAA1B;AACA;AACD;;AArSoD,O;;;;;iBAKlC,I;;;;;;;iBAGM,IAAIzB,KAAJ,CAAgB,CAAhB,C;;;;;;;iBAoBJ,IAAItB,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,C;;;;;;;iBAeC,IAAIA,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,C;;;;;;;iBAoBGc,UAAU,CAAC+E,U;;;;;;;iBAGN,E","sourcesContent":["import {Node, Component, _decorator, Button, Color, Enum, instantiate, js, Label, Layout, log, size, Sprite, EventHandler, UITransform } from \"cc\";\nimport { EDITOR } from \"cc/env\";\n\nconst { ccclass, property } = _decorator;\n\nenum PARAM_TYPE {\n\tNODE_INDEX,\n\tNODE_NAME\n}\n///不可用\n@ccclass(\"TabButtonGroup\")\nexport default class TabButtonGroup extends Component {\n\n\tprivate _isAddBtn : boolean = false;\n\n\t@property({ type: Node })\n\tdefaultTab: Node = null\n\n\t@property({ type: [Node] })\n\t_tabsNode: Array<Node> = new Array<Node>(1);\n\t@property({\n\t\ttooltip: 'tab节点',\n\t\ttype: [Node],\n\t})\n\tpublic set TabsNode(tabArr: Array<Node>) {\n\t\t// log(\"gen init\")\n\t\tif (tabArr.length < 1) {\n\t\t\tthis.TabsNode = new Array<Node>(1);\n\t\t\treturn;\n\t\t}\n\t\tthis._tabsNode = tabArr;\n\t\tthis._genTabs(tabArr);\n\t\tthis._updateLayout();\n\t}\n\tpublic get TabsNode(): Array<Node> {\n\t\treturn this._tabsNode\n\t}\n\n\t@property({})\n\t_onLabColor: Color = new Color(255, 255, 255);\n\t@property({\n\t\ttooltip: 'tab激活时的label的颜色',\n\t})\n\tpublic set OnLabColor(color: Color) {\n\t\tthis._onLabColor = color;\n\t\tif (this.defaultTab) {\n            let lb = this.defaultTab.getChildByName(\"on\").getChildByName(\"label\");\n\t\t\tif(lb) lb.getComponent(Label).color = this._onLabColor;\n\t\t}\n\t}\n\tpublic get OnLabColor(): Color {\n\t\treturn this._onLabColor\n\t}\n\t@property({})\n\t_offLabColor: Color = new Color(235, 181, 255);\n\t@property({\n\t\ttooltip: 'tab未激活时的label的颜色',\n\t})\n\tpublic set OffLabColor(color: Color) {\n\t\tthis._offLabColor = color;\n\t\tif (this.defaultTab) {\n            let lb = this.defaultTab.getChildByName(\"on\").getChildByName(\"label\");\n\n\t\t\tlb.getComponent(Label).color = this._offLabColor;\n\t\t}\n\t}\n\tpublic get OffLabColor(): Color {\n\t\treturn this._offLabColor\n\t}\n\n\t@property({\n\t\ttype: Enum(PARAM_TYPE),\n\t\ttooltip: '节点按钮事件的自定义数据, node_index为节点的的index, node_name为节点名字'\n\t})\n\tcustomData: PARAM_TYPE = PARAM_TYPE.NODE_INDEX;\n\n\t@property([EventHandler])\n\ttouchEvents: EventHandler[] = [];\n\n\n\t// LIFE-CYCLE CALLBACKS:\n\t/**\n\t * 生成初始化tab\n\t * @param tabArr tab数量\n\t */\n\tprivate _genTabs(tabArr) {\n\t\tif (EDITOR) {\n\t\t\t//删除已有\n\t\t\tlet children = this.node.children.concat()\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\tif (i == 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (children[i] != null) {\n\t\t\t\t\tchildren[i].removeFromParent();\n\t\t\t\t\tchildren[i].destroy()\n\t\t\t\t}\n\t\t\t}\n\t\t\t//generate \n\t\t\tfor (let i = 0; i < tabArr.length; i++) {\n\t\t\t\tif (i == 0 && this.node.children.length == 1) {\n\t\t\t\t\tthis.TabsNode[i] = this.node.children[i];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet tab = null;\n\t\t\t\tif (this.defaultTab && this.node.children.length > 0) {\n\t\t\t\t\ttab = instantiate(this.defaultTab);\n\t\t\t\t} else {\n\t\t\t\t\ttab = this._genNewTab(i);\n\t\t\t\t\tthis.defaultTab = tab;\n\t\t\t\t}\n\t\t\t\ttab.parent = this.node;\n\t\t\t\tthis.TabsNode[i] = tab;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 生成一个新的tab模版\n\t * @param i 下标\n\t */\n\tprivate _genNewTab(i) {\n\t\tlet tab = new Node(\"tab\");\n\t\tlet onNode = this._genButtonNode(\"on\", this.OnLabColor);\n\t\tlet offNode = this._genButtonNode(\"off\", this.OffLabColor);\n\t\tonNode.active = false;\n        const uiTrans = tab.getComponent(UITransform)!;\n        uiTrans.anchorX = 0.5;\n\t\tuiTrans.setContentSize(size(100, 100));\n\t\ttab.addChild(offNode);\n\t\ttab.addChild(onNode);\n\t\treturn tab;\n\t}\n\n\tprivate _genButtonNode(name, color) {\n\t\tlet root = new Node(name);\n\t\troot.addComponent(Sprite);\n\t\tlet label = this._genLabel(color);\n\t\troot.addChild(label);\n\t\treturn root;\n\t}\n\n\tprivate _genLabel(color) {\n\t\tlet label = new Node(\"label\");\n\t\tlabel.addComponent(Label);\n        let lb = label.getComponent(Label);\n\t\tlb.string = \"TAB Name\";\n\t\tlb.color = color;\n\t\treturn label;\n\t}\n\n\t/**\n\t * 根据tab 调整layout大小\n\t */\n\tprivate _updateLayout() {\n\t\tif (!this.defaultTab) {\n\t\t\treturn;\n\t\t}\n\t\tlet w, h = null;\n\t\tlet layout = this.node.getComponent(Layout);\n\t\tif (layout.type == Layout.Type.VERTICAL) {\n\t\t\th = (this.defaultTab.getComponent(UITransform).height + layout.spacingY) * this.TabsNode.length;\n\t\t\tw = this.defaultTab.getComponent(UITransform).width;\n\t\t} else if (layout.type == Layout.Type.HORIZONTAL) {\n\t\t\tw = (this.defaultTab.getComponent(UITransform).width + layout.spacingX) * this.TabsNode.length;\n\t\t\th = this.defaultTab.getComponent(UITransform).height;\n\t\t}\n\t\tthis.node.getComponent(UITransform).width = w;\n\t\tthis.node.getComponent(UITransform).height = h;\n\t}\n\n\t/**\n\t * 添加button组件\n\t */\n\tprivate _addTabButtonComp() {\n\t\tif (this._isAddBtn) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isAddBtn = true;\n\t\tthis.node.children.forEach((node, nodeIndex) => {\n\t\t\tlet btnComp:Button =  node.getComponent(Button) as Button;\n\n\t\t\tif (btnComp == null) {\n\t\t\t\tnode.addComponent(Button)\n\t\t\t\tbtnComp = node.getComponent(Button) as Button;\n\t\t\t}\n\t\t\t// 判断button，将ccButton替换为自定义的UICustomButton\n\t\t\tlet btnCompName = js.getClassName(btnComp)\n\t\t\tif ( btnCompName === 'Button') {\n\t\t\t\tlet newBtnComp = node.addComponent(\"Button\") as Button;\n\n\t\t\t\tnewBtnComp.transition = btnComp.transition;\n\t\t\t\tnewBtnComp.zoomScale = btnComp.zoomScale;\n\n\t\t\t\tnewBtnComp.disabledSprite = btnComp.disabledSprite;\n\t\t\t\tnewBtnComp.hoverSprite = btnComp.hoverSprite;\n\t\t\t\tnewBtnComp.normalSprite = btnComp.normalSprite;\n\t\t\t\tnewBtnComp.pressedSprite = btnComp.pressedSprite;\n\n\t\t\t\tnewBtnComp.hoverColor = btnComp.hoverColor;\n\t\t\t\tnewBtnComp.normalColor = btnComp.normalColor;\n\t\t\t\tnewBtnComp.pressedColor = btnComp.pressedColor;\n\t\t\t\tnewBtnComp.disabledColor = btnComp.disabledColor;\n\n\t\t\t\tnewBtnComp.target = btnComp.target\n\n\t\t\t\tbtnComp = newBtnComp;\n\t\t\t\tnode.removeComponent(Button) // 移除老button\n\t\t\t}\n\n\t\t\t//绑定回调事件\n\t\t\tthis.touchEvents.forEach((event: EventHandler) => {\n\t\t\t\t//克隆数据，每个节点获取的都是不同的回调\n\t\t\t\tlet hd = new EventHandler() //copy对象\n\t\t\t\thd.component = event['_componentName']\n\t\t\t\thd.handler = event.handler\n\t\t\t\thd.target = event.target\n\t\t\t\tif (this.customData === PARAM_TYPE.NODE_INDEX) {\n\t\t\t\t\thd.customEventData = nodeIndex.toString()\n\t\t\t\t} else {\n\t\t\t\t\thd.customEventData = node.name\n\t\t\t\t}\n\t\t\t\tbtnComp.clickEvents.push(hd)\n\t\t\t})\n\n\t\t})\n\t}\n\n\n\tprotected onLoad() {\n\t\tif (EDITOR) {\n            console.log(\"11111111\")\n\t\t\t//添加layout\n\t\t\tif (!this.node.getComponent(Layout)) {\n\t\t\t\tthis.node.getComponent(UITransform).anchorY = 1;\n\t\t\t\tlog(\"TabButtonGroup add Layout\");\n\t\t\t\tthis.node.addComponent(Layout);\n\t\t\t\tthis.node.getComponent(Layout).type = Layout.Type.VERTICAL;\n\t\t\t\tthis.node.getComponent(UITransform).anchorY = 1;\n\t\t\t\tthis._updateLayout();\n\t\t\t}\n\t\t\tif (!this.defaultTab || this.TabsNode.length < 1) {\n\t\t\t\tthis.TabsNode = this.TabsNode;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t// this._addTabButtonComp();\n\t}\n\n\n\n\t/**\n\t * tab状态切换\n\t * @param index tab下标\n\t */\n\tpublic changeTab(index) {\n\t\tif (!this._isAddBtn) {\n\t\t\tthis._addTabButtonComp();\n\t\t}\n\t\tfor (let i = 0; i < this.TabsNode.length; i++) {\n\t\t\tthis.TabsNode[i].getComponent(Button).interactable = true;\n\t\t\tthis.TabsNode[i].getChildByName(\"on\").active = false;\n\t\t\tthis.TabsNode[i].getChildByName(\"off\").active = true;\n\t\t}\n\t\tthis.TabsNode[index].getComponent(Button).interactable = false;\n\t\tthis.TabsNode[index].getChildByName(\"on\").active = true;\n\t\tthis.TabsNode[index].getChildByName(\"off\").active = false;\n        console.log(\"change tab..\")\n\n\t}\n\n\t/**\n\t * 设置默认激活tab\n\t */\n\tpublic initTab(index = 1) {\n\t\tthis.changeTab(index - 1);\n\t}\n\n\t/**\n\t * 设置tab label string\n\t * @param list \n\t */\n\tpublic setTabLabel(list) {\n\t\tfor (let index = 0; index < list.length; index++) {\n\t\t\tif (this.TabsNode[index]) {\n\t\t\t\tthis.TabsNode[index].active = true;\n\t\t\t\tthis.TabsNode[index].getChildByName(\"on\").getChildByName(\"label\").getComponent(Label).string = list[index].title;\n\t\t\t\tthis.TabsNode[index].getChildByName(\"off\").getChildByName(\"label\").getComponent(Label).string = list[index].title;\n\t\t\t} else {\n\t\t\t\tlet newtab = instantiate(this.TabsNode[0]);\n\t\t\t\tnewtab.getChildByName(\"on\").getChildByName(\"label\").getComponent(Label).string = list[index].title;\n\t\t\t\tnewtab.getChildByName(\"off\").getChildByName(\"label\").getComponent(Label).string = list[index].title;\n\t\t\t\tlet btnComp =  newtab.getComponent(Button)\n\t\t\t\tbtnComp.clickEvents[0].customEventData = index.toString();\n\t\t\t\tthis.node.addChild(newtab);\n\t\t\t\tthis.TabsNode.push(newtab);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic hideAll() {\n\t\tfor (let i = 0; i < this.TabsNode.length; i++) {\n\t\t\tthis.TabsNode[i].active = false;\n\t\t}\n\t}\n}\n"]}