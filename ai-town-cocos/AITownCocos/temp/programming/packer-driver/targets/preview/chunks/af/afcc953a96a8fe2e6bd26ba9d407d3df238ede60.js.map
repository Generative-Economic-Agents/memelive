{"version":3,"sources":["file:///Users/feiwang/cutepet/assets/src/module/main/tujian/PetsComponent.ts"],"names":["_decorator","Component","Node","ListViewCtrl2","modelMgr","observer","EventType","ccclass","property","PetsComponent","start","on","SOCKET_GETALL_CATS","updateSerCatsHandler","onDestroy","off","arr","configModel","commonConfigJson","Cat","showZhongziList","onEnable","len","Math","ceil","length","grpArr","i","temparr","j","push","pre_listView","ctrl","getChildByName","spawnCount","getComponent","initData","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;AACvBC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,Q,iBAAAA,Q;;AACVC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;+BAGjBS,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACN,IAAD,C,2BAFb,MACaO,aADb,SACmCR,SADnC,CAC6C;AAAA;AAAA;;AAAA;AAAA;;AAIzCS,QAAAA,KAAK,GAAG;AACJ;AACA;AAAA;AAAA,oCAASC,EAAT,CAAY;AAAA;AAAA,sCAAUC,kBAAtB,EAA0C,KAAKC,oBAA/C,EAAqE,IAArE;AACA,eAAKA,oBAAL;AAEH;;AAESC,QAAAA,SAAS,GAAS;AACxB;AAAA;AAAA,oCAASC,GAAT,CAAa;AAAA;AAAA,sCAAUH,kBAAvB,EAA2C,KAAKC,oBAAhD,EAAsE,IAAtE;AAEH;;AAEOA,QAAAA,oBAAoB,GAAE;AAC1B,cAAIG,GAAU,GAAG;AAAA;AAAA,oCAASC,WAAT,CAAqBC,gBAArB,CAAsCC,GAAvD;AACA,eAAKC,eAAL,CAAqBJ,GAArB;AACH;;AACSK,QAAAA,QAAQ,GAAS,CACvB;AACA;AACA;AACH;AACD;AACJ;AACA;;;AACWD,QAAAA,eAAe,CAACJ,GAAD,EAAM;AACxB,cAAIM,GAAG,GAAGC,IAAI,CAACC,IAAL,CAAUR,GAAG,CAACS,MAAJ,GAAa,CAAvB,CAAV;AACA,cAAIC,MAAM,GAAG,EAAb;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAApB,EAAyBK,CAAC,EAA1B,EAA8B;AAC1B,gBAAIC,OAAO,GAAG,EAAd;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBD,cAAAA,OAAO,CAACE,IAAR,CAAad,GAAG,CAAEW,CAAD,GAAM,CAAN,GAAUE,CAAX,CAAhB;AACH;;AACDH,YAAAA,MAAM,CAACI,IAAP,CAAYF,OAAZ;AACH;;AACD,cAAI,KAAKG,YAAT,EAAuB;AACnB,gBAAIC,IAAI,GAAG,KAAKD,YAAL,CAAkBE,cAAlB,CAAiC,UAAjC,CAAX;AACA,gBAAIC,UAAU,GAAGR,MAAM,CAACD,MAAxB;AACAO,YAAAA,IAAI,CAACG,YAAL;AAAA;AAAA,gDAAiCC,QAAjC,CAA0CF,UAA1C,EAAsDR,MAAtD;AACH;AACJ;;AAEDW,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA/CwC,O;;;;;iBAEpB,I","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { ListViewCtrl2 } from '../../../game/components/listViewCtrl2';\nimport { GlobalConfig } from '../../../game/config/GlobalConfig';\nimport { modelMgr, observer } from '../../../game/App';\nimport { EventType } from '../../../EventType';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PetsComponent')\nexport class PetsComponent extends Component {\n    @property(Node)\n    pre_listView: Node = null;\n\n    start() {\n        // modelMgr.mainModel.checkcatReq();\n        observer.on(EventType.SOCKET_GETALL_CATS, this.updateSerCatsHandler, this);\n        this.updateSerCatsHandler();\n\n    }\n\n    protected onDestroy(): void {\n        observer.off(EventType.SOCKET_GETALL_CATS, this.updateSerCatsHandler, this);\n\n    }\n\n    private updateSerCatsHandler(){\n        let arr: any[] = modelMgr.configModel.commonConfigJson.Cat;\n        this.showZhongziList(arr);\n    }\n    protected onEnable(): void {\n        //排序逻辑\n        // let arr: any[] = modelMgr.configModel.commonConfigJson.Cat;\n        // this.showZhongziList(arr);\n    }\n    /**\n* \n*/\n    public showZhongziList(arr) {\n        let len = Math.ceil(arr.length / 3);\n        let grpArr = [];\n        for (let i = 0; i < len; i++) {\n            let temparr = [];\n            for (let j = 0; j < 3; j++) {\n                temparr.push(arr[(i) * 3 + j]);\n            }\n            grpArr.push(temparr);\n        }\n        if (this.pre_listView) {\n            let ctrl = this.pre_listView.getChildByName(\"listctrl\");\n            let spawnCount = grpArr.length;\n            ctrl.getComponent(ListViewCtrl2).initData(spawnCount, grpArr);\n        }\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n\n"]}