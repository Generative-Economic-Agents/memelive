{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/event_listeners.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","url","define","exports","require","module","__filename","__dirname","AWS","SequentialExecutor","DISCOVER_ENDPOINT","discoverEndpoint","EventListeners","Core","getOperationAuthtype","req","service","api","operations","operation","authtype","getIdentityType","config","signatureVersion","addNamedListeners","add","addAsync","VALIDATE_CREDENTIALS","done","identityType","getToken","err","response","error","util","code","getCredentials","message","VALIDATE_REGION","isGlobalEndpoint","dnsHostRegex","RegExp","region","Error","test","BUILD_IDEMPOTENCY_TOKENS","idempotentMembers","length","params","copy","i","iLen","uuid","v4","VALIDATE_PARAMETERS","rules","input","validation","paramValidation","ParamValidator","validate","COMPUTE_CHECKSUM","body","httpRequest","isNonStreamingPayload","Buffer","isBuffer","headers","httpChecksumRequired","computeChecksums","md5","crypto","COMPUTE_SHA256","haltHandlersOnError","getSignerClass","Signers","V4","indexOf","computeSha256","sha","SET_CONTENT_LENGTH","payloadMember","getRequestPayloadShape","undefined","string","byteLength","isStreaming","requiresLength","SET_HTTP_HOST","endpoint","host","SET_TRACE_ID","traceIdHeaderName","isNode","Object","hasOwnProperty","call","ENV_LAMBDA_FUNCTION_NAME","ENV_TRACE_ID","functionName","process","env","traceId","RESTART","retryable","HttpRequest","retryCount","maxRetries","addToHead","SIGN","token","SignerClass","signer","addAuthorization","e","credentials","date","getSkewCorrectedDate","getSigningName","signatureCache","setServiceClientId","_clientId","signedAt","VALIDATE_RESPONSE","resp","successfulResponse","data","ERROR","awsQueryCompatible","request","httpResponse","queryErrorCode","includes","split","SEND","_abortCallback","callback","httpResp","stream","operationName","on","onHeaders","statusCode","statusMessage","emit","streaming","HttpClient","streamsApiVersion","hasEventOutput","onReadable","read","onData","onEnd","didCallback","progress","onSendProgress","value","onReceiveProgress","errCode","hostname","executeSend","http","getInstance","httpOptions","handleRequest","timeDiff","HTTP_HEADERS","buffer","toBuffer","buffers","numBytes","dateHeader","Date","serverTime","parse","correctClockSkew","isClockSkewed","applyClockOffset","HTTP_DATA","chunk","total","loaded","push","HTTP_DONE","concat","FINALIZE_ERROR","retryableError","INVALIDATE_CREDENTIALS","expired","EXPIRED_SIGNATURE","match","CLOCK_SKEWED","clockSkewError","REDIRECT","Endpoint","path","redirect","RETRY_CHECK","redirectCount","maxRedirects","retryDelay","retryDelays","RESET_RETRY_STATE","delay","willRetry","setTimeout","CorePost","extractRequestId","ENOTFOUND_ERROR","isDNSError","errno","getSystemErrorName","port","originalError","Logger","LOG_REQUEST","logger","filterSensitiveLog","inputShape","shape","isSensitive","type","struct","each","subShapeName","subShape","prototype","members","list","arrayEach","index","member","map","key","buildMessage","time","getTime","delta","startTime","ansi","isTTY","status","censoredParams","inspect","serviceIdentifier","toString","lowerFirst","line","log","write","Json","svc","buildRequest","extractData","extractError","Rest","RestJson","unsetContentLength","RestXml","Query","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from './core';\nimport { __cjsMetaURL as _req0} from './sequential_executor';\nimport { __cjsMetaURL as _req1} from './discover_endpoint';\nimport { __cjsMetaURL as _req2} from 'util';\nimport { __cjsMetaURL as _req3} from './protocol/json';\nimport { __cjsMetaURL as _req4} from './protocol/rest';\nimport { __cjsMetaURL as _req5} from './protocol/rest_json';\nimport { __cjsMetaURL as _req6} from './protocol/rest_xml';\nimport { __cjsMetaURL as _req7} from './protocol/query';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var AWS = require('./core');\n var SequentialExecutor = require('./sequential_executor');\n var DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n /**\n  * The namespace used to register global event listeners for request building\n  * and sending.\n  */\n AWS.EventListeners = {\n   /**\n    * @!attribute VALIDATE_CREDENTIALS\n    *   A request listener that validates whether the request is being\n    *   sent with credentials.\n    *   Handles the {AWS.Request~validate 'validate' Request event}\n    *   @example Sending a request without validating credentials\n    *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n    *     request.removeListener('validate', listener);\n    *   @readonly\n    *   @return [Function]\n    * @!attribute VALIDATE_REGION\n    *   A request listener that validates whether the region is set\n    *   for a request.\n    *   Handles the {AWS.Request~validate 'validate' Request event}\n    *   @example Sending a request without validating region configuration\n    *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n    *     request.removeListener('validate', listener);\n    *   @readonly\n    *   @return [Function]\n    * @!attribute VALIDATE_PARAMETERS\n    *   A request listener that validates input parameters in a request.\n    *   Handles the {AWS.Request~validate 'validate' Request event}\n    *   @example Sending a request without validating parameters\n    *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n    *     request.removeListener('validate', listener);\n    *   @example Disable parameter validation globally\n    *     AWS.EventListeners.Core.removeListener('validate',\n    *       AWS.EventListeners.Core.VALIDATE_REGION);\n    *   @readonly\n    *   @return [Function]\n    * @!attribute SEND\n    *   A request listener that initiates the HTTP connection for a\n    *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n    *   @example Replacing the HTTP handler\n    *     var listener = AWS.EventListeners.Core.SEND;\n    *     request.removeListener('send', listener);\n    *     request.on('send', function(response) {\n    *       customHandler.send(response);\n    *     });\n    *   @return [Function]\n    *   @readonly\n    * @!attribute HTTP_DATA\n    *   A request listener that reads data from the HTTP connection in order\n    *   to build the response data.\n    *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n    *   Remove this handler if you are overriding the 'httpData' event and\n    *   do not want extra data processing and buffering overhead.\n    *   @example Disabling default data processing\n    *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n    *     request.removeListener('httpData', listener);\n    *   @return [Function]\n    *   @readonly\n    */\n   Core: {} /* doc hack */\n };\n\n /**\n  * @api private\n  */\n function getOperationAuthtype(req) {\n   if (!req.service.api.operations) {\n     return '';\n   }\n   var operation = req.service.api.operations[req.operation];\n   return operation ? operation.authtype : '';\n }\n\n /**\n  * @api private\n  */\n function getIdentityType(req) {\n   var service = req.service;\n\n   if (service.config.signatureVersion) {\n     return service.config.signatureVersion;\n   }\n\n   if (service.api.signatureVersion) {\n     return service.api.signatureVersion;\n   }\n\n   return getOperationAuthtype(req);\n }\n\n AWS.EventListeners = {\n   Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\n     addAsync(\n       'VALIDATE_CREDENTIALS', 'validate',\n       function VALIDATE_CREDENTIALS(req, done) {\n         if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\n\n         var identityType = getIdentityType(req);\n         if (identityType === 'bearer') {\n           req.service.config.getToken(function(err) {\n             if (err) {\n               req.response.error = AWS.util.error(err, {code: 'TokenError'});\n             }\n             done();\n           });\n           return;\n         }\n\n         req.service.config.getCredentials(function(err) {\n           if (err) {\n             req.response.error = AWS.util.error(err,\n               {\n                 code: 'CredentialsError',\n                 message: 'Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1'\n               }\n             );\n           }\n           done();\n         });\n     });\n\n     add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n       if (!req.service.isGlobalEndpoint) {\n         var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\n         if (!req.service.config.region) {\n           req.response.error = AWS.util.error(new Error(),\n             {code: 'ConfigError', message: 'Missing region in config'});\n         } else if (!dnsHostRegex.test(req.service.config.region)) {\n           req.response.error = AWS.util.error(new Error(),\n             {code: 'ConfigError', message: 'Invalid region in config'});\n         }\n       }\n     });\n\n     add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n       if (!req.service.api.operations) {\n         return;\n       }\n       var operation = req.service.api.operations[req.operation];\n       if (!operation) {\n         return;\n       }\n       var idempotentMembers = operation.idempotentMembers;\n       if (!idempotentMembers.length) {\n         return;\n       }\n       // creates a copy of params so user's param object isn't mutated\n       var params = AWS.util.copy(req.params);\n       for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n         if (!params[idempotentMembers[i]]) {\n           // add the member\n           params[idempotentMembers[i]] = AWS.util.uuid.v4();\n         }\n       }\n       req.params = params;\n     });\n\n     add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n       if (!req.service.api.operations) {\n         return;\n       }\n       var rules = req.service.api.operations[req.operation].input;\n       var validation = req.service.config.paramValidation;\n       new AWS.ParamValidator(validation).validate(rules, req.params);\n     });\n\n     add('COMPUTE_CHECKSUM', 'afterBuild', function COMPUTE_CHECKSUM(req) {\n       if (!req.service.api.operations) {\n         return;\n       }\n       var operation = req.service.api.operations[req.operation];\n       if (!operation) {\n         return;\n       }\n       var body = req.httpRequest.body;\n       var isNonStreamingPayload = body && (AWS.util.Buffer.isBuffer(body) || typeof body === 'string');\n       var headers = req.httpRequest.headers;\n       if (\n         operation.httpChecksumRequired &&\n         req.service.config.computeChecksums &&\n         isNonStreamingPayload &&\n         !headers['Content-MD5']\n       ) {\n         var md5 = AWS.util.crypto.md5(body, 'base64');\n         headers['Content-MD5'] = md5;\n       }\n     });\n\n     addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n       req.haltHandlersOnError();\n       if (!req.service.api.operations) {\n         return;\n       }\n       var operation = req.service.api.operations[req.operation];\n       var authtype = operation ? operation.authtype : '';\n       if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\n       if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n         var body = req.httpRequest.body || '';\n         if (authtype.indexOf('unsigned-body') >= 0) {\n           req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n           return done();\n         }\n         AWS.util.computeSha256(body, function(err, sha) {\n           if (err) {\n             done(err);\n           }\n           else {\n             req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n             done();\n           }\n         });\n       } else {\n         done();\n       }\n     });\n\n     add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n       var authtype = getOperationAuthtype(req);\n       var payloadMember = AWS.util.getRequestPayloadShape(req);\n       if (req.httpRequest.headers['Content-Length'] === undefined) {\n         try {\n           var length = AWS.util.string.byteLength(req.httpRequest.body);\n           req.httpRequest.headers['Content-Length'] = length;\n         } catch (err) {\n           if (payloadMember && payloadMember.isStreaming) {\n             if (payloadMember.requiresLength) {\n               //streaming payload requires length(s3, glacier)\n               throw err;\n             } else if (authtype.indexOf('unsigned-body') >= 0) {\n               //unbounded streaming payload(lex, mediastore)\n               req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n               return;\n             } else {\n               throw err;\n             }\n           }\n           throw err;\n         }\n       }\n     });\n\n     add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n       req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n     });\n\n     add('SET_TRACE_ID', 'afterBuild', function SET_TRACE_ID(req) {\n       var traceIdHeaderName = 'X-Amzn-Trace-Id';\n       if (AWS.util.isNode() && !Object.hasOwnProperty.call(req.httpRequest.headers, traceIdHeaderName)) {\n         var ENV_LAMBDA_FUNCTION_NAME = 'AWS_LAMBDA_FUNCTION_NAME';\n         var ENV_TRACE_ID = '_X_AMZN_TRACE_ID';\n         var functionName = process.env[ENV_LAMBDA_FUNCTION_NAME];\n         var traceId = process.env[ENV_TRACE_ID];\n         if (\n           typeof functionName === 'string' &&\n           functionName.length > 0 &&\n           typeof traceId === 'string' &&\n           traceId.length > 0\n         ) {\n           req.httpRequest.headers[traceIdHeaderName] = traceId;\n         }\n       }\n     });\n\n     add('RESTART', 'restart', function RESTART() {\n       var err = this.response.error;\n       if (!err || !err.retryable) return;\n\n       this.httpRequest = new AWS.HttpRequest(\n         this.service.endpoint,\n         this.service.region\n       );\n\n       if (this.response.retryCount < this.service.config.maxRetries) {\n         this.response.retryCount++;\n       } else {\n         this.response.error = null;\n       }\n     });\n\n     var addToHead = true;\n     addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n\n     addAsync('SIGN', 'sign', function SIGN(req, done) {\n       var service = req.service;\n       var identityType = getIdentityType(req);\n       if (!identityType || identityType.length === 0) return done(); // none\n\n       if (identityType === 'bearer') {\n         service.config.getToken(function (err, token) {\n           if (err) {\n             req.response.error = err;\n             return done();\n           }\n\n           try {\n             var SignerClass = service.getSignerClass(req);\n             var signer = new SignerClass(req.httpRequest);\n             signer.addAuthorization(token);\n           } catch (e) {\n             req.response.error = e;\n           }\n           done();\n         });\n       } else {\n         service.config.getCredentials(function (err, credentials) {\n           if (err) {\n             req.response.error = err;\n             return done();\n           }\n\n           try {\n             var date = service.getSkewCorrectedDate();\n             var SignerClass = service.getSignerClass(req);\n             var operations = req.service.api.operations || {};\n             var operation = operations[req.operation];\n             var signer = new SignerClass(req.httpRequest,\n               service.getSigningName(req),\n               {\n                 signatureCache: service.config.signatureCache,\n                 operation: operation,\n                 signatureVersion: service.api.signatureVersion\n               });\n             signer.setServiceClientId(service._clientId);\n\n             // clear old authorization headers\n             delete req.httpRequest.headers['Authorization'];\n             delete req.httpRequest.headers['Date'];\n             delete req.httpRequest.headers['X-Amz-Date'];\n\n             // add new authorization\n             signer.addAuthorization(credentials, date);\n             req.signedAt = date;\n           } catch (e) {\n             req.response.error = e;\n           }\n           done();\n         });\n\n       }\n     });\n\n     add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n       if (this.service.successfulResponse(resp, this)) {\n         resp.data = {};\n         resp.error = null;\n       } else {\n         resp.data = null;\n         resp.error = AWS.util.error(new Error(),\n           {code: 'UnknownError', message: 'An unknown error occurred.'});\n       }\n     });\n\n     add('ERROR', 'error', function ERROR(err, resp) {\n       var awsQueryCompatible = resp.request.service.api.awsQueryCompatible;\n       if (awsQueryCompatible) {\n         var headers = resp.httpResponse.headers;\n         var queryErrorCode = headers ? headers['x-amzn-query-error'] : undefined;\n         if (queryErrorCode && queryErrorCode.includes(';')) {\n           resp.error.code = queryErrorCode.split(';')[0];\n         }\n       }\n     }, true);\n\n     addAsync('SEND', 'send', function SEND(resp, done) {\n       resp.httpResponse._abortCallback = done;\n       resp.error = null;\n       resp.data = null;\n\n       function callback(httpResp) {\n         resp.httpResponse.stream = httpResp;\n         var stream = resp.request.httpRequest.stream;\n         var service = resp.request.service;\n         var api = service.api;\n         var operationName = resp.request.operation;\n         var operation = api.operations[operationName] || {};\n\n         httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n           resp.request.emit(\n             'httpHeaders',\n             [statusCode, headers, resp, statusMessage]\n           );\n\n           if (!resp.httpResponse.streaming) {\n             if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\n               // if we detect event streams, we're going to have to\n               // return the stream immediately\n               if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                 // skip reading the IncomingStream\n                 resp.request.emit('httpDone');\n                 done();\n                 return;\n               }\n\n               httpResp.on('readable', function onReadable() {\n                 var data = httpResp.read();\n                 if (data !== null) {\n                   resp.request.emit('httpData', [data, resp]);\n                 }\n               });\n             } else { // legacy streams API\n               httpResp.on('data', function onData(data) {\n                 resp.request.emit('httpData', [data, resp]);\n               });\n             }\n           }\n         });\n\n         httpResp.on('end', function onEnd() {\n           if (!stream || !stream.didCallback) {\n             if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\n               // don't concatenate response chunks when streaming event stream data when response is successful\n               return;\n             }\n             resp.request.emit('httpDone');\n             done();\n           }\n         });\n       }\n\n       function progress(httpResp) {\n         httpResp.on('sendProgress', function onSendProgress(value) {\n           resp.request.emit('httpUploadProgress', [value, resp]);\n         });\n\n         httpResp.on('receiveProgress', function onReceiveProgress(value) {\n           resp.request.emit('httpDownloadProgress', [value, resp]);\n         });\n       }\n\n       function error(err) {\n         if (err.code !== 'RequestAbortedError') {\n           var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n           err = AWS.util.error(err, {\n             code: errCode,\n             region: resp.request.httpRequest.region,\n             hostname: resp.request.httpRequest.endpoint.hostname,\n             retryable: true\n           });\n         }\n         resp.error = err;\n         resp.request.emit('httpError', [resp.error, resp], function() {\n           done();\n         });\n       }\n\n       function executeSend() {\n         var http = AWS.HttpClient.getInstance();\n         var httpOptions = resp.request.service.config.httpOptions || {};\n         try {\n           var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\n                                           callback, error);\n           progress(stream);\n         } catch (err) {\n           error(err);\n         }\n       }\n       var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n       if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\n         this.emit('sign', [this], function(err) {\n           if (err) done(err);\n           else executeSend();\n         });\n       } else {\n         executeSend();\n       }\n     });\n\n     add('HTTP_HEADERS', 'httpHeaders',\n         function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n       resp.httpResponse.statusCode = statusCode;\n       resp.httpResponse.statusMessage = statusMessage;\n       resp.httpResponse.headers = headers;\n       resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n       resp.httpResponse.buffers = [];\n       resp.httpResponse.numBytes = 0;\n       var dateHeader = headers.date || headers.Date;\n       var service = resp.request.service;\n       if (dateHeader) {\n         var serverTime = Date.parse(dateHeader);\n         if (service.config.correctClockSkew\n             && service.isClockSkewed(serverTime)) {\n           service.applyClockOffset(serverTime);\n         }\n       }\n     });\n\n     add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n       if (chunk) {\n         if (AWS.util.isNode()) {\n           resp.httpResponse.numBytes += chunk.length;\n\n           var total = resp.httpResponse.headers['content-length'];\n           var progress = { loaded: resp.httpResponse.numBytes, total: total };\n           resp.request.emit('httpDownloadProgress', [progress, resp]);\n         }\n\n         resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n       }\n     });\n\n     add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n       // convert buffers array into single buffer\n       if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n         var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n         resp.httpResponse.body = body;\n       }\n       delete resp.httpResponse.numBytes;\n       delete resp.httpResponse.buffers;\n     });\n\n     add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n       if (resp.httpResponse.statusCode) {\n         resp.error.statusCode = resp.httpResponse.statusCode;\n         if (resp.error.retryable === undefined) {\n           resp.error.retryable = this.service.retryableError(resp.error, this);\n         }\n       }\n     });\n\n     add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n       if (!resp.error) return;\n       switch (resp.error.code) {\n         case 'RequestExpired': // EC2 only\n         case 'ExpiredTokenException':\n         case 'ExpiredToken':\n           resp.error.retryable = true;\n           resp.request.service.config.credentials.expired = true;\n       }\n     });\n\n     add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n       var err = resp.error;\n       if (!err) return;\n       if (typeof err.code === 'string' && typeof err.message === 'string') {\n         if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n           resp.error.retryable = true;\n         }\n       }\n     });\n\n     add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n       if (!resp.error) return;\n       if (this.service.clockSkewError(resp.error)\n           && this.service.config.correctClockSkew) {\n         resp.error.retryable = true;\n       }\n     });\n\n     add('REDIRECT', 'retry', function REDIRECT(resp) {\n       if (resp.error && resp.error.statusCode >= 300 &&\n           resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n         this.httpRequest.endpoint =\n           new AWS.Endpoint(resp.httpResponse.headers['location']);\n         this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n         this.httpRequest.path = this.httpRequest.endpoint.path;\n         resp.error.redirect = true;\n         resp.error.retryable = true;\n       }\n     });\n\n     add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n       if (resp.error) {\n         if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n           resp.error.retryDelay = 0;\n         } else if (resp.retryCount < resp.maxRetries) {\n           resp.error.retryDelay = this.service.retryDelays(resp.retryCount, resp.error) || 0;\n         }\n       }\n     });\n\n     addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n       var delay, willRetry = false;\n\n       if (resp.error) {\n         delay = resp.error.retryDelay || 0;\n         if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n           resp.retryCount++;\n           willRetry = true;\n         } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n           resp.redirectCount++;\n           willRetry = true;\n         }\n       }\n\n       // delay < 0 is a signal from customBackoff to skip retries\n       if (willRetry && delay >= 0) {\n         resp.error = null;\n         setTimeout(done, delay);\n       } else {\n         done();\n       }\n     });\n   }),\n\n   CorePost: new SequentialExecutor().addNamedListeners(function(add) {\n     add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n     add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n\n     add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n       function isDNSError(err) {\n         return err.errno === 'ENOTFOUND' ||\n           typeof err.errno === 'number' &&\n           typeof AWS.util.getSystemErrorName === 'function' &&\n           ['EAI_NONAME', 'EAI_NODATA'].indexOf(AWS.util.getSystemErrorName(err.errno) >= 0);\n       }\n       if (err.code === 'NetworkingError' && isDNSError(err)) {\n         var message = 'Inaccessible host: `' + err.hostname + '\\' at port `' + err.port +\n           '\\'. This service may not be available in the `' + err.region +\n           '\\' region.';\n         this.response.error = AWS.util.error(new Error(message), {\n           code: 'UnknownEndpoint',\n           region: err.region,\n           hostname: err.hostname,\n           retryable: true,\n           originalError: err\n         });\n       }\n     });\n   }),\n\n   Logger: new SequentialExecutor().addNamedListeners(function(add) {\n     add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n       var req = resp.request;\n       var logger = req.service.config.logger;\n       if (!logger) return;\n       function filterSensitiveLog(inputShape, shape) {\n         if (!shape) {\n           return shape;\n         }\n         if (inputShape.isSensitive) {\n           return '***SensitiveInformation***';\n         }\n         switch (inputShape.type) {\n           case 'structure':\n             var struct = {};\n             AWS.util.each(shape, function(subShapeName, subShape) {\n               if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                 struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n               } else {\n                 struct[subShapeName] = subShape;\n               }\n             });\n             return struct;\n           case 'list':\n             var list = [];\n             AWS.util.arrayEach(shape, function(subShape, index) {\n               list.push(filterSensitiveLog(inputShape.member, subShape));\n             });\n             return list;\n           case 'map':\n             var map = {};\n             AWS.util.each(shape, function(key, value) {\n               map[key] = filterSensitiveLog(inputShape.value, value);\n             });\n             return map;\n           default:\n             return shape;\n         }\n       }\n\n       function buildMessage() {\n         var time = resp.request.service.getSkewCorrectedDate().getTime();\n         var delta = (time - req.startTime.getTime()) / 1000;\n         var ansi = logger.isTTY ? true : false;\n         var status = resp.httpResponse.statusCode;\n         var censoredParams = req.params;\n         if (\n           req.service.api.operations &&\n               req.service.api.operations[req.operation] &&\n               req.service.api.operations[req.operation].input\n         ) {\n           var inputShape = req.service.api.operations[req.operation].input;\n           censoredParams = filterSensitiveLog(inputShape, req.params);\n         }\n         var params = require('util').inspect(censoredParams, true, null);\n         var message = '';\n         if (ansi) message += '\\x1B[33m';\n         message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n         message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n         if (ansi) message += '\\x1B[0;1m';\n         message += ' ' + AWS.util.string.lowerFirst(req.operation);\n         message += '(' + params + ')';\n         if (ansi) message += '\\x1B[0m';\n         return message;\n       }\n\n       var line = buildMessage();\n       if (typeof logger.log === 'function') {\n         logger.log(line);\n       } else if (typeof logger.write === 'function') {\n         logger.write(line + '\\n');\n       }\n     });\n   }),\n\n   Json: new SequentialExecutor().addNamedListeners(function(add) {\n     var svc = require('./protocol/json');\n     add('BUILD', 'build', svc.buildRequest);\n     add('EXTRACT_DATA', 'extractData', svc.extractData);\n     add('EXTRACT_ERROR', 'extractError', svc.extractError);\n   }),\n\n   Rest: new SequentialExecutor().addNamedListeners(function(add) {\n     var svc = require('./protocol/rest');\n     add('BUILD', 'build', svc.buildRequest);\n     add('EXTRACT_DATA', 'extractData', svc.extractData);\n     add('EXTRACT_ERROR', 'extractError', svc.extractError);\n   }),\n\n   RestJson: new SequentialExecutor().addNamedListeners(function(add) {\n     var svc = require('./protocol/rest_json');\n     add('BUILD', 'build', svc.buildRequest);\n     add('EXTRACT_DATA', 'extractData', svc.extractData);\n     add('EXTRACT_ERROR', 'extractError', svc.extractError);\n     add('UNSET_CONTENT_LENGTH', 'afterBuild', svc.unsetContentLength);\n   }),\n\n   RestXml: new SequentialExecutor().addNamedListeners(function(add) {\n     var svc = require('./protocol/rest_xml');\n     add('BUILD', 'build', svc.buildRequest);\n     add('EXTRACT_DATA', 'extractData', svc.extractData);\n     add('EXTRACT_ERROR', 'extractError', svc.extractError);\n   }),\n\n   Query: new SequentialExecutor().addNamedListeners(function(add) {\n     var svc = require('./protocol/query');\n     add('BUILD', 'build', svc.buildRequest);\n     add('EXTRACT_DATA', 'extractData', svc.extractData);\n     add('EXTRACT_ERROR', 'extractError', svc.extractError);\n   })\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, () => ({\n  './core': _req,\n  './sequential_executor': _req0,\n  './discover_endpoint': _req1,\n  'util': _req2,\n  './protocol/json': _req3,\n  './protocol/rest': _req4,\n  './protocol/rest_json': _req5,\n  './protocol/rest_xml': _req6,\n  './protocol/query': _req7,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}