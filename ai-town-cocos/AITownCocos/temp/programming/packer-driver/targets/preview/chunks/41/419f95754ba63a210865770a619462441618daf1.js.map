{"version":3,"sources":["file:///Users/feiwang/AITown/AITownCocos/assets/src/login/login.ts"],"names":["_decorator","Component","Node","director","view","ProgressBar","EditBox","tizhuanMgr","App","appInit","mduManger","modelMgr","observer","socket","mGameConfig","WebUtils","GlobalConfig","network","EventType","Log","RolePartIcon","loginModel","ccclass","property","treePos","treeAdapt","rabbit_x","MAX_LENGTH","cloudPos","cloudAdapt","BgStartPos","x","y","CowBabyPos","CowBlackPos","CowPos","TAG","Index","type","constructor","currentIndex","currentPartName","frameTime15","frameTime10","starIndex","cowIndex","cowBabyIndex","cowBlackIndex","npcBasePartInfo","body","hair","sexy","index","pants","shirt","rabbit_index","addFrameRabbit","start","s","hideloading","DeviceW","getVisibleSize","width","DeviceH","height","DesginW","DesginH","goLogin","update","dt","starBg","setPosition","cow","rabbit","cowBaby","getPosition","cowBabyRoot","cowBlack","cowBlackRoot","cloud","forEach","currentCloud","trees","tree","getlogin","json","LoginRequest","requestId","command","data","avatar","clientOs","loginType","idString","localStorage","getItem","Date","now","toString","setItem","instance","userId","nickName","playername","name","password","timeZone","sendWebSocketBinary","onDestroy","off","SOCKET_ONOPEN","SOCKET_ONMESSAGE","hasLogin","da","code","LoginData","character","player","charater","preloadScene","completedCount","totalCount","item","scheduleOnce","log","checkEntrance","gotoHome","edit_name","string","loading","active","hasInitGame","app","init","configModel","loadResDir","on","setCurrentPart","event","getResouceImg","icon"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, director, Label, view, resources, ProgressBar, EditBox, Sprite, randomRangeInt } from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { tizhuanMgr } from \"../../src/manager/TiaozhuanManager\";\nimport { showMsg2 } from \"../../src/core/message/MessageManager\";\nimport App, { appInit, mduManger, modelMgr, observer, socket } from \"../../src/game/App\";\nimport mGameConfig from \"../../src/utils/MGameConfig\";\nimport WebUtils from \"../../src/utils/WebUtils\";\nimport { GlobalConfig } from \"../../src/game/config/GlobalConfig\";\nimport { network } from \"../../src/model/RequestData\";\nimport { EventType } from \"../../src/EventType\";\nimport Log from '../../src/utils/LogUtils'\nimport { NPCPartBaseDataMap } from \"../NPC/NPCControl\";\nimport { RolePartIcon } from \"../StaticUtils/NPCConfig\";\nimport loginModel from \"../model/loginModel\";\nexport let Axios;\nexport let NeteaseGame;\nexport let yyygame;\nconst treePos = -480\nconst treeAdapt = [\n  2.75,\n  2.75,\n  2.5,\n  2.5,\n  2,\n  2,\n]\n\nconst rabbit_x =[\n  0,\n  -66,\n  -133,\n  -200,\n]\n\nexport const MAX_LENGTH = 1\n\nconst cloudPos = -620\nconst cloudAdapt = [\n  1.5,\n  1,\n  1.75,\n  0.5\n]\n\nconst BgStartPos = [\n  {x: 35, y: -225},\n  {x: -956, y: -225},\n  {x: -1945, y: -225},\n  {x: -2940, y: -225},\n  {x: 35, y: 330},\n  {x: -956, y: 330},\n  {x: -1945, y: 330},\n  {x: -2940, y: 330},\n]\n\nconst CowBabyPos = [\n  {x: 0, y: 0},\n  {x: -25, y: 0},\n  {x: -54, y: 0},\n  {x: -80, y: 0},\n  {x: -80, y: 31},\n  {x: -54, y: 31},\n  {x: -25, y: 31},\n  {x: 0, y: 31},\n]\n\nconst CowBlackPos = [\n  {x: 0, y: 0},\n  {x: -50, y: 0},\n  {x: -100, y: 0},\n  {x: -150, y: 0},\n  {x: -150, y: -62},\n  {x: -100, y: -62},\n  {x: -50, y: -62},\n  {x: 0, y: -62},\n]\n\nconst CowPos = [\n  0,\n  -24,\n  -47,\n  -72\n]\n\n/**\n * 1.登录验证/登录逻辑\n * 2.登录页/loading页\n * 3.活动未开启/开启/结束状态处理\n * 4.游戏首接口home 接口\n * 5.微信qq 分享文案\n */\nconst TAG = 'Index'\n@ccclass(\"Index\")\nexport default class Index extends Component {\n\n  @property(Node)\n  public loginview: Node;\n  @property({ type: ProgressBar })\n  prg: ProgressBar | null = null;\n  @property(EditBox)\n  public edit_name: EditBox = null;\n\n  @property(Node)\n  public icon: Node;\n\n  @property(Node)\n  public loginView: Node;\n\n  @property(Node)\n  public createRoleView: Node;\n\n  @property(Node)\n  public infoView: Node;\n\n  @property(Node)\n  public starBg: Node;\n\n  @property(Node)\n  public cow: Node;\n\n  @property(Node)\n  public cowBaby: Node;\n\n  @property(Node)\n  public cowBlack: Node;\n\n  @property(Node)\n  public cowBabyRoot: Node;\n\n  @property(Node)\n  public cowBlackRoot: Node;\n\n  @property({type:[Node]})\n  public cloud:Node[] = [];\n\n  @property({type:[Node]})\n  public trees:Node[] = [];\n\n  @property(Node)\n  public rabbit: Node;\n\n  @property(Node)\n  public loading: Node;\n\n  //人物选择的部分Icon信息\n  currentIndex: 0\n  currentPartName: string = 'hair'\n  frameTime15 = 0\n\n  frameTime10 = 0\n\n  starIndex: number = 0 //星星闪动的index\n  cowIndex: number = 0 //奶牛的index\n\n  cowBabyIndex: number = 0 //小牛的index\n  cowBlackIndex: number = 0 //走路的奶牛的index\n  npcBasePartInfo: NPCPartBaseDataMap = {\n    body: 0,\n    hair: {\n        sexy: 'man',\n        index: 0\n    },\n    pants: 0,\n    shirt: 0\n  }\n  rabbit_index: number = 0;\n  addFrameRabbit: number = 0;\n\n  constructor() {\n    super();\n  }\n  async start() {\n    //this.loginview.active = true;\n    let s = this;\n    tizhuanMgr.hideloading();\n    mGameConfig.DeviceW = view.getVisibleSize().width;\n    mGameConfig.DeviceH = view.getVisibleSize().height;\n    mGameConfig.DesginW = view.getVisibleSize().width;\n    mGameConfig.DesginH = view.getVisibleSize().height;\n    await this.goLogin()\n  }\n\n  protected update(dt: number): void {\n      this.frameTime15 = this.frameTime15 + dt\n      this.frameTime10 = this.frameTime10 + dt\n      this.addFrameRabbit = this.addFrameRabbit + dt\n      if(this.frameTime15 >= 0.15){\n        this.starBg.setPosition(BgStartPos[this.starIndex].x, BgStartPos[this.starIndex].y)\n        this.starIndex = this.starIndex >= 7 ? 0 : this.starIndex + 1\n\n        this.cow.setPosition(CowPos[this.cowIndex], 0)\n        this.cowIndex = this.cowIndex >= 3 ? 0 : this.cowIndex + 1\n\n        this.frameTime15 = 0\n      }\n\n      if(this.addFrameRabbit >= 0.10){\n\n        this.rabbit.setPosition(rabbit_x[this.rabbit_index], 0)\n        //this.cow.setPosition(cow_x[this.flower_cow_index], 0)\n        this.rabbit_index = this.rabbit_index >= 3 ? 0 : this.rabbit_index + 1\n\n        this.addFrameRabbit = 0\n    }\n\n      if(this.frameTime10 >= 0.3){\n        this.cowBaby.setPosition(CowBabyPos[this.cowBabyIndex].x, CowBabyPos[this.cowBabyIndex].y)\n        this.cowBabyIndex = this.cowBabyIndex >= 7 ? 0 : this.cowBabyIndex + 1\n        if(this.cowBaby.getPosition().y > 0){\n          this.cowBabyRoot.setPosition(this.cowBabyRoot.getPosition().x, this.cowBabyRoot.getPosition().y + 5)\n        }else{\n          this.cowBabyRoot.setPosition(this.cowBabyRoot.getPosition().x, this.cowBabyRoot.getPosition().y - 5)\n        }\n\n        this.cowBlack.setPosition(CowBlackPos[this.cowBlackIndex].x, CowBlackPos[this.cowBlackIndex].y)\n        this.cowBlackIndex = this.cowBlackIndex >= 7 ? 0 : this.cowBlackIndex + 1\n        if(this.cowBlack.getPosition().y < 0){\n          this.cowBlackRoot.setPosition(this.cowBlackRoot.getPosition().x - 5, this.cowBlackRoot.getPosition().y)\n        }else{\n          this.cowBlackRoot.setPosition(this.cowBlackRoot.getPosition().x + 5, this.cowBlackRoot.getPosition().y)\n        }\n\n        this.frameTime10 = 0\n      }\n\n      this.cloud.forEach((currentCloud, index)=>{\n        if(currentCloud.getPosition().x < cloudPos){\n          currentCloud.setPosition(-cloudPos, currentCloud.getPosition().y)\n        }\n        currentCloud.setPosition(currentCloud.getPosition().x - cloudAdapt[index], currentCloud.getPosition().y)\n      })\n\n\n      this.trees.forEach((tree, index)=>{\n        if(tree.getPosition().x > -treePos){\n            tree.setPosition(treePos, tree.getPosition().y)\n        }\n        tree.setPosition(tree.getPosition().x + treeAdapt[index], tree.getPosition().y)\n      })\n  }\n\n\n\n  public async getlogin() {\n    let json = new network.LoginRequest();\n    json.requestId = 0;\n    json.type = 1;\n    json.command = 10000;\n    json.data.avatar = \"\";\n    json.data.clientOs = \"\";\n    json.data.loginType = 0;\n    let idString\n    if(localStorage.getItem('visitor')){\n      idString = localStorage.getItem('visitor')\n    }else{\n      idString = Date.now().toString();\n      localStorage.setItem('visitor', idString)\n    }\n    GlobalConfig.instance.userId = GlobalConfig.instance.nickName = GlobalConfig.instance.playername = idString\n    json.data.name = GlobalConfig.instance.playername;\n    json.data.nickName = GlobalConfig.instance.nickName;\n    json.data.userId = GlobalConfig.instance.userId;\n    json.data.password = \"123\";\n    json.data.timeZone = 0;\n    socket.sendWebSocketBinary(json);\n    //this.loading.active = true\n  }\n  public onDestroy() {\n    observer.off(EventType.SOCKET_ONOPEN, this.getlogin, this);\n    observer.off(EventType.SOCKET_ONMESSAGE, this.hasLogin, this);\n  }\n\n\n  public hasLogin(da: any) {\n    let data: network.InetwarkResponseData = da.data;\n    if (data && data.command == 10000 && data.code == 0) {\n      //loginModel.character = data.player.character \n      GlobalConfig.instance.hasLogin = true;\n      GlobalConfig.instance.LoginData = data as network.LoginResponse;\n      loginModel.character = GlobalConfig.instance.LoginData.data.player.charater\n      //显示loading页\n      //this.loginview.active = false;\n      //this.loadingview.active = true;\n      //预加载场景并获得加载进度\n\n      director.preloadScene('town', (completedCount, totalCount, item) => {\n        //可以把进度数据打出来\n        //this.prg?.progress && (this.prg.progress = completedCount / totalCount);\n\n      }, () => {\n        this.scheduleOnce(() => {\n          Log.log(TAG, 'Enter Game HomePage')\n          \n          tizhuanMgr.checkEntrance();\n        }, 0);\n      });\n    }\n  }\n\n\n\n  public gotoHome() {\n    if (this.edit_name.string) {\n      GlobalConfig.instance.nickName = GlobalConfig.instance.playername = GlobalConfig.instance.userId = this.edit_name.string;\n    }\n    return;\n  }\n  /**\n   * 按钮登录点击，\n   * @returns \n   */\n  public async goLogin() {\n    if (!this.edit_name.string) {\n      //showMsg2(\"Please enter your email account.\");\n      //return;\n    }\n    this.loading.active = true\n    if (GlobalConfig.instance.hasInitGame == false) {\n      // const debounceThings = WebUtils.debounce(()=>{\n        let app = new App();\n        app.init();\n        appInit(app);\n        Log.log(TAG, 'main init start ...')\n        mduManger.start();\n        modelMgr.configModel.loadResDir();\n        observer.on(EventType.SOCKET_ONOPEN, this.getlogin, this);\n        observer.on(EventType.SOCKET_ONMESSAGE, this.hasLogin, this);\n      // }, 2)\n      // debounceThings()\n    }\n  }\n\n  setCurrentPart(data, event){\n    if(this.currentIndex + data > MAX_LENGTH || this.currentIndex + data < 0){\n      return\n    }\n    this.currentIndex = this.currentIndex + data\n    WebUtils.getResouceImg(RolePartIcon[this.currentPartName][this.currentIndex], this.icon)\n  }\n\n\n\n}\n"]}