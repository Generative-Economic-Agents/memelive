{"version":3,"sources":["file:///Users/feiwang/cutepet/node_modules/aws-sdk/lib/region_config.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","url","define","exports","require","module","__filename","__dirname","util","regionConfig","generateRegionPrefix","region","parts","split","length","slice","join","derivedKeys","service","config","regionPrefix","endpointPrefix","api","map","item","applyConfig","each","key","value","undefined","configureEndpoint","keys","useFipsEndpoint","useDualstackEndpoint","i","rules","dualstackFipsRules","fipsRules","dualstackRules","Object","prototype","hasOwnProperty","call","patterns","isGlobalEndpoint","globalEndpoint","signingRegion","signatureVersion","useBearer","assign","getEndpointSuffix","regionRegexes","defaultSuffix","regexes","regionPattern","RegExp","dnsSuffix","test","_cjsExports","_configureEndpoint","_getEndpointSuffix"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from './util';\nimport { __cjsMetaURL as _req0} from './region_config_data.json';\nlet _cjsExports;\nlet _configureEndpoint;\nlet _getEndpointSuffix;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var util = require('./util');\n var regionConfig = require('./region_config_data.json');\n\n function generateRegionPrefix(region) {\n   if (!region) return null;\n   var parts = region.split('-');\n   if (parts.length < 3) return null;\n   return parts.slice(0, parts.length - 2).join('-') + '-*';\n }\n\n function derivedKeys(service) {\n   var region = service.config.region;\n   var regionPrefix = generateRegionPrefix(region);\n   var endpointPrefix = service.api.endpointPrefix;\n\n   return [\n     [region, endpointPrefix],\n     [regionPrefix, endpointPrefix],\n     [region, '*'],\n     [regionPrefix, '*'],\n     ['*', endpointPrefix],\n     [region, 'internal-*'],\n     ['*', '*']\n   ].map(function(item) {\n     return item[0] && item[1] ? item.join('/') : null;\n   });\n }\n\n function applyConfig(service, config) {\n   util.each(config, function(key, value) {\n     if (key === 'globalEndpoint') return;\n     if (service.config[key] === undefined || service.config[key] === null) {\n       service.config[key] = value;\n     }\n   });\n }\n\n function configureEndpoint(service) {\n   var keys = derivedKeys(service);\n   var useFipsEndpoint = service.config.useFipsEndpoint;\n   var useDualstackEndpoint = service.config.useDualstackEndpoint;\n   for (var i = 0; i < keys.length; i++) {\n     var key = keys[i];\n     if (!key) continue;\n\n     var rules = useFipsEndpoint\n       ? useDualstackEndpoint\n         ? regionConfig.dualstackFipsRules\n         : regionConfig.fipsRules\n       : useDualstackEndpoint\n       ? regionConfig.dualstackRules\n       : regionConfig.rules;\n\n     if (Object.prototype.hasOwnProperty.call(rules, key)) {\n       var config = rules[key];\n       if (typeof config === 'string') {\n         config = regionConfig.patterns[config];\n       }\n\n       // set global endpoint\n       service.isGlobalEndpoint = !!config.globalEndpoint;\n       if (config.signingRegion) {\n         service.signingRegion = config.signingRegion;\n       }\n\n       // signature version\n       if (!config.signatureVersion) {\n         // Note: config is a global object and should not be mutated here.\n         // However, we are retaining this line for backwards compatibility.\n         // The non-v4 signatureVersion will be set in a copied object below.\n         config.signatureVersion = 'v4';\n       }\n\n       var useBearer = (service.api && service.api.signatureVersion) === 'bearer';\n\n       // merge config\n       applyConfig(service, Object.assign(\n         {},\n         config,\n         { signatureVersion: useBearer ? 'bearer' : config.signatureVersion }\n       ));\n       return;\n     }\n   }\n }\n\n function getEndpointSuffix(region) {\n   var regionRegexes = {\n     '^(us|eu|ap|sa|ca|me)\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com',\n     '^cn\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com.cn',\n     '^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com',\n     '^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$': 'c2s.ic.gov',\n     '^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$': 'sc2s.sgov.gov'\n   };\n   var defaultSuffix = 'amazonaws.com';\n   var regexes = Object.keys(regionRegexes);\n   for (var i = 0; i < regexes.length; i++) {\n     var regionPattern = RegExp(regexes[i]);\n     var dnsSuffix = regionRegexes[regexes[i]];\n     if (regionPattern.test(region)) return dnsSuffix;\n   }\n   return defaultSuffix;\n }\n\n /**\n  * @api private\n  */\n module.exports = {\n   configureEndpoint: configureEndpoint,\n   getEndpointSuffix: getEndpointSuffix,\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_configureEndpoint = module.exports.configureEndpoint;\n_getEndpointSuffix = module.exports.getEndpointSuffix;\n\n}, () => ({\n  './util': _req,\n  './region_config_data.json': _req0,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}