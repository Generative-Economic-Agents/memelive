{"version":3,"sources":["file:///Users/feiwang/workSpace/AITown/cutepet/assets/src/NPC/NPCControl.ts"],"names":["_decorator","Component","input","Input","Node","NPCDirect","ccclass","property","NewComponent","keyDown","currentDirectKey","npcDisplayInfo","hair","pants","shirt","start","setNPCDisplay","on","EventType","KEY_DOWN","event","setNPCMoveDirect","keyCode","KEY_UP","update","deltaTime","setMoveSprite","setNPCDisplayBase","setPosition","key","npcRoot","getPosition","x","directPos","setNPCPosition","originPos","npc","offsetX","y","offsetY"],"mappings":"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","sourcesContent":["import { _decorator, Component, Event, EventKeyboard, input, Input, KeyCode, Node, sys, System, SystemEvent } from 'cc';\nimport { NPCDirect, NPCDisplayInfo } from '../StaticUtils/KeyCodeUtils';\nconst { ccclass, property } = _decorator;\n\n\n\n@ccclass('NewComponent')\nexport class NewComponent extends Component {\n    @property(Node)\n    public npcRoot!: Node;\n    @property(Node)\n    public npc!: Node;\n\n    @property(Node)\n    public hair!: Node;\n\n    @property(Node)\n    public pants!: Node;\n\n    @property(Node)\n    public shirt!: Node;\n\n    keyDown: boolean = false            //是否处于按下状态\n    currentDirectKey!: KeyCode          //当前按下的按键是那个\n    npcDisplayInfo: NPCDisplayInfo = {\n        hair: 0,\n        pants: 0,\n        shirt: 0\n    }     //当前选择的人物的服装信息\n    \n    start() {\n        this.setNPCDisplay({\n            hair: -256,\n            pants: -1280,\n            shirt: -512\n        })\n        input.on(Input.EventType.KEY_DOWN, (event: EventKeyboard)=>{\n            this.setNPCMoveDirect(event.keyCode)\n            this.keyDown = true\n            this.currentDirectKey = event.keyCode\n        })\n\n        input.on(Input.EventType.KEY_UP, (event: EventKeyboard)=>{\n            this.keyDown = false\n        })\n    }\n\n    update(deltaTime: number) {\n        if(this.keyDown){\n            this.setNPCMoveDirect(this.currentDirectKey)\n            this.setMoveSprite(this.currentDirectKey)\n        }\n    }\n\n    setNPCDisplayBase(){\n        \n    }\n\n    setNPCDisplay(npcDisplayInfo: NPCDisplayInfo = {\n        hair: 0,\n        pants: 0,\n        shirt: 0\n    }){\n        this.npcDisplayInfo = npcDisplayInfo\n        this.hair.setPosition(this.npcDisplayInfo.hair, 0)\n        this.pants.setPosition(this.npcDisplayInfo.pants, 0)\n        this.shirt.setPosition(this.npcDisplayInfo.shirt, 0)\n    }\n\n    setNPCMoveDirect(key: KeyCode){\n        this.npcRoot.setPosition(this.npcRoot.getPosition().x, NPCDirect[key].directPos)\n        this.setNPCPosition(key)\n    }\n\n    setNPCPosition(key: KeyCode){\n        const originPos = this.npc.getPosition()\n        this.npc.setPosition(originPos.x + NPCDirect[key].offsetX, originPos.y + NPCDirect[key].offsetY)\n        \n    }\n\n    setMoveSprite(key: KeyCode){\n\n    }\n\n}\n\n"]}